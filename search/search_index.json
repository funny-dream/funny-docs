{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Funny Docs","text":"<p>\u751f\u547d\u4e2d\u6700\u7f8e\u597d\u7684\u4e8b\u60c5\u4e4b\u4e00\u5c31\u662f\u4e0d\u65ad\u5b66\u4e60\u65b0\u77e5\u8bc6\uff0c\u5e76\u4e0e\u5176\u4ed6\u4eba\u5206\u4eab\u3002</p> <p>\u901a\u8fc7\u8bb0\u5f55\u8fd9\u4e9b\u6709\u8da3\u7684\u77e5\u8bc6\u548c\u7ecf\u5386\uff0c\u6211\u4eec\u53ef\u4ee5\u5e2e\u52a9\u81ea\u5df1\u66f4\u6df1\u5165\u5730\u7406\u89e3\u5b83\u4eec\uff0c\u5e76\u5c06\u5b83\u4eec\u4f20\u9012\u7ed9\u5176\u4ed6\u4eba\u3002</p> <p>\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u867d\u7136\u4e5f\u8bb8\u4f1a\u9047\u5230\u6311\u6218\u548c\u56f0\u96be\uff0c\u4f46\u5f53\u4f60\u770b\u7740\u4f60\u7684\u7b14\u8bb0\u548c\u6587\u7ae0\uff0c\u770b\u7740\u4f60\u6d89\u8db3\u548c\u63a2\u7d22\u7684\u65b0\u9886\u57df\uff0c\u4f60\u4f1a\u611f\u5230\u65e0\u6bd4\u5feb\u4e50\u548c\u6ee1\u8db3\u3002</p> <p>\u56e0\u6b64\uff0c\u4e0d\u8981\u5bb3\u6015\u72af\u9519\uff0c\u4e0d\u8981\u5bb3\u6015\u5931\u8d25\uff0c\u5f00\u59cb\u4f60\u7684\u63a2\u7d22\u4e4b\u65c5\uff0c\u8ba9\u6211\u4eec\u4e00\u8d77\u8bb0\u5f55\u3001\u5206\u4eab\u3001\u6210\u957f\uff01</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/","title":"Python\u4ece\u8fdb\u9636\u5230\u9ad8\u7ea7\u2014\u901a\u4fd7\u6613\u61c2\u7248","text":"<pre><code># ==================================\n# Author : Mikigo\n# Time   : 2021/12/23\n# ==================================\n</code></pre>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>Python \u8fdb\u9636\u662f\u6211\u4e00\u76f4\u5f88\u60f3\u5199\u7684\uff0c\u4f5c\u4e3a\u81ea\u5df1\u5b66\u4e60\u7684\u8bb0\u5f55\uff0c\u8fc7\u53bb\u81ea\u5df1\u5728\u770b\u4e00\u4e9b\u4ee3\u7801\u7684\u65f6\u5019\u7ecf\u5e38\u4f1a\u56f0\u60d1\uff0c\u770b\u4e0d\u61c2\uff0c\u7136\u540e\u81ea\u5df1\u53bb\u67e5\u8d44\u6599\u3001\u770b\u4e66\u7c4d\uff0c\u6162\u6162\u7684\u4e00\u4e2a\u4e2a\u5f04\u61c2\uff0c\u7ecf\u5e38\u6c89\u6d78\u5176\u4e2d\u3002\u5173\u4e8e Python \u9ad8\u7ea7\u8bed\u6cd5\u7684\u8d44\u6599\u3001\u4e66\u7c4d\u4e0d\u5c11\uff0c\u8be6\u7ec6\u662f\u8be6\u7ec6\uff0c\u4f46\u662f\u603b\u611f\u89c9\u5199\u7684\u592a\u590d\u6742\uff0c\u5b66\u4e60\u6709\u96be\u5ea6\uff0c\u800c\u4e14\u4e0d\u80fd\u4f7f\u4eba\u5370\u8c61\u6df1\u523b\u3002</p> <p>\u201c<code>TLDR</code>\u201d \u662f\u6d41\u884c\u7684\u4e92\u8054\u7f51\u884c\u8bdd\uff0c\u610f\u601d\u662f\u201c\u592a\u957f\u4e0d\u8bfb\uff08 to long didn't read \uff09\u201d\u3002\u5176\u5b9e\u5f88\u591a\u5185\u5bb9\u7684\u6838\u5fc3\u77e5\u8bc6\u5c31\u90a3\u4e48\u4e00\u70b9\uff0c\u7ec6\u679d\u672b\u8282\u7684\u4e1c\u897f\u86ee\u591a\uff0c\u63cf\u8ff0\u8bcd\u53e5\u4e5f\u5f88\u5b98\u65b9\u5f88\u6666\u6da9\uff0c\u5f88\u96be\u8bfb\u61c2\uff0c\u7ed9\u4eba\u611f\u89c9\u5c31\u662f\u6bcf\u4e2a\u5b57\u6211\u90fd\u8ba4\u8bc6\uff0c\u600e\u4e48\u653e\u5230\u4e00\u8d77\u5c31\u4e0d\u8ba4\u8bc6\u4e86\u3002\u901a\u4fd7\u6613\u61c2\u7248\u5c31\u662f\u60f3\u7528\u4e00\u79cd\u6bd4\u8f83\u8f7b\u677e\u3001\u7b80\u5355\u7684\u65b9\u5f0f\u8bf4\u660e\u5176\u4e2d\u7684\u91cd\u70b9\u4e14\u5e38\u7528\u7684\u5185\u5bb9\uff0c\u5728\u5199\u4f5c\u7684\u8fc7\u7a0b\u4e2d\u6211\u4e5f\u65f6\u5e38\u544a\u8beb\u81ea\u5df1\u8981\u514b\u5236\uff0c\u522b\u6574\u590d\u6742\u4e86\u3002</p> <p>Python \u662f\u4e00\u95e8\u5f88\u5bb9\u6613\u5165\u95e8\u7684\u8bed\u8a00\uff0c\u4f46\u662f\u8981\u8fdb\u9636\u5176\u5b9e\u9700\u8981\u82b1\u8d39\u5927\u91cf\u7684\u65f6\u95f4\u548c\u7cbe\u529b\uff0c\u800c\u4e14\u8fd8\u9700\u8981\u4e0d\u65ad\u7684\u7ec3\u4e60\u4f7f\u7528\uff0c\u6216\u8bb8\u4f60\u5df2\u7ecf\u82b1\u4e86\u4e24\u4e2a\u6708\u65f6\u95f4\u5b66\u4e60\u4e86 Python \u57fa\u7840\u5e76\u80fd\u591f\u5199\u4e00\u4e9b\u5c0f\u811a\u672c\uff0c\u6216\u8bb8\u4f60\u5df2\u7ecf\u8fbe\u5230\u4e00\u5b9a\u9ad8\u5ea6\u80fd\u72ec\u7acb\u7f16\u5199\u5927\u578b\u9879\u76ee\uff0c\u4f46\u662f\u5b66\u4e60\u6c38\u65e0\u6b62\u5883\uff0c\u6211\u4eec\u90fd\u8fd8\u6709\u5f88\u591a\u9700\u8981\u5b66\u4e60\u63d0\u5347\u7684\u5730\u65b9\u3002\u4ee5\u4e0b\u5185\u5bb9\u7edd\u5927\u90e8\u5206\u90fd\u662f\u6211\u5728\u9879\u76ee\u4e2d\u7528\u8fc7\u7684\uff0c\u5f88\u591a\u63cf\u8ff0\u662f\u6211\u81ea\u5df1\u7684\u7406\u89e3\uff0c\u53ef\u80fd\u4f1a\u548c\u5b98\u65b9\u6709\u4e00\u5b9a\u51fa\u5165\uff0c\u4f46\u662f\u76f8\u4fe1\u5927\u5dee\u4e0d\u5dee\uff0c\u4e5f\u6b22\u8fce\u6709\u5fc3\u4eba\u4e0d\u541d\u8d50\u6559\u3002</p> <p>\u5185\u5bb9\u8fd8\u4f1a\u7ee7\u7eed\u589e\u52a0\uff0c\u5305\u62ec\u4e00\u4e9b\u7b80\u5355\u597d\u7528\u7684\u6807\u51c6\u5e93\u3001\u4e09\u65b9\u5e93\u90fd\u4f1a\u6301\u7eed\u52a0\u8fdb\u6765\uff0c\u5e0c\u671b\u770b\u5230\u7684\u540c\u5b66\u53ef\u4ee5\u591a\u591a\u63d0\u610f\u89c1\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_2","title":"\u4e8c\u3001\u7c7b\u548c\u5bf9\u8c61","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1","title":"1\u3001\u9e2d\u5b50\u7c7b\u578b","text":"<p>\u201c\u5f53\u770b\u5230\u4e00\u53ea\u9e1f\u8d70\u8d77\u6765\u50cf\u9e2d\u5b50\u3001\u6e38\u6cf3\u8d77\u6765\u50cf\u9e2d\u5b50\u3001\u53eb\u8d77\u6765\u4e5f\u50cf\u9e2d\u5b50\uff0c\u90a3\u4e48\u8fd9\u53ea\u9e1f\u5c31\u53ef\u4ee5\u88ab\u79f0\u4e3a\u9e2d\u5b50\u3002\u201d \u8fd9\u662f\u767e\u79d1\u4e0a\u5bf9\u5b83\u7684\u89e3\u91ca\u3002</p> <p>\u9e2d\u5b50\u7c7b\u578b\uff08duck typing\uff09\u662f\u52a8\u6001\u7c7b\u578b\u7684\u4e00\u79cd\u98ce\u683c\uff0c\u9e2d\u5b50\u7c7b\u578b\u5bf9\u4e8e Python \u7f16\u7801\u6765\u8bb2\u975e\u5e38\u91cd\u8981\uff0c\u7406\u89e3\u5b83\u80fd\u8ba9\u4f60\u771f\u6b63\u7406\u89e3\u4ec0\u4e48\u662f\u4e00\u5207\u7686\u5bf9\u8c61\uff0c\u66f4\u6709\u52a9\u4e8e\u6211\u4eec\u7406\u89e3\u8fd9\u95e8\u8bed\u8a00\u7684\u8bbe\u8ba1\u601d\u60f3\u548c\u5b9e\u73b0\u539f\u7406\uff0c\u800c\u4e0d\u662f\u4ec5\u4ec5\u6d6e\u4e8e\u8868\u9762\u7684\u5ff5\u7ecf \u201c\u4e00\u5207\u7686\u5bf9\u8c61\u201d\u3002</p> <p>\u9e2d\u5b50\u7c7b\u578b\u59cb\u7ec8\u8d2f\u7a7f\u4e8e Python \u4ee3\u7801\u5f53\u4e2d\uff0c\u4e00\u4e2a\u5bf9\u8c61\u5b83\u662f\u4ec0\u4e48\u7c7b\u578b\u53d6\u51b3\u4e8e\u5b83\u5b9e\u73b0\u4e86\u4ec0\u4e48\u534f\u8bae\uff0c\u56e0\u6b64\u53ef\u4ee5\u8bf4 Python \u662f\u4e00\u79cd\u57fa\u4e8e\u534f\u8bae\u7684\u7f16\u7a0b\u8bed\u8a00\u3002</p> <p>\u90a3\u8fd9\u4e9b\u534f\u8bae\u662f\u4ec0\u4e48\uff0c\u53c8\u6709\u54ea\u4e9b\u534f\u8bae\uff1f\u8fd9\u91cc\u7684\u534f\u8bae\uff0c\u66f4\u591a\u7684\u65f6\u5019\u6211\u4eec\u79f0\u4e3a\u9b54\u6cd5\u51fd\u6570\u6216\u9b54\u6cd5\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u5177\u6709\u5f88\u591a\u795e\u5947\u7684\u9b54\u529b\uff0c\u574a\u95f4\u56e0\u6b64\u79f0\u4e4b\u4e3a\u9b54\u6cd5\u51fd\u6570\u3002</p> <p>\u5728 Python \u91cc\u9762\uff0c\u6240\u6709\u4ee5\u53cc\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u4e14\u4ee5\u53cc\u4e0b\u5212\u7ebf\u7ed3\u5c3e\u7684\u51fd\u6570\u90fd\u662f\u9b54\u6cd5\u51fd\u6570\uff0c\u5c31\u50cf <code>__init__</code> \u8fd9\u79cd\uff0c\u5b83\u4eec\u662f Python \u8bed\u8a00\u5929\u7136\u81ea\u5e26\u7684\uff0c\u4e0d\u662f\u901a\u8fc7\u67d0\u4e2a\u7c7b\u53bb\u7ee7\u627f\u800c\u6765\u7684\uff0c\u6211\u4eec\u4e5f\u4e0d\u8981\u968f\u610f\u53bb\u81ea\u5b9a\u4e49\u4e00\u4e2a\u8fd9\u6837\u7684\u51fd\u6570\uff0c\u5c0f\u5fc3\u7740\u9b54\u3002</p> <p>\u9b54\u6cd5\u51fd\u6570\u6709\u5f88\u591a\uff0c\u4f46\u662f\u7ecf\u5e38\u7528\u5230\u7684\u4e5f\u6ca1\u591a\u5c11\uff0c\u5e38\u7528\u7684\u4e00\u4e9b\u9b54\u6cd5\u51fd\u6570\u5728\u540e\u9762\u7684\u5185\u5bb9\u4f1a\u9010\u6b65\u4ecb\u7ecd\u5230\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2","title":"2\u3001\u7c7b\u578b\u5224\u65ad","text":"<p>\u5728\u5224\u65ad\u6570\u636e\u7c7b\u578b\u7684\u65f6\u5019\u5e38\u89c1\u7684\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a<code>isinstance</code> \u548c <code>type</code> </p> <pre><code>isinstance(\"123\", str)  # \u8fd4\u56de\u5e03\u5c14\u503c\ntype(\"123\")  # \u76f4\u63a5\u8fd4\u56de\u7c7b\u578b\n</code></pre> <p>isinstance \u4e3b\u8981\u7528\u4e8e\u5224\u65ad\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\u8fd9\u4e2a\u597d\u7406\u89e3\uff0c\u4e0d\u591a\u8bb2\u3002</p> <p>type \u53ef\u4ee5\u67e5\u770b\u7c7b\u578b\uff0c\u4f46\u5b83\u80fd\u505a\u7684\u8fdc\u4e0d\u6b62\u4e8e\u6b64\uff0c\u5b83\u4e3b\u8981\u7528\u4e8e\u52a8\u6001\u7684\u521b\u5efa\u7c7b\u3002</p> <pre><code>t = type(\"Mikigo\", (), {\"name\": \"huangmingqiang\"})\nT = t()\nprint(t)\nprint(T.name)\nprint(type(t))\n</code></pre> <pre><code>&lt;class '__main__.Mikigo'&gt;\nhuangmingqiang\n&lt;class 'type'&gt;\n</code></pre> <p>\u4f60\u770b\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u5e76\u8d4b\u503c\u7ed9 t\uff0c\u7c7b\u540d\u4e3a <code>Mikigo</code>\uff0ct \u662f\u7c7b\u5bf9\u8c61\u7684\u5f15\u7528\uff0cname \u662f\u5176\u4e2d\u7684\u5c5e\u6027\uff0cPython \u4e2d\u4e00\u5207\u90fd\u662f\u5bf9\u8c61\uff0c\u7c7b\u4e5f\u662f\u5bf9\u8c61\uff0c\u53ea\u4e0d\u8fc7\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5bf9\u8c61\uff0c\u662f <code>type</code> \u7684\u5bf9\u8c61\u3002</p> <p>\u8fd9\u4e2a\u5730\u65b9\u6709\u70b9\u7ed5\u54c8\uff0c\u4f60\u7ec6\u54c1\u3002</p> <p>\u6211\u770b\u5230\u7f51\u4e0a\u597d\u591a\u8bb2 <code>type</code> \u51fd\u6570\uff0c\u51c6\u786e\u8bb2 <code>type</code> \u662f\u4e00\u4e2a\u7c7b\uff0c\u53ea\u662f\u7528\u6cd5\u50cf\u51fd\u6570\u3002\u5728\u6e90\u7801\u4e2d\uff1a\uff08\u901a\u8fc7 <code>Pycharm</code> \u6309\u4f4f <code>Ctrl</code> \u70b9\u51fb\u8fdb\u5165\uff09</p> <pre><code>class type(object):\ndef __init__(cls, what, bases=None, dict=None): # known special case of type.__init__\n\"\"\"\n        type(object_or_name, bases, dict)\n        type(object) -&gt; the object's type\n        type(name, bases, dict) -&gt; a new type\n        # (copied from class doc)\n        \"\"\"\npass\n</code></pre> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u4e3a\u4ec0\u4e48\u6e90\u7801\u91cc\u9762\u6709 <code>pass</code>\uff0c\u4f60\u6ca1\u770b\u9519\uff0c\u6e90\u7801\u91cc\u9762\u5c31\u662f\u5199\u7684 <code>pass</code>\uff0c\u8fd9\u79cd\u5b9e\u9645\u4e0a\u662f\u7531\u4e8e\u5e95\u5c42\u662f\u7531 C \u8bed\u8a00\u5b9e\u73b0\u7684\uff08\u672c\u6587\u5185\u5bb9\u90fd\u662f\u57fa\u4e8e <code>CPython</code>\uff09\uff0c\u4e00\u822c\u7684\u64cd\u4f5c\u662f\u770b\u4e0d\u5230\u6e90\u7801\u7684\uff0c\u4e4b\u6240\u4ee5\u80fd\u770b\u5230\u662f\u56e0\u4e3a <code>Pycharm</code> \u7ed9\u6211\u4eec\u63d0\u4f9b\u7684\u529f\u80fd\uff08\u5176\u4ed6\u7f16\u8f91\u5668\u4e0d\u77e5\u9053\u54c8\uff0c\u6ca1\u548b\u7528\u8fc7\u5176\u4ed6\u7684\uff09\uff0c\u76f8\u5f53\u4e8e\u4ee5\u4ee3\u7801\u7684\u5f62\u5f0f\u770b\u6587\u6863\uff0c\u6240\u4ee5\u6211\u4eec\u770b\u5230\u7684\u4e0d\u662f\u771f\u6b63\u7684\u6e90\u7801\uff0c\u4f46\u662f\u6700\u63a5\u8fd1\u4e8e\u6e90\u7801\u7684\u6e90\u7801\uff0c\u59d1\u4e14\u79f0\u4e4b\u4e3a\u6e90\u7801\u5427\u3002</p> <p>type \u7684\u53c2\u6570\u8bf4\u660e\uff1a</p> <ul> <li> <p>\u5f53 type() \u53ea\u6709\u4e00\u4e2a\u53c2\u6570\u65f6\uff0c\u5176\u4f5c\u7528\u5c31\u662f\u8fd4\u56de\u53d8\u91cf\u6216\u5bf9\u8c61\u7684\u7c7b\u578b\u3002</p> </li> <li> <p>\u5f53 type() \u6709\u4e09\u4e2a\u53c2\u6570\u65f6\uff0c\u5176\u4f5c\u7528\u5c31\u662f\u521b\u5efa\u7c7b\u5bf9\u8c61\uff1a</p> </li> <li> <p>\u53c2\u6570 1\uff1a<code>what</code> \u8868\u793a\u7c7b\u540d\u79f0\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\uff1b</p> </li> <li>\u53c2\u6570 2\uff1a<code>bases</code> \u8868\u793a\u7ee7\u627f\u5bf9\u8c61\uff08\u7236\u7c7b\uff09\uff0c\u5143\u7ec4\u7c7b\u578b\uff0c\u5355\u5143\u7d20\u4f7f\u7528\u9017\u53f7\uff1b</li> <li>\u53c2\u6570 3\uff1a<code>dict</code> \u8868\u793a\u5c5e\u6027\uff0c\u8fd9\u91cc\u53ef\u4ee5\u586b\u5199\u7c7b\u5c5e\u6027\u3001\u7c7b\u65b9\u5f0f\u3001\u9759\u6001\u65b9\u6cd5\uff0c\u91c7\u7528\u5b57\u5178\u683c\u5f0f\uff0c<code>key</code> \u4e3a\u5c5e\u6027\u540d\uff0c<code>value</code> \u4e3a\u5c5e\u6027\u503c\u3002</li> </ul> <pre><code>@staticmethod\ndef my_static():\nprint(\"this is static\")\nt = type(\"Mikigo\", (), {\"name\": \"huangmingqiang\", \"static\": my_static})\nT = t()\nt.static()\nT.static()\n</code></pre> <pre><code>this is static\nthis is static\n</code></pre> <p>\u8fd9\u6837\u5c31\u6dfb\u52a0\u4e86\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u5f88\u6e05\u695a\u54c8\uff0c\u5173\u4e8e\u9759\u6001\u65b9\u6cd5\u662f\u4ec0\u4e48\u6211\u4eec\u540e\u9762\u4f1a\u8bb2\u5230\uff0c\u8fd9\u91cc\u53ea\u9700\u8981\u77e5\u9053 type \u521b\u5efa\u7c7b\u7684\u65b9\u6cd5\u5c31\u597d\u4e86\u3002</p> <p>\u901a\u8fc7\u4e0a\u9762 type \u7684\u6e90\u7801\u53ef\u4ee5\u770b\u5230\uff0ctype \u662f\u7ee7\u627f\u4e86 object \u7684\uff0c\u6211\u4eec\u77e5\u9053\u6240\u6709\u7c7b\u7684\u9876\u5c42\u7c7b\u90fd\u662f\u7ee7\u627f\u7684 object\uff0c\u90a3 object \u53c8\u662f\u4ece\u54ea\u91cc\u6765\u7684\uff1f\u6253\u5370\u770b\u4e00\u4e0b\uff1a</p> <pre><code>print(type(object))\n</code></pre> <pre><code>&lt;class 'type'&gt;\n</code></pre> <p>\u597d\u5bb6\u4f19\uff0cobject \u4e5f\u662f\u7531 type \u521b\u5efa\u7684\uff0c\u524d\u9762\u8bf4\u4e86 type \u7ee7\u627f\u4e86 object\uff0c\u8fd9\u4fe9\u54e5\u4eec\u513f\u5b8c\u7f8e\u95ed\u73af\u4e86\uff0c\u6211\u76f4\u63a5\u597d\u5bb6\u4f19\uff0c\u7406\u89e3\u8d77\u6765\u6709\u70b9\u66f4\u7ed5\u4e86\u54c8\u3002</p> <p>\u4f60\u4e5f\u53ef\u4ee5\u8bf4 type \u81ea\u5df1\u521b\u5efa\u4e86\u81ea\u5df1\uff0c\u8fd9\u91cc\u8981\u7ec6\u7ec6\u7684\u54c1\u3002\u5b9e\u9645\u4e0a\u5982\u679c\u4f60\u4e86\u89e3\u6307\u9488\u7684\u6982\u5ff5\uff0c\u8fd9\u91cc\u5176\u5b9e\u4e5f\u4e0d\u96be\u7406\u89e3\uff0c\u4e0d\u5c31\u662f\u81ea\u5df1\u6307\u5411\u81ea\u5df1\u561b\uff0c\u6240\u4ee5\u8bf4 type \u521b\u5efa\u4e86\u6240\u6709\u7c7b\uff0c\u56e0\u4e3a\u4ed6\u8fde\u4ed6\u81ea\u5df1\u90fd\u4e0d\u653e\u8fc7\uff0c\u8fd8\u6709\u4ec0\u4e48\u4e8b\u60c5\u505a\u4e0d\u51fa\u6765\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3","title":"3\u3001\u7c7b\u53d8\u91cf\u548c\u5b9e\u4f8b\u53d8\u91cf","text":"<p>\uff081\uff09\u7c7b\u53d8\u91cf\u662f\u5728\u7c7b\u91cc\u9762\u76f4\u63a5\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5b83\u53ef\u4ee5\u88ab\u7c7b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\uff0c\u4e5f\u53ef\u4ee5\u88ab\u5b9e\u4f8b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\u3002</p> <pre><code>class Test:\nb = 1\ndef __init__(self):  # \u6784\u9020\u51fd\u6570\nself.a = 1\nT = Test()\nprint(T.b)\nprint(Test.b)\nT.b = 2  # \u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u8d4b\u503c\nprint(T.b)\nTest.b = 2 # \u901a\u8fc7\u7c7b\u5bf9\u8c61\u8d4b\u503c\nprint(Test.b)\n</code></pre> <pre><code>1\n1\n2\n2\n</code></pre> <p>b \u662f\u7c7b\u53d8\u91cf\uff0c\u90fd\u80fd\u88ab\u8bbf\u95ee\u548c\u8d4b\u503c\uff0c\u6ca1\u95ee\u9898\u54c8\u3002</p> <p>\uff082\uff09\u5b9e\u4f8b\u53d8\u91cf\u662f\u5728\u6784\u9020\u51fd\u6570\u91cc\u9762\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5b83\u53ef\u4ee5\u88ab\u5b9e\u4f8b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\uff0c\u4e0d\u80fd\u88ab\u7c7b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\u3002</p> <pre><code>class Test:\nb = 1\ndef __init__(self):\nself.a = 1\nT = Test()\nprint(T.a)\nT.a = 2\nprint(T.a)\nprint(Test.a)\nTest.a = 2\nprint(Test.a)\n</code></pre> <pre><code>1\n2\nTraceback (most recent call last):\nFile \"/tmp/pycharm_project_16/123.py\", line 12, in &lt;module&gt;\nprint(Test.a)\nAttributeError: type object 'Test' has no attribute 'a'\n</code></pre> <p>a \u662f\u5b9e\u4f8b\u53d8\u91cf\uff0c\u4f60\u770b\u5b9e\u4f8b\u5bf9\u8c61\u8bbf\u95ee\u548c\u8d4b\u503c\u6b63\u5e38\u7684\uff0c\u7c7b\u5bf9\u8c61\u8bbf\u95ee\u5c31\u62a5\u9519\u4e86\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#4","title":"4\u3001\u7c7b\u65b9\u6cd5\u3001\u9759\u6001\u65b9\u6cd5\u548c\u5b9e\u4f8b\u65b9\u6cd5","text":"<p>\uff081\uff09\u5b9e\u4f8b\u65b9\u6cd5\u53c8\u79f0\u5bf9\u8c61\u65b9\u6cd5\uff0c\u662f\u7c7b\u4e2d\u6700\u5e38\u89c1\u7684\u4e00\u79cd\u65b9\u6cd5\u3002</p> <pre><code>class Test:\ndef obj_method(self):\nprint(\"this is obj method\")\n</code></pre> <p>\u5b9e\u4f8b\u65b9\u6cd5\u53c2\u6570\u5fc5\u987b\u4f20\u5165 <code>self</code> \uff0c<code>self</code> \u8868\u793a\u5b9e\u4f8b\u5bf9\u8c61\u672c\u8eab\uff0c\u5b9e\u4f8b\u65b9\u6cd5\u7684\u8c03\u7528\u4e5f\u5fc5\u987b\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u6765\u8c03\u7528\uff1a</p> <pre><code>Test().obj_method()\n</code></pre> <p>\uff082\uff09\u7c7b\u65b9\u6cd5</p> <pre><code>class Test:\n@classmethod\ndef cls_method(cls):\nprint(\"this is class method\")\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7\u7c7b\u5bf9\u8c61\u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u8c03\u7528\u3002</p> <pre><code>Test.cls_method()\nTest().cls_method()\n</code></pre> <p>\u6ce8\u610f\u4e24\u70b9\uff1a</p> <ul> <li>\u65b9\u6cd5\u524d\u9762\u5fc5\u987b\u52a0\u88c5\u9970\u5668 <code>classmethod</code> \uff0c\u88c5\u9970\u5668\u662f <code>Python</code> \u4e2d\u7684\u4e00\u79cd\u8bed\u6cd5\u7cd6\uff0c\u540e\u9762\u4f1a\u8bb2\u5230\uff0c\u8bb0\u4f4f\u8fd9\u79cd\u56fa\u5b9a\u7528\u6cd5\uff0c\u8fd9\u79cd\u5199\u6cd5\u4e5f\u662f\u521d\u4ee3\u88c5\u9970\u5668\u7684\u7528\u6cd5\u3002</li> <li>\u53c2\u6570\u4f20\u5165 <code>cls</code> \uff0c<code>cls</code> \u8868\u793a\u7c7b\u5bf9\u8c61\uff0c\u4f46\u662f\u6ce8\u610f\u4e0d\u662f\u5fc5\u987b\u7684\u5199\u6cd5\uff0c\u5199 <code>cls</code> \u662f\u4e00\u79cd\u7ea6\u5b9a\u4fd7\u6210\u7684\u5199\u6cd5\uff0c\u65b9\u4fbf\u6211\u4eec\u7406\u89e3\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u91cc\u4f60\u5199 <code>self</code> \u4ece\u8bed\u6cd5\u4e0a\u4e5f\u662f\u4e0d\u4f1a\u6709\u95ee\u9898\u7684\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6709\u65f6\u5019\u6211\u4eec\u5c06\u4e00\u4e2a\u5b9e\u4f8b\u65b9\u6cd5\u6539\u6210\u7c7b\u65b9\u6cd5\uff0c\u76f4\u63a5\u5728\u65b9\u6cd5\u524d\u9762\u6dfb\u52a0\u4e86\u88c5\u9970\u5668\uff0c\u800c\u6ca1\u6709\u6539 <code>self</code>\uff0c\u4ecd\u7136\u80fd\u6b63\u5e38\u6267\u884c\u7684\u539f\u56e0\u3002</li> </ul> <p>\uff083\uff09\u9759\u6001\u65b9\u6cd5\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u666e\u901a\u7684\u51fd\u6570\uff0c\u548c\u8fd9\u4e2a\u7c7b\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u5b83\u53ea\u662f\u8fdb\u5165\u7c7b\u7684\u540d\u79f0\u7a7a\u95f4\u3002</p> <pre><code>class Test:\n@staticmethod\ndef static_method():\nprint(\"this is static method\")\n</code></pre> <p>\u4e0d\u9700\u8981\u4f20\u5165\u4efb\u4f55\u53c2\u6570\u3002\u540c\u6837\uff0c\u53ef\u4ee5\u901a\u8fc7\u7c7b\u5bf9\u8c61\u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u8c03\u7528\u3002</p> <pre><code>Test.static_method()\nTest().static_method()\n</code></pre> <p>\u6211\u770b\u5230\u4e00\u4e9b\u793e\u533a\u5927\u4f6c\u90fd\u8868\u73b0\u51fa\u5bf9\u9759\u6001\u65b9\u6cd5\u7684\u5acc\u5f03\uff0c\u4ed6\u4eec\u89c9\u5f97\u65e2\u7136\u9759\u6001\u65b9\u6cd5\u548c\u7c7b\u6ca1\u6709\u5173\u7cfb\uff0c\u4f55\u4e0d\u5982\u5728\u7c7b\u5916\u9762\u5199\uff0c\u76f4\u63a5\u5199\u5728\u6a21\u5757\u91cc\u9762\u5c82\u4e0d\u5feb\u54c9\u3002\u54b1\u4eec\u4e0d\u4e88\u8bc4\u4ef7\uff0c\u5b58\u5728\u5373\u5408\u7406\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#5","title":"5\u3001\u7c7b\u548c\u5b9e\u4f8b\u5c5e\u6027\u7684\u67e5\u627e\u987a\u5e8f","text":"<p>\u8fd9\u91cc\u9700\u8981\u5f15\u5165\u4e00\u4e2a\u6982\u5ff5\uff1a<code>MRO\uff08Method Resolution Order\uff09</code>\uff0c\u76f4\u8bd1\u8fc7\u6765\u5c31\u662f\u201c\u65b9\u6cd5\u67e5\u627e\u987a\u5e8f\u201d\u3002</p> <p>\u5927\u5bb6\u77e5\u9053\u7c7b\u662f\u53ef\u4ee5\u7ee7\u627f\u7684\uff0c\u5b50\u7c7b\u7ee7\u627f\u4e86\u7236\u7c7b\uff0c\u5b50\u7c7b\u5c31\u53ef\u4ee5\u8c03\u7528\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u90a3\u4e48\u5728\u591a\u7ee7\u627f\u7684\u60c5\u51b5\u4e0b\uff0c\u5b50\u7c7b\u5728\u8c03\u7528\u7236\u7c7b\u65b9\u6cd5\u65f6\u7684\u903b\u8f91\u65f6\u600e\u6837\u7684\u5462\uff0c\u5982\u679c\u591a\u4e2a\u7236\u7c7b\u4e2d\u5b58\u5728\u76f8\u540c\u7684\u65b9\u6cd5\uff0c\u8c03\u7528\u903b\u8f91\u53c8\u662f\u600e\u6837\u7684\u5462\uff0c\u8fd9\u5c31\u662f <code>MRO</code>\u3002</p> <p>\u5728<code>Python2.3</code> \u4e4b\u524d\u7684\u4e00\u4e9b\u67e5\u627e\u7b97\u6cd5\uff0c\u6bd4\u5982\uff1a\u6df1\u5ea6\u4f18\u5148\uff08<code>deep first search</code>\uff09\u3001\u5e7f\u5ea6\u4f18\u5316\u7b49\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u83f1\u5f62\u7ee7\u627f\u7684\u95ee\u9898\u90fd\u4e0d\u80fd\u5f88\u597d\u7684\u5904\u7406\u3002\u8fd9\u90e8\u5206\u5185\u5bb9\u6bd4\u8f83\u591a\u4e14\u6742\uff0c\u53ef\u4ee5\u81ea\u5df1\u67e5\u9605\u8d44\u6599\u3002</p> <p>\u5728 <code>Python2.3</code> \u4e4b\u540e\uff0c\u65b9\u6cd5\u7684\u67e5\u627e\u7b97\u6cd5\u90fd\u7edf\u4e00\u4e3a\u53eb <code>C3</code> \u7684\u67e5\u627e\u7b97\u6cd5\uff0c\u5347\u7ea7\u4e4b\u540e\u7684\u7b97\u6cd5\u66f4\u52a0\u590d\u6742\uff0c\u91c7\u7528\u7684\u7279\u6280\u7248\u62d3\u6251\u6392\u5e8f\uff0c\u8fd9\u91cc\u4e5f\u4e0d\u7ec6\u8bb2\uff0c\u53ef\u4ee5\u81ea\u5df1\u67e5\u9605\u8d44\u6599\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5173\u5fc3\u73b0\u5728\u65b9\u6cd5\u67e5\u627e\u987a\u5e8f\u662f\u600e\u6837\u7684\u5c31\u884c\u4e86\u3002</p> <p>\u6765\uff0c\u8fd9\u91cc\u4e3e\u4f8b\u8bf4\u660e\uff1a</p> <pre><code>class A:\npass\nclass B:\npass\nclass C(A, B):\npass\nprint(C.__mro__)\n</code></pre> <p><code>__mro__</code> \u53ef\u4ee5\u67e5\u770b\u65b9\u6cd5\u7684\u67e5\u627e\u987a\u5e8f\u3002</p> <pre><code>(&lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class '__main__.B'&gt;, &lt;class 'object'&gt;)\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e C \u6765\u8bb2\uff0c\u5b83\u91cc\u9762\u7684\u65b9\u6cd5\u67e5\u627e\u987a\u5e8f\u662f C \u2014 A \u2014 B\uff0c\u6ca1\u6bdb\u75c5\u54c8\uff0c\u5f88\u6e05\u695a\u3002</p> <p>\u73b0\u5728\u5347\u7ea7\u4e00\u4e0b\u7ee7\u627f\u5173\u7cfb\uff0c\u8bd5\u8bd5\u83f1\u5f62\u7ee7\u627f\uff1a</p> <pre><code>class A:\npass\nclass B(A):\npass\nclass C(A):\npass\nclass D(B, C):\npass\nprint(D.__mro__)\n</code></pre> <pre><code>(&lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;)\n</code></pre> <p>D \u7684\u67e5\u627e\u987a\u5e8f\u662f D \u2014 B \u2014 C \u2014 A</p> <p>\u8bf4\u660e\u4ec0\u4e48\u95ee\u9898\uff1f\u6211\u5728\u8fd9\u567c\u91cc\u556a\u5566\u8bf4\u4e86\u8fd9\u4e48\u591a\uff0c\u5230\u5e95\u60f3\u8bf4\u5565\uff1f</p> <p>\u60f3\u8c61\u4e00\u4e0b\uff0c\u5982\u679c\u4f60\u5728 B \u548c C \u91cc\u9762\u90fd\u91cd\u8f7d\u4e86 A \u91cc\u9762\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u6b64\u65f6\u5982\u679c\u4f60\u60f3\u8c03\u7528\u7684\u662f C \u91cc\u9762\u7684\u65b9\u6cd5\uff0c\u5b9e\u9645\u4e0a\u662f\u65e0\u6cd5\u8c03\u7528\u7684\uff0c\u56e0\u4e3a\u6839\u636e\u65b9\u6cd5\u7684\u67e5\u627e\u987a\u5e8f\uff0c\u4f1a\u5148\u627e\u5230 B \u91cc\u9762\u7684\u65b9\u6cd5\u3002</p> <p>\u56e0\u6b64\uff0c\u91cd\u70b9\u6765\u4e86\uff1a\u5728 Python \u4e2d\u867d\u7136\u662f\u652f\u6301\u591a\u7ee7\u627f\u7684\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u4e0d\u5efa\u8bae\u4f7f\u7528\u591a\u7ee7\u627f\uff0c\u56e0\u4e3a\u5982\u679c\u7ee7\u627f\u5173\u7cfb\u8bbe\u8ba1\u5f97\u4e0d\u597d\uff0c\u5f88\u5bb9\u6613\u9020\u6210\u903b\u8f91\u5173\u7cfb\u7684\u6df7\u4e71\uff0c\u539f\u56e0\u5c31\u662f <code>MRO</code>\u3002</p> <p>Ruby \u4e4b\u7236\u5728\u300a\u677e\u672c\u884c\u5f18\u7684\u7a0b\u5e8f\u4e16\u754c\u300b\u4e66\u4e2d\uff0c\u8bb2\u5230\u4e09\u70b9\u591a\u7ee7\u627f\u7684\u95ee\u9898\uff1a</p> <ul> <li> <p>\u7ed3\u6784\u590d\u6742\u5316\uff1a\u5982\u679c\u662f\u5355\u4e00\u7ee7\u627f\uff0c\u4e00\u4e2a\u7c7b\u7684\u7236\u7c7b\u662f\u4ec0\u4e48\uff0c\u7236\u7c7b\u7684\u7236\u7c7b\u662f\u4ec0\u4e48\uff0c\u90fd\u5f88\u660e\u786e\uff0c\u56e0\u4e3a\u53ea\u6709\u5355\u4e00\u7684\u7ee7\u627f\u5173\u7cfb\uff0c\u7136\u800c\u5982\u679c\u662f\u591a\u91cd\u7ee7\u627f\u7684\u8bdd\uff0c\u4e00\u4e2a\u7c7b\u6709\u591a\u4e2a\u7236\u7c7b\uff0c\u8fd9\u4e9b\u7236\u7c7b\u53c8\u6709\u81ea\u5df1\u7684\u7236\u7c7b\uff0c\u90a3\u4e48\u7c7b\u4e4b\u95f4\u7684\u5173\u7cfb\u5c31\u5f88\u590d\u6742\u4e86\u3002</p> </li> <li> <p>\u4f18\u5148\u987a\u5e8f\u6a21\u7cca\uff1a\u5047\u5982\u6211\u6709A\uff0cC\u7c7b\u540c\u65f6\u7ee7\u627f\u4e86\u57fa\u7c7b\uff0cB\u7c7b\u7ee7\u627f\u4e86A\u7c7b\uff0c\u7136\u540eD\u7c7b\u53c8\u540c\u65f6\u7ee7\u627f\u4e86B\u548cC\u7c7b\uff0c\u6240\u4ee5D\u7c7b\u7ee7\u627f\u7236\u7c7b\u7684\u65b9\u6cd5\u7684\u987a\u5e8f\u5e94\u8be5\u662fD\u3001B\u3001A\u3001C\u8fd8\u662fD\u3001B\u3001C\u3001A\uff0c\u6216\u8005\u662f\u5176\u4ed6\u7684\u987a\u5e8f\uff0c\u5f88\u4e0d\u660e\u786e\u3002</p> </li> <li> <p>\u529f\u80fd\u51b2\u7a81\uff1a\u56e0\u4e3a\u591a\u91cd\u7ee7\u627f\u6709\u591a\u4e2a\u7236\u7c7b\uff0c\u6240\u4ee5\u5f53\u4e0d\u540c\u7684\u7236\u7c7b\u4e2d\u6709\u76f8\u540c\u7684\u65b9\u6cd5\u662f\u5c31\u4f1a\u4ea7\u751f\u51b2\u7a81\u3002\u5982\u679cB\u7c7b\u548cC\u7c7b\u540c\u65f6\u53c8\u6709\u76f8\u540c\u7684\u65b9\u6cd5\u65f6\uff0cD\u7ee7\u627f\u7684\u662f\u54ea\u4e2a\u65b9\u6cd5\u5c31\u4e0d\u660e\u786e\u4e86\uff0c\u56e0\u4e3a\u5b58\u5728\u4e24\u79cd\u53ef\u80fd\u6027\u3002</p> </li> </ul> <p>\u770b\u770b\u8fd9\u662f\u5927\u4f6c\u8bf4\u7684\uff0c\u4e0d\u662f\u6211\u8bf4\u7684\u3002</p> <p>\u90a3\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u6211\u5199\u7684\u529f\u80fd\u5f88\u590d\u6742\u554a\uff0c\u5fc5\u987b\u8981\u7ee7\u627f\u591a\u4e2a\u7c7b\uff0c\u600e\u4e48\u529e\uff0c\u96be\u53d7\uff01</p> <p>\u5b9e\u9645\u4e0a\u6709\u4e00\u79cd\u6bd4\u8f83\u6d41\u884c\u4e14\u5148\u8fdb\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff1a<code>Mixin</code> \u6df7\u5408\u6a21\u5f0f\uff0c\u5b8c\u7f8e\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a</p> <pre><code>class Animal:\npass\n# \u5927\u7c7b\nclass Mammal(Animal):\npass\n# \u5404\u79cd\u52a8\u7269\nclass Dog(Mammal):\npass\nclass Bat(Mammal):\npass\n</code></pre> <p>\u73b0\u5728\u52a8\u7269\u4eec\u6ca1\u6709\u4efb\u4f55\u6280\u80fd\uff0c\u54b1\u4eec\u9700\u8981\u7ed9\u52a8\u7269\u4eec\u589e\u52a0\u4e00\u4e0b\u6280\u80fd\uff1a</p> <pre><code>class RunnableMixIn:\ndef run(self):\nprint('Running...')\nclass FlyableMixIn:\ndef fly(self):\nprint('Flying...')\n</code></pre> <p>\u6ce8\u610f <code>Mixin</code> \u7684\u7c7b\u529f\u80fd\u662f\u72ec\u7acb\u7684\uff0c\u547d\u540d\u4e0a\u4e5f\u5e94\u8be5\u4f7f\u7528 <code>MixIn</code> \u7ed3\u5c3e\uff0c\u8fd9\u662f\u4e00\u79cd\u89c4\u8303\u3002</p> <p>\u9700\u8981 Run \u6280\u80fd\u7684\u52a8\u7269\uff1a</p> <pre><code>class Dog(Mammal, RunnableMixIn):\npass\n</code></pre> <p>\u9700\u8981 Fly \u6280\u80fd\u7684\u52a8\u7269\uff1a</p> <pre><code>class Bat(Mammal, FlyableMixIn):\npass\n</code></pre> <p>\u6709\u70b9\u611f\u89c9\u4e86\u6ca1\uff0c<code>Mixin</code> \u7c7b\u7684\u7279\u70b9\uff1a</p> <ul> <li>\u529f\u80fd\u72ec\u7acb\u3001\u5355\u4e00\uff1b</li> <li>\u53ea\u7528\u4e8e\u62d3\u5c55\u5b50\u7c7b\u7684\u529f\u80fd\uff0c\u4e0d\u80fd\u5f71\u54cd\u5b50\u7c7b\u7684\u4e3b\u8981\u529f\u80fd\uff0c\u5b50\u7c7b\u4e5f\u4e0d\u80fd\u4f9d\u8d56 <code>Mixin</code>\uff1b</li> <li>\u81ea\u8eab\u4e0d\u5e94\u8be5\u8fdb\u884c\u5b9e\u4f8b\u5316\uff0c\u4ec5\u7528\u4e8e\u88ab\u5b50\u7c7b\u7ee7\u627f\u3002</li> </ul> <p><code>Mixin</code> \u8bbe\u8ba1\u601d\u60f3\u7b80\u5355\u8bb2\u5c31\u662f\uff1a\u4e0d\u4e0e\u4efb\u4f55\u7c7b\u5173\u8054\uff0c\u53ef\u4e0e\u4efb\u4f55\u7c7b\u7ec4\u5408\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#6","title":"6\u3001\u7834\u89e3\u79c1\u6709\u5c5e\u6027","text":"<p>\u79c1\u6709\u5c5e\u6027\u5c31\u662f\u5728\u7c7b\u7684\u5185\u90e8\u80fd\u8bbf\u95ee\uff0c\u5916\u90e8\u4e0d\u80fd\u8bbf\u95ee\u3002</p> <p>\u5728 Python \u4e2d\u6ca1\u6709\u4e13\u95e8\u7684\u8bed\u53e5\u8fdb\u884c\u79c1\u6709\u5316\uff0c\u800c\u901a\u8fc7\u5728\u5c5e\u6027\u6216\u65b9\u6cd5\u524d\u9762\u52a0\u201c\u4e24\u4e2a\u4e0b\u5212\u7ebf\u201d\u5b9e\u73b0\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>class Test:\ndef __init__(self):\nself.__mi = \"Mikigo\" \ndef __ki(self):\nprint(\"Mikigo\")\ndef go(self):\nprint(self.__mi)\n</code></pre> <pre><code>Test().go()\n</code></pre> <pre><code>Mikigo\n</code></pre> <p>\u4f60\u770b\uff0c\u5728\u7c7b\u7684\u5185\u90e8\u8bbf\u95ee\u79c1\u6709\u5c5e\u6027\u662f\u53ef\u4ee5\u6b63\u5e38\u62ff\u5230\u7684\uff0c\u65b9\u6cd5\u4e5f\u662f\u4e00\u6837\u7684\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u8bbf\u95ee\u79c1\u6709\u5c5e\u6027\u8bd5\u8bd5\uff1a</p> <pre><code>Test().__mi\n</code></pre> <pre><code>Traceback (most recent call last):\nFile \"/tmp/pycharm_project_609/123.py\", line 6, in &lt;module&gt;\nprint(Test().__mi)\nAttributeError: 'Test' object has no attribute '__mi'\n</code></pre> <p>\u4ece\u5916\u90e8\u8fdb\u884c\u79c1\u6709\u5c5e\u6027\u8bbf\u95ee\u662f\u4e0d\u884c\u7684\uff0c\u4eba\u5bb6\u662f\u79c1\u6709\u7684\u3002</p> <pre><code>Test().__ki()\n</code></pre> <pre><code>Traceback (most recent call last):\nFile \"/tmp/pycharm_project_609/123.py\", line 9, in &lt;module&gt;\nTest().__ki()\nAttributeError: 'Test' object has no attribute '__ki'\n</code></pre> <p>\u79c1\u6709\u65b9\u6cd5\u4e5f\u65e0\u6cd5\u8bbf\u95ee\uff0c\u6ca1\u95ee\u9898\u54c8\u3002</p> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u6211\u5c31\u662f\u60f3\u8bbf\u95ee\uff0c\u8d8a\u662f\u79c1\u6709\u7684\u6211\u8d8a\u60f3\u770b\uff0c\u600e\u4e48\u624d\u80fd\u770b\u5230\u522b\u4eba\u7684\u9690\u79c1\uff0c\u5feb\u8bf4\uff01</p> <p>\u6cc4\u9732\u5929\u673a\u4e86\u54c8\uff0c\u8fd9\u662f Python \u4e00\u79cd\u5f88\u5947\u5999\u7684\u7ed3\u6784\u5316\u5904\u7406\uff0c\u4e3a\u4ec0\u4e48\u8bf4\u662f\u7ed3\u6784\u5316\u5904\u7406\uff0c\u5b9e\u9645\u4e0a Python \u62ff\u5230\u53cc\u4e0b\u5212\u7ebf\u4e4b\u540e\uff0c\u5bf9\u5176\u8fdb\u884c\u4e86\u53d8\u5f62\uff0c\u5728\u524d\u9762\u52a0\u4e86\u4e00\u4e2a\u4e0b\u5212\u7ebf\u548c\u7c7b\u540d\uff0c\u6211\u4eec\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u8bbf\u95ee\uff1a</p> <pre><code>print(Test()._Test__mi)\nTest()._Test__ki()\n</code></pre> <pre><code>Mikigo\nMikigo\n</code></pre> <p>\u4f60\u770b\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u4e86\uff0c\u4f46\u662f\u65e2\u7136\u4f5c\u8005\u4e0d\u5e0c\u671b\u4f7f\u7528\u8005\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u6211\u4eec\u4e5f\u5c3d\u91cf\u4e0d\u8981\u53bb\u5f3a\u884c\u4f7f\u7528\u5b83\uff0c\u5f3a\u626d\u7684\u74dc\u4e0d\u751c\u3002</p> <p>\u6240\u4ee5\u8bf4\uff0c\u4ece\u8bed\u8a00\u7684\u89d2\u5ea6\u662f\u6ca1\u6709\u7edd\u5bf9\u7684\u5b89\u5168\uff0c\u4efb\u4f55\u8bed\u8a00\u90fd\u662f\u8fd9\u6837\uff0c\u66f4\u591a\u7684\u662f\u4e00\u79cd\u7f16\u7a0b\u4e0a\u7684\u7ea6\u675f\u3002</p> <p>\u901a\u5e38\u5728\u5927\u591a\u6570\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u66f4\u503e\u5411\u4e8e\u4f7f\u7528\u4e00\u4e2a\u4e0b\u5212\u7ebf\u6765\u8868\u793a\u79c1\u6709\u5c5e\u6027\uff0c\u8fd9\u4e0d\u662f\u771f\u6b63\u7684\u79c1\u6709\uff0c\u800c\u662f\u4e00\u79cd\u66f4\u53cb\u597d\u7684\u7f16\u7a0b\u89c4\u8303\uff0c\u793e\u533a\u79f0\u4e4b\u4e3a \u201c\u53d7\u4fdd\u62a4\u7684\u201d\u5c5e\u6027\uff0c\u5b83\u5411\u4f7f\u7528\u7740\u8868\u8fbe\u4e86\u8fd9\u662f\u4e00\u4e2a\u79c1\u6709\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u4f60\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u5b83\uff0c\u8fd9\u5c31\u662f\u793e\u533a\uff0c\u8fd9\u5c31\u662f\u5f00\u6e90\uff0crespect~\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#7","title":"7\u3001\u5bf9\u8c61\u7684\u81ea\u7701\u673a\u5236","text":"<p>\u81ea\u7701(introspection)\uff0c\u5373\u81ea\u6211\u53cd\u7701\uff0c\u800c\u5bf9\u8c61\u7684\u81ea\u7701\u5b9e\u9645\u4e0a\u5c31\u662f\u67e5\u770b\u5bf9\u8c61\u5b9e\u73b0\u4e86\u54ea\u4e9b\u5c5e\u6027\u6216\u65b9\u6cd5\u3002</p> <p>\u7b80\u5355\u8bb2\u5c31\u662f\uff0c\u544a\u8bc9\u522b\u4eba\uff1a\u6211\u662f\u8c01\uff0c\u6211\u80fd\u5e72\u5565\u3002</p> <p>Python \u7684\u5e38\u7528\u7684\u81ea\u7701\u51fd\u6570\u6709\u56db\u4e2a\uff1adir()\u3001type()\u3001 hasattr()\u3001isinstance()</p> <p>\uff081\uff09isinstance() \u548c type() \u524d\u9762\u4e5f\u63d0\u5230\u8fc7\uff0c\u8fd9\u91cc\u4e0d\u8bb2\u4e86\u3002</p> <p>\uff082\uff09dir() \u662f\u6700\u4e3a\u5e38\u7528\u7684\u4e00\u4e2a\u81ea\u7701\u51fd\u6570\uff1a</p> <p>\u5f15\u7528\u524d\u9762\u7684 Test \u7c7b</p> <pre><code>print(dir(Test))\n</code></pre> <pre><code>['_Test__ki', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'go']\n</code></pre> <p>\u9664\u4e86 <code>_Test__ki</code> \u548c <code>go</code> \u65b9\u6cd5\u4ee5\u5916\uff0c\u5176\u4ed6\u7684\u65b9\u6cd5\u90fd\u662f\u9b54\u6cd5\u51fd\u6570\uff0c\u5373\u6700\u5f00\u59cb\u6211\u4eec\u63d0\u5230\u7684\u534f\u8bae\uff0c\u4f60\u770b\u968f\u4fbf\u4e00\u4e2a\u5bf9\u8c61\u5c31\u5b9e\u73b0\u4e86\u8fd9\u4e48\u591a\u534f\u8bae\uff0c\u662f\u4e0d\u662f\u5f88\u795e\u5947\u3002</p> <p>\uff083\uff09hasattr() \u4e3b\u8981\u7528\u4e8e\u5224\u65ad\u5bf9\u8c61\u4e2d\u662f\u5426\u5305\u542b\u67d0\u4e2a\u5c5e\u6027\uff0c\u8fd4\u56de\u5e03\u5c14\u503c\u3002</p> <pre><code>print(hasattr(Test, \"go\"))\nprint(hasattr(Test, \"wo\"))\n</code></pre> <pre><code>True\nFalse\n</code></pre> <p>\u5f88\u7b80\u5355\uff0c\u4e0d\u591a\u8bb2\u54c8\u3002</p> <p>\u5176\u4ed6\u8fd8\u6709\u4e00\u4e9b\u81ea\u7701\u51fd\u6570\u53ef\u4ee5\u4e86\u89e3\u4e00\u4e0b\uff0c\u5076\u5c14\u7528\u5230\u4e5f\u633a\u597d\u7684\uff1a</p> <ul> <li><code>__doc__</code> \u83b7\u53d6\u5230\u6587\u6863\u5b57\u7b26\u4e32\uff1b</li> <li><code>__name__</code> \u83b7\u53d6\u5bf9\u8c61\u7684\u540d\u79f0\uff1b</li> <li><code>__dict__</code> \u5305\u542b\u4e86\u7c7b\u91cc\u53ef\u7528\u7684\u5c5e\u6027\u540d-\u5c5e\u6027\u7684\u5b57\u5178\uff1b</li> <li><code>__bases__</code> \u8fd4\u56de\u7236\u7c7b\u5bf9\u8c61\u7684\u5143\u7ec4\uff1b\u4f46\u4e0d\u5305\u542b\u7ee7\u627f\u6811\u66f4\u4e0a\u5c42\u7684\u5176\u4ed6\u7c7b\u3002</li> </ul>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#8super","title":"8\u3001super","text":"<p>super \u51fd\u6570\u662f\u7528\u4e8e\u8c03\u7528\u7236\u7c7b\u7684\u4e00\u4e2a\u65b9\u6cd5\u3002</p> <pre><code>class A:\ndef mi(self):\nprint(\"=== mi ===\")\nclass B(A):\ndef ki(self):\nsuper().mi()\n</code></pre> <pre><code>B().ki()\n</code></pre> <pre><code>=== mi ===\n</code></pre> <p>super \u7684\u4f7f\u7528\u65b9\u6cd5\u662f\u5f88\u7b80\u5355\u7684\uff0c\u4f46\u662f\u5982\u679c\u6d89\u53ca\u5230\u591a\u7ee7\u627f\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u8981\u5c0f\u5fc3\u5904\u7406\u3002</p> <p>\u51c6\u786e\u7684\u8bb2\u5b83\u4e0d\u662f\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u800c\u662f\u8c03\u7528\u7684 <code>MRO</code> \u987a\u5e8f\u4e0a\u7684\u4e0b\u4e00\u4e2a\u65b9\u6cd5\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#9","title":"9\u3001\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668","text":"<p>\u5728\u8bb2\u5230\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684\u65f6\u5019\uff0c\u7ecf\u5e38\u6709\u540c\u5b66\u4e00\u8138\u61f5\uff0c\u7136\u540e\u6211\u8bf4 <code>with</code> \u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u8131\u53e3\u800c\u51fa <code>with open</code> \u3002</p> <p>\u6ca1\u9519\uff0cwith \u8bed\u53e5\u7528\u5f97\u6700\u591a\u7684\u4e5f\u662f\u8fd9\u4e2a\uff0c\u5b83\u662f Python \u63d0\u4f9b\u7684\u4e00\u79cd\u5904\u7406\u8d44\u6e90\u56de\u6536\u7684\u795e\u5947\u65b9\u6cd5\uff0c\u5982\u679c\u6ca1\u6709 with \u6211\u4eec\u53ef\u80fd\u9700\u8981\u591a\u5199\u5f88\u591a\u4ee3\u7801\u3002</p> <p>\u5927\u5bb6\u90fd\u77e5\u9053\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u4e4b\u540e\u662f\u9700\u8981\u5173\u95ed\u7684\uff0c\u4f46\u662f\u5728\u64cd\u4f5c\u6587\u4ef6\u7684\u8fc7\u7a0b\u4e2d\u5f88\u5bb9\u6613\u62a5\u9519\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u9700\u8981\u8fdb\u884c\u5f02\u5e38\u5904\u7406\uff0c\u8981\u4fdd\u8bc1\u65e0\u8bba\u662f\u5426\u5b58\u5728\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u90fd\u80fd\u6b63\u5e38\u7684\u88ab\u5173\u95ed\uff0c\u6211\u4eec\u51e0\u4e4e\u53ea\u80fd\u4f7f\u7528try\u91cc\u9762\u7684finally\u6765\u5904\u7406\uff1a</p> <pre><code>f = open(\"test.txt\", \"w\")\ntry:\nf.write(some_txt)\nexcept:\npass\nfinally:\nf.close()\n</code></pre> <p>\u5982\u679c\u7528 with \u8bed\u53e5\u5904\u7406\u5c31\u4f1a\u5f88\u7b80\u5355\uff1a</p> <pre><code>with open(\"test.txt\", \"w\") as f:\nf.write(some_txt)\n</code></pre> <p>\u5bf9\u6bd4\u8d77\u6765\uff0c\u54ea\u4e2a\u66f4\u597d\u4e0d\u7528\u591a\u8bf4\uff0c\u81ea\u5df1\u54c1\u3002</p> <p>\u5728\u300a\u6d41\u7545\u7684 Python\u300b\u8fd9\u672c\u4e66\u91cc\u9762\u63d0\u5230\uff1a</p> <p>\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff0c\u5305\u62ecCPython\uff0c\u6700\u597d\u663e\u5f0f\u5173\u95ed\u6587\u4ef6\uff1b\u800c\u5173\u95ed\u6587\u4ef6\u7684\u6700\u53ef\u9760\u65b9\u5f0f\u662f\u4f7f\u7528with\u8bed\u53e5\uff0c\u5b83\u80fd\u4fdd\u8bc1\u6587\u4ef6\u4e00\u5b9a\u4f1a\u88ab\u5173\u95ed\uff0c\u5373\u4f7f\u6253\u5f00\u6587\u4ef6\u65f6\u629b\u51fa\u4e86\u5f02\u5e38\u4e5f\u65e0\u59a8\u3002</p> <p>\u90a3\u6211\u4eec\u5982\u4f55\u5b9e\u73b0\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u5462\uff1f</p> <ul> <li>\u57fa\u4e8e\u7c7b\u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668</li> </ul> <p>\u8981\u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff0c\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__enter__</code> \u548c <code>__exit__</code> \u3002</p> <p>\u770b\u540d\u79f0\u5c31\u77e5\u9053\u4e86\uff0center \u5c31\u662f\u8fdb\u5165\u7684\u65f6\u5019\u8981\u505a\u7684\u4e8b\u60c5\uff0cexit \u5c31\u662f\u9000\u51fa\u7684\u65f6\u5019\u8981\u505a\u7684\u4e8b\u60c5\uff0c\u5f88\u597d\u8bb0\u6709\u6ca1\u6709\u3002</p> <pre><code>class Context:\ndef __init__(self, file_name):\nself.file_name = file_name\nself.f = None\ndef __enter__(self):\nprint(\"\u8fdb\u5165 with\")\nself.f = open(self.file_name, \"r\")\nreturn self.f\ndef __exit__(self, exc_type, exc_val, exc_tb):\nprint(\"\u9000\u51fa with\")\nif self.f:\nself.f.close()\n</code></pre> <p>\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528 with \u8bed\u53e5</p> <pre><code>with Context(\"test.txt\") as f:\nprint(f.read())\n</code></pre> <pre><code>\u8fdb\u5165 with\n\u6211\u662f\u4e00\u4e2a\u6d4b\u8bd5\u6587\u4ef6\n\u9000\u51fa with\n</code></pre> <p>\u5b8c\u7f8e\u54c8\uff0c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684\u7c7b\u5c31\u8f7b\u677e\u641e\u5b9a\u3002</p> <ul> <li>\u57fa\u4e8e contextlib \u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668</li> </ul> <p>\u8fd8\u6709\u79cd\u901a\u8fc7\u6807\u51c6\u5e93\u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684\u65b9\u6cd5\uff1a</p> <pre><code>from contextlib import contextmanager\n@contextmanager\ndef context_test(file_name):\nprint(\"\u8fdb\u5165 with\")\ntry:\nf = open(file_name, \"r\")\nyield f\nfinally:\nprint(\"\u9000\u51fa with\")\nf.close()\n</code></pre> <p>\u6765\u7528 with \u73a9\u800d\u4e00\u4e0b</p> <pre><code>with context_test(\"test.txt\") as f:\nprint(f.read())\n</code></pre> <pre><code>\u8fdb\u5165 with\n\u6211\u662f\u4e00\u4e2a\u6d4b\u8bd5\u6587\u4ef6\n\u9000\u51fa with\n</code></pre> <p>\u5229\u7528\u751f\u6210\u5668\u7684\u539f\u7406\uff0cyield \u4e4b\u524d\u662f\u8fdb\u5165\uff0cyield \u4e4b\u540e\u662f\u9000\u51fa\uff0c\u540c\u6837\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff0c\u7a0d\u5fae\u7406\u89e3\u4e00\u4e0b\u54c8\u3002</p> <p>\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u662f Python \u63d0\u4f9b\u7ed9\u6211\u4eec\u7684\u4e00\u4e2a\u975e\u5e38\u65b9\u4fbf\u4e14\u6709\u8da3\u7684\u529f\u80fd\uff0c\u7ecf\u5e38\u88ab\u7528\u5728\u6253\u5f00\u6587\u4ef6\u3001\u6570\u636e\u5e93\u8fde\u63a5\u3001\u7f51\u7edc\u8fde\u63a5\u3001\u6444\u50cf\u5934\u8fde\u63a5\u7b49\u573a\u666f\u4e0b\u3002\u5982\u679c\u4f60\u7ecf\u5e38\u505a\u4e00\u4e9b\u56fa\u5b9a\u7684\u5f00\u59cb\u548c\u7ed3\u5c3e\u7684\u52a8\u4f5c\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4e00\u4e0b\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#10","title":"10\u3001\u88c5\u9970\u5668","text":"<p>\u88c5\u9970\u5668\u5c31\u662f\u4f7f\u7528 @ \u7b26\u53f7\uff0c\u50cf\u5e3d\u5b50\u4e00\u6837\u6263\u5728\u51fd\u6570\u7684\u5934\u4e0a\uff0c\u662f Python \u4e2d\u7684\u4e00\u79cd\u8bed\u6cd5\u7cd6\u3002</p> <p>\u524d\u9762\u8bb2\u7c7b\u65b9\u6cd5\u548c\u9759\u6001\u65b9\u6cd5\u7684\u65f6\u5019\u63d0\u5230\u8fc7\uff0c\u4f7f\u7528\u65b9\u6cd5\u975e\u5e38\u7b80\u5355\u3002</p> <p>\u539f\u7406\u5b9e\u9645\u4e0a\u5c31\u662f\u5c06\u5b83\u6240\u88c5\u9970\u7684\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u6700\u540e\u8fd4\u56de\u8fd9\u4e2a\u51fd\u6570\u3002</p> <pre><code>@classmethod\ndef mikigo():\nprint(\"My name is mikigo\")\n</code></pre> <p>\u8fd9\u6837\u7684\u5199\u6cd5\u7b49\u540c\u4e8e</p> <pre><code>def mikigo():\nprint(\"My name is mikigo\")\nmikigo = classmethod(mikigo)\n</code></pre> <p>\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u4f7f\u7528\u88c5\u9970\u5668\u53ef\u8bfb\u6027\u5f88\u9ad8\uff0c\u5f88\u4f18\u96c5\u662f\u5427\uff0c\u8bed\u6cd5\u7cd6\u5c31\u662f\u7ed9\u4f60\u70b9\u7cd6\u5403\uff0c\u8ba9\u4f60\u4e0a\u763e\u3002</p> <p>\u5b9a\u4e49\u4e00\u4e2a\u88c5\u9970\u5668</p> <ul> <li>\u4e0d\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668</li> </ul> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>def logger(func):\ndef wrapper(*args, **kw):\nprint('\u6211\u8981\u5f00\u59cb\u641e {} \u51fd\u6570\u4e86'.format(func.__name__))\nfunc(*args, **kw)  # \u51fd\u6570\u6267\u884c\nprint('\u641e\u5b8c\u4e86')\nreturn wrapper\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u88c5\u9970\u51fd\u6570\uff0c\u7528\u9014\u5c31\u662f\u5728\u51fd\u6570\u6267\u884c\u524d\u540e\u5206\u522b\u6253\u5370\u70b9\u65e5\u5fd7\u3002</p> <p>\u67092\u70b9\u9700\u8981\u6ce8\u610f\uff1a</p> <p>\uff081\uff09\u88c5\u673a\u5668\u662f\u4e00\u79cd\u9ad8\u9636\u51fd\u6570\uff0c\u5728\u51fd\u6570\u5185\u5c42\u5b9a\u4e49\u51fd\u6570\uff0c\u5e76\u8fd4\u56de\u5185\u5c42\u51fd\u6570\u5bf9\u8c61\uff0c\u591a\u5c42\u7ea7\u540c\u7406\u3002</p> <p>\uff082\uff09\u6700\u5916\u5c42\u51fd\u6570\u4f20\u5165\u7684\u53c2\u6570\u662f\u88ab\u88c5\u9970\u51fd\u6570\u7684\u51fd\u6570\u5bf9\u8c61\u3002</p> <pre><code>@logger\ndef add(x, y):\nprint('{} + {} = {}'.format(x, y, x+y))\n</code></pre> <p>\u6765\uff0c\u8bd5\u8bd5\u770b</p> <pre><code>add(5, 10)\n</code></pre> <pre><code>\u6211\u8981\u5f00\u59cb\u641e add \u51fd\u6570\u4e86\n5 + 10 = 15\n\u641e\u5b8c\u4e86\n</code></pre> <ul> <li>\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668</li> </ul> <pre><code>from functools import wraps\ndef logger(say_some):\n@wraps\ndef wrapper(func):\ndef deco(*args, **kw):\nprint(\"\u641e\u4e4b\u524d\u6211\u5148\u8bf4\u4e24\u53e5\uff1a{}\".format(say_some))\nprint('\u6211\u8981\u5f00\u59cb\u641e {} \u51fd\u6570\u4e86:'.format(func.__name__))\nfunc(*args, **kw)  # \u51fd\u6570\u6267\u884c\nprint('\u641e\u5b8c\u4e86')\nreturn deco\nreturn wrapper\n</code></pre> <p>\u4f60\u770b\uff0c\u90fd\u662f\u5916\u5c42\u51fd\u6570\u8fd4\u56de\u5185\u5c42\u51fd\u6570\u5bf9\u8c61\uff0c\u53c2\u6570\u653e\u5728\u6700\u5916\u5c42\u3002<code>@wraps</code> \u53ef\u52a0\u53ef\u4e0d\u52a0\uff0c\u5b83\u7684\u7528\u9014\u4e3b\u8981\u662f\u4fdd\u7559\u88ab\u88c5\u9970\u51fd\u6570\u7684\u4e00\u4e9b\u5c5e\u6027\u503c\u3002</p> <pre><code>@logger(\"\u522b\u6574\uff0c\u4e0d\u5f97\u52b2\u513f~\")\ndef add(x, y):\nprint('{} + {} = {}'.format(x, y, x+y))\n</code></pre> <p>\u6267\u884c\u8bd5\u8bd5</p> <pre><code>add(5, 10)\n</code></pre> <pre><code>\u641e\u4e4b\u524d\u6211\u5148\u8bf4\u4e24\u53e5\uff1a\u522b\u6574\uff0c\u4e0d\u5f97\u52b2\u513f~\n\u6211\u8981\u5f00\u59cb\u641e add \u51fd\u6570\u4e86:\n5 + 10 = 15\n\u641e\u5b8c\u4e86\n</code></pre> <p>\u5f88\u5948\u65af\uff0c\u5c31\u8fd9\u70b9\u513f\u4e1c\u897f\u3002</p> <p>\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u73b0\u5728\u54b1\u4eec\u641e\u70b9\u4e0d\u4e00\u6837\u7684\u3002</p> <p>\u57fa\u4e8e\u7c7b\u5b9e\u73b0\u88c5\u9970\u5668</p> <p>\u57fa\u4e8e\u7c7b\u88c5\u9970\u5668\u7684\u5b9e\u73b0\uff0c\u5fc5\u987b\u5b9e\u73b0 <code>__call__</code> \u548c <code>__init__</code> \u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\u3002</p> <ul> <li>\u4e0d\u5e26\u53c2\u6570\u7684\u7c7b\u88c5\u9970\u5668</li> </ul> <pre><code>class logger:\ndef __init__(self, func):\nself.func = func\ndef __call__(self, *args, **kwargs):\nprint('\u6211\u8981\u5f00\u59cb\u641e {} \u51fd\u6570\u4e86'.format(self.func.__name__))\nf = self.func(*args, **kwargs)\nprint('\u641e\u5b8c\u4e86')\nreturn f\n</code></pre> <p>\u4e0d\u5e26\u53c2\u6570\u7684\u7c7b\u88c5\u9970\uff0cfunc \u662f\u901a\u8fc7 init \u51fd\u6570\u91cc\u9762\u6784\u9020\u7684\u3002</p> <p>\u8bd5\u8bd5\u770b</p> <pre><code>@logger\ndef add(x, y):\nprint('{} + {} = {}'.format(x, y, x+y))\n</code></pre> <pre><code>add(5, 10)\n</code></pre> <pre><code>\u6211\u8981\u5f00\u59cb\u641e add \u51fd\u6570\u4e86\n5 + 10 = 15\n\u641e\u5b8c\u4e86\n</code></pre> <p>so easy \u54c8\uff0c\u9e2d\u5b50\u7c7b\u578b\uff0c\u5b9e\u73b0\u4e86\u88c5\u9970\u5668\u534f\u8bae\uff0c\u5c31\u662f\u88c5\u9970\u5668\u5bf9\u8c61\u3002</p> <ul> <li>\u5e26\u53c2\u6570\u7684\u7c7b\u88c5\u9970\u5668</li> </ul> <pre><code>class logger:\ndef __init__(self, say_some):\nself.say_some = say_some\ndef __call__(self, func):\ndef wrapper(*args, **kwargs):\nprint(\"\u641e\u4e4b\u524d\u6211\u5148\u8bf4\u4e24\u53e5\uff1a{}\".format(self.say_some))\nprint('\u6211\u8981\u5f00\u59cb\u641e {} \u51fd\u6570\u4e86'.format(func.__name__))\nfunc(*args, **kwargs)\nprint('\u641e\u5b8c\u4e86')\nreturn wrapper\n</code></pre> <p>\u5e26\u53c2\u6570\u7684\u7c7b\u88c5\u9970\u5668\uff0cfunc \u662f\u5728 call \u51fd\u6570\u91cc\u9762\uff0c\u53c2\u6570\u662f\u901a\u8fc7 init\u51fd\u6570\u4f20\u5165\u7684\uff0c\u8fd9\u91cc\u533a\u522b\u6bd4\u8f83\u5927\u54c8\u3002</p> <pre><code>@logger(\"\u522b\u6574\uff0c\u771f\u7684\u4e0d\u5f97\u52b2\u513f~\")\ndef add(x, y):\nprint('{} + {} = {}'.format(x, y, x+y))\n</code></pre> <pre><code>add(5, 10)\n</code></pre> <pre><code>\u641e\u4e4b\u524d\u6211\u5148\u8bf4\u4e24\u53e5\uff1a\u522b\u6574\uff0c\u771f\u7684\u4e0d\u5f97\u52b2\u513f~\n\u6211\u8981\u5f00\u59cb\u641e add \u51fd\u6570\u4e86\n5 + 10 = 15\n\u641e\u5b8c\u4e86\n</code></pre> <p>\u8fd9\u7c7b\u5c5e\u4e8e\u88c5\u9970\u5668\u7684\u9ad8\u9636\u7528\u6cd5\u4e86\uff0c\u5728\u4e00\u4e9b\u4f18\u79c0\u7684\u6846\u67b6\u6e90\u7801\u91cc\u9762\u6bd4\u8f83\u5e38\u89c1\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_3","title":"\u4e09\u3001\u81ea\u5b9a\u4e49\u5e8f\u5217","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1_1","title":"1\u3001\u53ef\u5207\u7247\u5bf9\u8c61","text":"<p>\u5207\u7247\u5927\u5bb6\u90fd\u5f88\u719f\u6089\uff0c\u5728 Python \u57fa\u7840\u91cc\u9762\u662f\u5fc5\u5b66\u7684\uff0c\u5bf9\u5217\u8868\u4f7f\u7528\u4e2d\u62ec\u53f7\u53d6\u503c\uff0c\u6b63\u5207\u3001\u53cd\u5207\u3001\u52a0\u6b65\u957f\u7b49\u90fd\u6ca1\u95ee\u9898\uff0c\u8fd9\u91cc\u6211\u4eec\u4e3b\u8981\u8bb2\u600e\u4e48\u5b9e\u73b0\u4e00\u4e2a\u53ef\u5207\u7247\u5bf9\u8c61\u3002</p> <p>\u9686\u91cd\u8bf7\u51fa\u9b54\u6cd5\u51fd\u6570\uff1a<code>__getitem__</code> \uff0c\u5b83\u662f\u6211\u4eec\u5b9e\u73b0\u53ef\u5207\u7247\u5bf9\u8c61\u7684\u5173\u952e\u3002</p> <pre><code>class AutoTest:\ndef __init__(self, name_list):\nself.name_list = name_list\ndef __getitem__(self, item):\nreturn self.name_list[item]\nAT = AutoTest([\"mikigo\", \"lt\", \"jjb\", \"hhz\"])\n</code></pre> <p>\u54b1\u4eec\u5bf9\u5b9e\u4f8b\u5bf9\u8c61\u5207\u7247\u8bd5\u8bd5</p> <pre><code>print(AT[1])\nprint(AT[2])\n</code></pre> <pre><code>lt\njjb\n</code></pre> <p>\u7b80\u76f4\u6ca1\u96be\u5ea6\u54c8\uff0c\u5bf9\u8c61\u53ef\u4ee5\u5207\u7247\u4e86\u3002</p> <p>\u8fd9\u91cc\u518d\u8865\u5145\u4e00\u70b9\u6ca1\u6709\u7528\u7684\u5c0f\u77e5\u8bc6\uff0c\u5b9e\u73b0\u4e86 <code>__getitem__</code> \u65b9\u6cd5\u5b9e\u9645\u4e0a\u4e5f\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u4e86\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ef\u4ee5\u4f7f\u7528 for \u5faa\u73af\u3002</p> <pre><code>for i in AT:\nprint(i)\n</code></pre> <pre><code>mikigo\nlt\njjb\nhhz\n</code></pre> <p>\u8fd9\u5176\u5b9e\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u4e00\u79cd\u9000\u800c\u6c42\u5176\u6b21\u7684\u5904\u7406\uff0c\u5b83\u627e\u4e0d\u5230\u8fed\u4ee3\u534f\u8bae\uff0c\u4f46\u662f\u627e\u5230\u4e86 <code>__getitem__</code> \uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u8fed\u4ee3\uff0c\u8fd9\u70b9\u76f8\u4fe1 99% \u7684\u540c\u5b66\u90fd\u4e0d\u77e5\u9053\uff0c\u6ca1\u5173\u7cfb\u54c8\uff0c\u5173\u4e8e\u53ef\u8fed\u4ee3\u5bf9\u8c61\u548c\u8fed\u4ee3\u5668\u54b1\u4eec\u540e\u9762\u4f1a\u4e13\u95e8\u8bb2\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2_1","title":"2\u3001\u5217\u8868\u63a8\u5bfc\u5f0f","text":"<p>\u5217\u8868\u63a8\u5bfc\u662f Python \u63d0\u4f9b\u7684\u4e00\u79cd\u72ec\u6709\u7279\u6027\uff0c\u53ef\u4ee5\u7528\u4e00\u884c\u4ee3\u7801\u751f\u6210\u4e00\u4e2a\u5217\u8868\u3002</p> <p>\u666e\u901a\u64cd\u4f5c\uff1a</p> <pre><code>my_list = []\nfor i in range(10):\n    my_list.append(i)\n</code></pre> <p>\u8fd9\u6837\u751f\u6210\u4e00\u4e2a\u5217\u8868\uff0c\u81f3\u5c11\u9700\u89813\u884c\uff0c\u6765\u770b\u770b\u5217\u8868\u63a8\u5bfc\u5f0f\uff1a</p> <pre><code>my_list = [i for i in rang(10)]\n</code></pre> <p>\u4e00\u884c\u5c31\u641e\u5b9a\uff0c\u591a\u4e48\u7684\u7b80\u6d01\u4f18\u96c5\uff0c\u800c\u4e14\u53ef\u8bfb\u6027\u548c\u6027\u80fd\u90fd\u975e\u5e38\u9ad8\uff0c\u7231\u4e86\u3002</p> <p>\u8fd8\u53ef\u4ee5\u52a0\u4e00\u4e9b\u903b\u8f91\u5224\u65ad\u548c\u6570\u636e\u5904\u7406\uff0c\u4ee5\u4e0b\u662f\u9879\u76ee\u5b9e\u4f8b\uff1a</p> <pre><code>app_id_list = [int(_id) for _id in app_id if _id]  # to int\n</code></pre> <p>\u8fd9\u91cc\u8981\u63d0\u9192\u4e00\u4e0b\uff0c\u4e0d\u8981\u4e3a\u4e86\u63a8\u5bfc\u800c\u63a8\u5bfc\uff0c\u5982\u679c\u4f60\u7684\u903b\u8f91\u5f88\u590d\u6742\uff0c\u52a0\u4e86\u591a\u91cd\u5224\u65ad\u548c\u5904\u7406\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\u63a8\u5bfc\u5f0f\uff0c\u8001\u8001\u5b9e\u5b9e\u5206\u5f00\u5199\uff0c\u56e0\u4e3a\u8fd9\u6837\u5199\u51fa\u6765\u7684\u8868\u8fbe\u5f0f\u4f1a\u5f88\u590d\u6742\uff0c\u5c31\u5931\u53bb\u4e86\u6211\u4eec\u7f16\u7801\u6700\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u5c31\u662f\u53ef\u8bfb\u6027\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3_1","title":"3\u3001\u751f\u6210\u5668\u8868\u8fbe\u5f0f","text":"<p>\u524d\u9762\u8bb2\u4e86\u5217\u8868\u63a8\u5bfc\u5f0f\uff0c\u662f\u7528\u4e2d\u62ec\u53f7\u91cc\u9762\u5199\u8868\u8fbe\u5f0f\uff0c\u90a3\u628a\u4e2d\u62ec\u53f7\u6362\u6210\u5c0f\u62ec\u53f7\u662f\u4ec0\u4e48\u5462\uff1f\u597d\u591a\u540c\u5b66\u806a\u660e\u7684\u5c0f\u8111\u888b\u80af\u5b9a\u60f3\u5230\u4e86\uff0c\u5143\u7ec4\u63a8\u5bfc\u5f0f ... \u3002</p> <p>\u6ce8\u610f\u5143\u7ec4\u662f\u4e0d\u53ef\u53d8\u5e8f\u5217\uff0c\u6ca1\u6cd5\u63a8\u5bfc\u7684\uff0c\u5c0f\u62ec\u53f7\u7684\u8868\u8fbe\u5f0f\u5b9e\u9645\u4e0a\u662f\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u3002</p> <pre><code>my_gen = (i for i in range(10))\n</code></pre> <p>\u9a8c\u8bc1\u4e00\u4e0b\uff1a</p> <pre><code>from collections.abc import Generator\nprint(isinstance(my_gen, Generator))\nprint(my_gen)\n</code></pre> <pre><code>True\n&lt;generator object &lt;genexpr&gt; at 0x7f5676c57390&gt;\n</code></pre> <p>\u4f60\u770b\uff0c\u786e\u5b9e\u662f\u4e00\u4e2a\u751f\u6210\u5668\u5427\u3002\u751f\u6210\u5668\u7ec6\u8282\uff0c\u54b1\u4eec\u4e5f\u653e\u5230\u540e\u9762\u8bb2\u54c8\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#4_1","title":"4\u3001\u5b57\u5178\u63a8\u5bfc\u5f0f","text":"<p>\u7406\u89e3\u4e86\u5217\u8868\u63a8\u5bfc\u5f0f\uff0c\u518d\u6765\u770b\u5b57\u5178\u63a8\u5bfc\u5f0f\u5c31\u5f88\u7b80\u5355\u4e86\u3002</p> <pre><code>my_dict = {i: None for i in range(10)}\n</code></pre> <p>\u7b2c\u4e00\u4e2a\u5143\u7d20\u5c31\u662f\u5b57\u5178\u7684 key \u548c value\uff0c\u6ce8\u610f\u5b57\u5178\u7684key \u662f\u552f\u4e00\u7684\uff08\u53ef\u54c8\u5e0c\uff09\uff0c\u503c\u65e0\u6240\u8c13\u3002</p> <p>\u6253\u5370\u770b\u4e0b</p> <pre><code>print(my_dict)\n</code></pre> <pre><code>{0: None, 1: None, 2: None, 3: None, 4: None, 5: None, 6: None, 7: None, 8: None, 9: None}\n</code></pre> <p>\u5c31\u8fd9\uff0c\u7b80\u76f4\u6ca1\u96be\u5ea6\uff0c\u8fd8\u662f\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u4ee3\u7801\u53ef\u8bfb\u6027\u54c8\uff0c\u522b\u6574\u590d\u6742\u4e86\u3002</p> <pre><code>tag_dict = {f\"{int(i[0]):0&gt;3}\": i[1:] for i in ReadCsv.read_csv_by_str(csv_dict.get(app), from_data=False)}\n</code></pre> <p>\u8fd9\u662f\u81ea\u52a8\u5316\u6d4b\u8bd5\u9879\u76ee\u4e2d\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u611f\u53d7\u4e0b\uff0c\u5982\u679c\u518d\u590d\u6742\u70b9\u5c31\u5efa\u8bae\u62c6\u5f00\u5199\u4e86\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_4","title":"\u56db\u3001\u5bf9\u8c61\u5f15\u7528","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1_2","title":"1\u3001\u53d8\u91cf\u5230\u5e95\u662f\u4ec0\u4e48","text":"<p>\u5728 Python \u4e2d\u53d8\u91cf\u5230\u5e95\u662f\u4ec0\u4e48\uff0c\u6709\u4e00\u4e2a\u6bd4\u55bb\u6211\u89c9\u5f97\u975e\u5e38\u597d\uff0c\u53d8\u91cf\u5c31\u50cf\u4fbf\u5229\u8d34\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u8bb2\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u6570\u636e\uff0c\u6bd4\u5982\u5b9a\u4e49\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216\u8005\u6574\u6570\uff0c\u5728\u5185\u5b58\u4e2d\u90fd\u4f1a\u5206\u914d\u4e00\u4e2a\u7a7a\u95f4\u6765\u4fdd\u5b58\uff0c\u8fd9\u4e2a\u5185\u5b58\u7a7a\u95f4\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5c0f\u76d2\u5b50\uff0c\u6211\u4eec\u4f7f\u7528\u7b49\u53f7\u5c06\u8fd9\u4e2a\u6570\u636e\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u5b9e\u9645\u4e0a\u5c31\u50cf\u7528\u4fbf\u5229\u8d34\u8d34\u5230\u8fd9\u4e2a\u5c0f\u76d2\u5b50\u4e0a\uff0c\u4fbf\u5229\u8d34\u4e0a\u8fd8\u5199\u4e86\u540d\u79f0\uff0c\u5c31\u662f\u53d8\u91cf\u540d\u3002\u6240\u4ee5\u8bf4\uff0c\u53d8\u91cf\u548c\u6570\u636e\u7684\u5173\u7cfb\u53ea\u662f\u4e00\u4e2a\u6307\u5411\u7684\u5173\u7cfb\u3002</p> <p>\u4e00\u4e2a\u6570\u636e\u53ef\u4ee5\u8d4b\u503c\u7ed9\u591a\u4e2a\u53d8\u91cf\uff0c\u76f8\u5f53\u4e8e\u8fd9\u4e2a\u5c0f\u76d2\u5b50\u4e0a\u9762\u8d34\u4e86\u591a\u4e2a\u4fbf\u5229\u8d34\uff1b\u4e00\u4e2a\u53d8\u91cf\u4e5f\u53ef\u4ee5\u88ab\u91cd\u65b0\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e\u628a\u8fd9\u4e2a\u76d2\u5b50\u4e0a\u7684\u4fbf\u5229\u8d34\u6495\u4e86\uff0c\u8d34\u5230\u53e6\u4e00\u4e2a\u76d2\u5b50\u4e0a\u3002</p> <p>\u53d8\u91cf\u548c\u6570\u636e\u7684\u5173\u7cfb\uff0c\u5c31\u662f\u76d2\u5b50\u548c\u4fbf\u5229\u8d34\u7684\u5173\u7cfb\uff0c\u7406\u89e3\u8d77\u6765\u5f88\u5bb9\u6613\u3002</p> <p>\u51fd\u6570\u540d\u4e5f\u662f\u53d8\u91cf\uff0c\u662f\u53ef\u4ee5\u4f20\u53c2\u7684\u53d8\u91cf\uff0c\u4e5f\u540c\u6837\u662f\u4fbf\u5229\u8d34\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2-is","title":"2\u3001== \u548c is \u662f\u4e00\u6837\u7684\u5417","text":"<p>\u8fd9\u4e24\u4e2a\u5728\u7f16\u7a0b\u4e2d\u7ecf\u5e38\u7528\u5230\uff0c\u597d\u591a\u540c\u5b66\u7ecf\u5e38\u641e\u4e0d\u6e05\u695a\u5e94\u8be5\u7528\u54ea\u4e2a\u3002</p> <ul> <li>== \u662f\u6bd4\u8f83\u4e24\u8fb9\u7684\u201c\u503c\u201d\u662f\u5426\u76f8\u7b49;</li> <li>is \u662f\u5224\u65ad\u662f\u5426\u4e3a\u540c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5373 id \u662f\u5426\u4e00\u6837\u3002</li> </ul> <pre><code>a = 1000\nb = 1000\nprint(a == b)\nprint(a is b)\nprint(id(a), id(b))\n</code></pre> <pre><code>True\nTrue\n140689217239312 140689217239312\n</code></pre> <p>\u8fd9\u91cc\u6709\u4e2a\u5f88\u795e\u5947\u7684\u5730\u65b9\uff0c\u5206\u522b\u5b9a\u4e49\u4e86\u4e24\u4e2a\u53d8\u91cfa, b\uff0c\u4ed6\u4eec\u7684\u503c\u76f8\u7b49\uff0c\u4f46\u662f\u8fd9\u6837\u5b9a\u4e49\u5e94\u8be5\u662f\u5206\u914d\u4e862\u4e2a\u5185\u5b58\u7a7a\u95f4\uff0c\u66f4\u6709\u610f\u601d\u7684\u662f\uff0c\u5982\u679c\u4f60\u901a\u8fc7\u547d\u4ee4\u884c\u6267\u884c\u4ee5\u4e0a\u4ee3\u7801\uff0c\u7ed3\u679c\u4f1a\u4e0d\u4e00\u6837\uff1a</p> <p>\u6709\u8fd9\u4e2a\u7b26\u53f7\u7684 <code>&gt;&gt;&gt;</code> \u8868\u793a\u662f\u5728\u547d\u4ee4\u884c\u6267\u884c\u3002</p> <pre><code>&gt;&gt;&gt; a = 1000\n&gt;&gt;&gt; b = 1000\n&gt;&gt;&gt; print(a == b)\nTrue\n&gt;&gt;&gt; print(a is b)\nFalse\n&gt;&gt;&gt; print(id(a), id(b))\n140601647494256 140601647494448\n</code></pre> <p>\u4e0a\u9762\u662f\u4f7f\u7528 <code>Pycharm</code> \u6267\u884c\u7684\uff0c\u5b9e\u9645\u4e0aPython\u89e3\u91ca\u5668\u5df2\u7ecf\u5bf9\u7ecf\u5e38\u4f7f\u7528\u5230\u7684\u5c0f\u6574\u6570\u505a\u4e86\u7279\u6b8a\u5904\u7406\uff0c\u89e3\u91ca\u5668\u4f1a\u63d0\u524d\u5c06 256 \u4ee5\u5185\u7684\u6574\u6570\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4\uff0c\u4e0d\u4f1a\u56de\u6536\uff0c\u4ee5\u63d0\u5347\u6267\u884c\u6548\u7387\uff0c\u6240\u4ee5\u5728\u8fd9\u4e2a\u8303\u56f4\u5185\u7684\u6574\u6570 id \u6c38\u8fdc\u662f\u4e00\u6837\u7684\u3002</p> <pre><code>&gt;&gt;&gt; a = 256\n&gt;&gt;&gt; b = 256\n&gt;&gt;&gt; print(id(a), id(b))\n9095360 9095360\n</code></pre> <pre><code>&gt;&gt;&gt; a = 257\n&gt;&gt;&gt; b = 257\n&gt;&gt;&gt; print(id(a), id(b))\n140601647494512 140601647494384\n</code></pre> <p><code>Pycharm</code> \u5728\u89e3\u91ca\u5668\u7684\u57fa\u7840\u4e4b\u4e0a\u505a\u4e86\u8fdb\u4e00\u6b65\u7684\u4f18\u5316\u3002</p> <pre><code>a = 1000000\nb = 1000000\nprint(id(a), id(b))\n140061167311120 140061167311120\n</code></pre> <p>\u4f60\u770b\uff0c\u8fd9\u4e48\u5927\u7684\u6570\u5b57 id \u4e5f\u662f\u76f8\u540c\u7684\uff0c<code>Pycharm</code> \u5c31\u662f\u8fd9\u4e48\u9177\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3del","title":"3\u3001del\u8bed\u53e5\u548c\u5783\u573e\u56de\u6536","text":"<p>\u5728 Python \u4e2d\u7684\u5783\u573e\u56de\u6536\u673a\u5236\u662f\uff1a\u5f15\u7528\u8ba1\u6570\uff08Reference Counting\uff09\u3002</p> <p>\u7b80\u5355\u8bb2\u5c31\u662f\u6bcf\u4e2a\u5bf9\u8c61\u5185\u90e8\u6709\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u5668\uff0c\u5bf9\u8c61\u88ab\u521b\u5efa\u6216\u8005\u88ab\u5f15\u7528\u5c31\u4f1a +1\uff0c\u5bf9\u8c61\u88ab\u9500\u6bc1\u6216\u8005\u88ab\u8d4b\u4e88\u65b0\u7684\u5bf9\u8c61\u5c31\u4f1a -1</p> <p>del \u8bed\u53e5\u662f\u4f5c\u7528\u5728\u53d8\u91cf\u4e0a\uff0c\u4e0d\u662f\u6570\u636e\u5bf9\u8c61\u4e0a\u3002</p> <pre><code>a = 1\nb = a\ndel a\n</code></pre> <p>\u6253\u5370 b \u770b\u4e0b</p> <pre><code>print(b)\n</code></pre> <pre><code>1\n</code></pre> <p>\u518d\u6253\u5370 a \u770b\u4e0b</p> <pre><code>print(a)\n</code></pre> <pre><code>NameError: name 'a' is not defined\n</code></pre> <p>\u5f88\u660e\u663e\uff0ca \u88ab\u5220\u6389\u4e86\u3002</p> <p>\u4e4b\u524d\u770b\u5230\u56fd\u5916\u7684\u4e00\u4e2a\u5927\u4f6c\u8bb2 open \u7684\u8fd9\u79cd\u5199\u6cd5\u4e0d\u7528\u5173\u95ed\uff1a</p> <pre><code>open(\"test.txt\", \"r\").read()\n</code></pre> <p>\u5f88\u6709\u610f\u601d\u662f\u5427\uff0c\u8fd9\u70b9\u6ca1\u6709\u7528\u7684\u5c0f\u77e5\u8bc6\uff0c\u76f8\u4fe1\u4f60\u5728\u7f51\u4e0a\u5e94\u8be5\u67e5\u4e0d\u5230\u3002\u5f53\u65f6\u89c9\u5f97\u4e0d\u592a\u7406\u89e3\uff0c\u540e\u9762\u7406\u89e3\u5783\u573e\u56de\u6536\u4e4b\u540e\u624d\u660e\u767d\uff0c\u4f7f\u7528 open \u6253\u5f00\u7684\u6587\u4ef6\u5bf9\u8c61\u521b\u5efa\u4e4b\u540e\uff0c\u6ca1\u6709\u88ab\u5176\u4ed6\u5f15\u7528\uff0c\u6240\u4ee5\u4f1a\u88ab\u5185\u5b58\u56de\u6536\u7684\uff0c\u56e0\u800c\u4e0d\u7528\u5173\u95ed\u4e5f\u4e0d\u5f71\u54cd\u3002</p> <p>\u90aa\u95e8\u6b6a\u9053\u54c8\uff0c\u7528 open \u8fd8\u662f\u8001\u8001\u5b9e\u5b9e\u7528 with \u5427\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_5","title":"\u4e94\u3001\u5143\u7c7b\u7f16\u7a0b","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1_3","title":"1\u3001\u52a8\u6001\u5c5e\u6027\u548c\u5c5e\u6027\u63cf\u8ff0\u7b26","text":"<p>\u6709\u4e9b\u540c\u5b66\u53ef\u80fd\u77e5\u9053 <code>@property</code> \uff0c\u5b83\u7684\u4e3b\u8981\u7528\u4e8e\u5c06\u4e00\u4e2a\u65b9\u6cd5\u53d8\u6210\u5c5e\u6027\uff0c\u8bbf\u95ee\u7684\u65f6\u5019\u76f4\u63a5\u901a\u8fc7\u540d\u79f0\u8bbf\u95ee\uff0c\u4e0d\u9700\u8981\u52a0\u62ec\u53f7\u3002\u6ce8\u610f\u52a0\u4e86 <code>@property</code> \u51fd\u6570\u4e0d\u80fd\u6709\u53c2\u6570\uff0c\u4f60\u60f3\u561b\uff0c\u4eba\u5bb6\u8c03\u7528\u7684\u65f6\u5019\u90fd\u4e0d\u7528\u62ec\u53f7\uff0c\u600e\u4e48\u4f20\u53c2\uff0c\u5bf9\u5427\u3002</p> <p>\u4e3e\u4e2a\u5c0f\u4f8b\u5b50\uff1a</p> <pre><code>class Mikigo:\n@property\ndef age(self):\nreturn \"\u6211\u6655\uff0c\u4eca\u5e7430\u4e86\"\nprint(Mikigo().age)\n</code></pre> <pre><code>\u6211\u6655\uff0c\u4eca\u5e7430\u4e86\n</code></pre> <p>\u4f60\u770b\uff0c\u8c03\u7528 age \u65b9\u6cd5\u6ca1\u52a0\u62ec\u53f7\u5427\uff0c\u90a3\u6211\u8981\u4fee\u6539 age \u7684\u503c\u600e\u4e48\u505a\u5462\uff1f</p> <pre><code>class Mikigo:\ndef __init__(self):\nself._age = 30\n@property\ndef age(self):\nreturn self._age\n@age.setter\ndef age(self, value):\nif not isinstance(value, int):\nraise ValueError\nself._age = value\nmi = Mikigo()\nmi.age = 25\nprint(mi.age)\n</code></pre> <pre><code>25\n</code></pre> <p>\u6ce8\u610f\u4e0a\u4f8b\u4e2d\u88c5\u9970\u5668\u7684\u5199\u6cd5\uff0csetter \u662f\u56fa\u5b9a\u5199\u6cd5\uff0csetter \u524d\u9762\u662f\u4f60\u5b9a\u4e49\u7684\u51fd\u6570\u540d\u3002</p> <p>\u6ca1\u4ec0\u4e48\u95ee\u9898\u54c8\uff0c\u505a\u4e86\u53c2\u6570\u7684\u7c7b\u578b\u68c0\u67e5\uff0c\u6574\u4f53\u770b\u8d77\u6765\u4e0d\u7b97\u590d\u6742\uff0c\u5176\u5b9e\u4e86\u89e3\u5230\u8fd9\u91cc\u5df2\u7ecf\u5dee\u4e0d\u591a\u4e86\u3002\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u8fd8\u6709\u5176\u4ed6\u5c5e\u6027\u8981\u5904\u7406\uff0c\u5c31\u5f97\u5199\u597d\u591a\u4e2a\u8fd9\u6837\u7684\uff0c\u633a\u8d39\u52b2\u4e0d\u8bf4\uff0c\u5173\u952e\u662f\u4e0d\u591f\u4f18\u96c5\u3002</p> <p>\u8fd9\u65f6\u5019\u5c31\u9700\u8981\u8bf7\u51fa\u5c5e\u6027\u63cf\u8ff0\u7b26\u3002</p> <p>\u8fd9\u91cc\u53c8\u8981\u4ecb\u7ecd\u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__get__</code>\uff0c <code>__set__</code>\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8bb2\u89e3\u5176\u7528\u6cd5\uff1a</p> <pre><code>class UserAttr:\ndef __init__(self, user_age):\nself._age = user_age\ndef __get__(self, instance, owner):\nprint(\"get_instance:\", instance)\nprint(\"get_owner:\", owner)\nreturn self._age\ndef __set__(self, instance, value):\nprint(\"set_instance:\", instance)\nprint(\"gse_value:\", value)\nif not isinstance(value, int):\nraise ValueError\nself._age = value\n</code></pre> <p>\u771f\u6b63\u4f7f\u7528\u7684\u7c7b\uff1a</p> <pre><code>class Mikigo:\nage = UserAttr(30)\nmi = Mikigo()\nprint(mi.age)\n</code></pre> <pre><code>get_instance: &lt;__main__.Mikigo object at 0x7fb4eff50e10&gt;\nget_owner: &lt;class '__main__.Mikigo'&gt;\n30\n</code></pre> <p>\u5728\u5bf9\u8c61\u8bbf\u95ee age \u7684\u65f6\u5019\uff0c\u9996\u5148\u662f\u8fdb\u5165\u4e86 <code>__get__</code> \u65b9\u6cd5\uff0c\u56e0\u4e3a\u5148\u6253\u5370\u4e86 get_instance \u548c get_owner\uff0cinstance \u662f Mikigo \u5b9e\u4f8b\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f mi\uff0cowner \u662f Mikigo \u7c7b\u5bf9\u8c61\u3002</p> <p>\u56e0\u6b64\uff0c\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u77e5\u9053\u4e86\u7b2c\u4e00\u4e2a\u5c0f\u77e5\u8bc6\uff0c\u5728\u8bbf\u95ee\u503c\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u662f <code>__get__</code> \u3002</p> <p>\u518d\u8d4b\u503c\u770b\u770b\uff1a</p> <pre><code>mi.age = 25\nprint(mi.age)\n</code></pre> <pre><code>set_instance: &lt;__main__.Mikigo object at 0x7fc7be222470&gt;\nset_value: 25\nget_instance: &lt;__main__.Mikigo object at 0x7fc7be222470&gt;\nget_owner: &lt;class '__main__.Mikigo'&gt;\n25\n</code></pre> <p>\u7b2c\u4e8c\u4e2a\u5c0f\u77e5\u8bc6\uff0c\u8d4b\u503c\u662f\u8c03\u7528\u7684 <code>__set__</code> \u65b9\u6cd5\uff0c\u4e00\u822c\u4e3a\u4e86\u4f7f\u5c5e\u6027\u63cf\u8ff0\u7b26\u6210\u4e3a\u53ea\u8bfb\u7684\uff0c\u5e94\u8be5\u540c\u65f6\u5b9a\u4e49 <code>__get__()</code> \u548c <code>__set__()</code> \uff0c\u5e76\u5728 <code>__set__()</code> \u4e2d\u5f15\u53d1 <code>AttributeError</code> \u3002</p> <p>\u8fd8\u6709\u4e00\u4e2a\u9b54\u6cd5\u51fd\u6570 <code>__delete__</code> \u4e5f\u662f\u5c5e\u6027\u63cf\u8ff0\u7b26\uff0c\u4f7f\u7528 del \u4f1a\u8c03\u7528\uff0c\u7531\u4e8e\u4e0d\u548b\u4f7f\u7528\uff0c\u4e0d\u8bb2\u4e86\uff0c\u8fd8\u6709\u7f51\u4e0a\u597d\u591a\u533a\u5206\u6570\u636e\u63cf\u8ff0\u7b26\u548c\u975e\u6570\u636e\u63cf\u8ff0\u7b26\u7684\uff0c\u6211\u611f\u89c9\u4e0d\u7528\u7ba1\u4e5f\u6ca1\u5fc5\u8981\uff0c\u54b1\u4eec\u662f\u901a\u4fd7\u6613\u61c2\u7248\uff0c\u4e0d\u6574\u90a3\u4e9b\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2_2","title":"2\u3001\u5c5e\u6027\u62e6\u622a\u5668","text":"<p>\u5c5e\u6027\u62e6\u622a\u5668\u5c31\u662f\u5728\u8bbf\u95ee\u5bf9\u8c61\u7684\u5c5e\u6027\u65f6\u8981\u505a\u7684\u4e00\u4e9b\u4e8b\u60c5\uff0c\u4f60\u60f3\u561b\uff0c\u62e6\u622a\u5c31\u662f\u62e6\u8def\u62a2\u52ab\uff0c\u62e6\u622a\u4e0b\u6765\u80af\u5b9a\u8981\u641e\u70b9\u4e8b\u60c5\u624d\u653e\u4f60\u8d70\u3002</p> <p>\u4e3b\u8981\u4ecb\u7ecd 2 \u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__getattr__</code> \u548c <code>__getattribute__</code></p> <p>\u8fd9\u4e24\u4e2a\u51fd\u6570\u7279\u522b\u795e\u5947\uff0c\u4e24\u4e2a\u51fd\u6570\u529f\u80fd\u76f8\u53cd\uff0c\u4e00\u4e2a\u662f\u627e\u5230\u5c5e\u6027\u8981\u505a\u7684\u4e8b\uff0c\u53e6\u4e00\u4e2a\u662f\u6ca1\u627e\u5230\u5c5e\u6027\u8981\u505a\u7684\u4e8b\u3002</p> <pre><code>class Mikigo:\ndef __init__(self):\nself.age = 30\ndef __getattribute__(self, item):\nprint(f\"\u627e\u5230{item}\uff0c\u6211\u5148\u641e\u70b9\u4e8b\u60c5\")\ndef __getattr__(self, item):\nprint(f\"\u6ca1\u627e\u5230{item}\uff0c\u6211\u60f3\u60f3\u80fd\u641e\u70b9\u5565\u4e8b\u60c5\")\n</code></pre> <p>\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5c5e\u6027 age \uff0c\u5148\u6765\u8bd5\u8bd5\u8bbf\u95ee\u5b83</p> <pre><code>mi = Mikigo()\nprint(mi.age)\n</code></pre> <pre><code>\u627e\u5230age\uff0c\u6211\u5148\u641e\u70b9\u4e8b\u60c5\n30\n</code></pre> <p>\u627e\u5230\u5c5e\u6027\uff0c\u4f1a\u5148\u8c03\u7528 <code>__getattribute__</code> \uff0c\u5e76\u6ca1\u6709\u8c03\u7528 <code>__getattr__</code>\u3002</p> <p>\u597d\uff0c\u73b0\u5728\u8bbf\u95ee\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff1a</p> <pre><code>mi.name\n</code></pre> <pre><code>\u627e\u5230name\uff0c\u6211\u5148\u641e\u70b9\u4e8b\u60c5\n\u6ca1\u627e\u5230name\uff0c\u6211\u60f3\u60f3\u80fd\u641e\u70b9\u5565\u4e8b\u60c5\n</code></pre> <p>\u8fd9\u91cc\u5c31\u9700\u8981\u6ce8\u610f\u4e86\uff0c\u8bbf\u95ee\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff0c\u9996\u5148\u8fd8\u662f\u4f1a\u8fdb\u5165 <code>__getattribute__</code> \uff0c\u8bf4\u660e\u5b83\u662f\u65e0\u6761\u4ef6\u8fdb\u5165\u7684\uff0c\u7136\u540e\u624d\u662f\u8c03\u7528 <code>__getattr__</code>\u3002</p> <p>\u518d\u6269\u5c55\u4e00\u4e2a <code>__setattr__</code> \u7528\u4e8e\u4fee\u6539\u5c5e\u6027\u503c\u7684\uff1a</p> <pre><code>class Mikigo:\ndef __init__(self):\nself.age = 30\ndef __setattr__(self, key, value):\nprint(f\"\u4fee\u6539{key}\u7684\u503c\u4e3a{value}\")\nself.__dict__[key] = value\nmi = Mikigo()\nmi.age = 25\nprint(mi.age)\n</code></pre> <pre><code>\u4fee\u6539age\u7684\u503c\u4e3a30\n\u4fee\u6539age\u7684\u503c\u4e3a25\n25\n</code></pre> <p>\u4f60\u770b\uff0cage \u7684\u503c\u88ab\u4fee\u6539\u4e86\uff0c\u4f46\u662f <code>__setattr__</code> \u8c8c\u4f3c\u88ab\u8c03\u7528\u4e86 2 \u6b21\uff0c\u90a3\u662f\u56e0\u4e3a\u5728\u7c7b\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\u5c31\u4f1a\u8fdb\u5165\u4e00\u6b21\uff0c\u7b2c\u4e00\u6b21\u662f\u5c06 <code>__init__</code> \u91cc\u9762\u7684\u503c\u6dfb\u52a0\u5230\u7c7b\u5b9e\u4f8b\u7684 <code>__dict__</code> \u5c5e\u6027\u4e2d\uff0c\u7b2c\u4e8c\u6b21\u4fee\u6539\u518d\u6b21\u8fdb\u5165\uff0c\u5c06 <code>__dict__</code> \u5c5e\u6027\u4e2d\u7684\u503c\u4fee\u6539\u6389\u3002</p> <p>\u5c5e\u6027\u62e6\u622a\u4e00\u5b9a\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u56e0\u4e3a\u5982\u679c\u5904\u7406\u4e0d\u597d\uff0c\u4f1a\u9020\u6210\u7c7b\u91cc\u9762\u5c5e\u6027\u5173\u7cfb\u7684\u6df7\u4e71\uff0c\u629b\u5f02\u5e38\u5f80\u5f80\u4e0d\u5bb9\u6613\u5b9a\u4f4d\u3002</p> <p>\u9879\u76ee\u5b9e\u4f8b\uff0cconfig \u6587\u4ef6\u91cc\u9762\u7528\u5230\uff1a</p> <pre><code>class Config:\ndefault = {\n# for cases\n\"SMB_URL\": \"SMB://10.8.10.214\",\n\"SMB_IP\": \"10.8.10.214\",\n}\ndef __getattr__(self, key):\ntry:\nreturn Config.default[key]\nexcept KeyError:\nraise AttributeError(f\"{key} is not a valid option!\") from KeyError\ndef __setattr__(self, key, value):\nif key not in Config.default:\nraise AttributeError(f\"{key} is not a valid option!\") from KeyError\nConfig.default[key] = value\n</code></pre> <p>\u8bd5\u7740\u5206\u6790\u4e0b\u4ed6\u4eec\u7684\u4f5c\u7528\u5427\uff0c\u903b\u8f91\u5f88\u7b80\u5355\u7684\uff0c\u4f60\u4e00\u5b9a\u80fd\u770b\u61c2\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3_2","title":"3\u3001\u81ea\u5b9a\u4e49\u5143\u7c7b","text":"<p>\u5143\u7c7b\uff08metaclass\uff09\u5c31\u662f\u751f\u6210\u7c7b\u7684\u7c7b\uff0c\u5148\u5b9a\u4e49metaclass\uff0c\u5c31\u53ef\u4ee5\u521b\u5efa\u7c7b\uff0c\u6700\u540e\u521b\u5efa\u5b9e\u4f8b\u3002</p> <p>\u5176\u5b9e\u6700\u5f00\u59cb\u8bb2 type \u7684\u65f6\u5019\u5df2\u7ecf\u6709\u6240\u63a5\u89e6\u4e86\uff0ctype \u751f\u6210\u4e86\u6240\u6709\u7c7b\uff0c\u5b83\u5c31\u662f\u9876\u5c42\u5143\u7c7b\uff0cmetaclass \u4e5f\u662f\u8981\u7ee7\u627f type\u7684\uff0c\u6392\u884c\u9876\u591a\u8001\u4e8c\uff0c\u662f\u4e0d\u662f\u5e94\u8be5\u53eb\u201c\u5143\u4e8c\u7c7b\u201d\uff0c\u6216\u8005\u201c\u5143\u7c7b\u4e8c\u201d\uff0c\u7231\u8c01\u8c01\u5427\u3002</p> <p>\u6765\uff0c\u54b1\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5143\u7c7b\uff0c\u7528\u9014\u662f\u6dfb\u52a0\u4e00\u4e2a\u5c5e\u6027 age \uff1a</p> <pre><code>class AutoTestMetaClass(type):\ndef __new__(cls, name, bases, dct):\nx = super().__new__(cls, name, bases, dct)\nx.age = 30\nreturn x\n</code></pre> <p>\u8fd9\u91cc\u6709 2 \u4e2a\u77e5\u8bc6\u70b9\uff1a</p> <ul> <li><code>__new__</code> \u4e5f\u662f\u6784\u9020\u51fd\u6570\uff0c\u548c <code>__init__</code> \u6709\u533a\u522b\uff0c<code>__new__</code> \u662f\u7528\u6765\u6784\u9020\u7c7b\u5bf9\u8c61\u7684\uff0c\u4f60\u770b\u5b83\u7684\u53c2\u6570\u662f cls\uff0c\u5fc5\u987b return \u4e00\u4e2a\u5bf9\u8c61\u3002</li> <li>name, bases, dct \u8fd9\u4e09\u4e2a\u53c2\u6570\u548c type \u7684\u4e09\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u610f\u601d\uff0c\u4e0d\u6e05\u695a\u53ef\u4ee5\u56de\u770b\u524d\u9762\u8bb2 type \u7684\u7ae0\u8282\u3002</li> </ul> <p>\u5143\u7c7b\u6709\u4e86\uff0c\u54b1\u4eec\u4f7f\u7528\u4e00\u4e0b\uff0c\u65e2\u7136\u5143\u7c7b\u662f\u7528\u6765\u751f\u6210\u7c7b\u7684\u7c7b\uff0c\u90a3\u54b1\u4eec\u5c31\u6765\u751f\u6210\u4e00\u4e2a\u7c7b\uff1a</p> <pre><code>class Mikigo(metaclass=AutoTestMetaClass):\n...\nmi = Mikigo()\nprint(mi.age)\nprint(Mikigo.age)\n</code></pre> <pre><code>30\n30\n</code></pre> <p>\u54b1\u4eec\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u9664\u4e86\u7701\u7565\u53f7\u6ca1\u6709\u4efb\u4f55\u5c5e\u6027\uff0c\u7701\u7565\u53f7\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528 pass\uff0c\u4f46\u662f\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee age \u5c5e\u6027\u3002\u56e0\u4e3a\u6211\u4eec\u662f\u901a\u8fc7\u5143\u7c7b\uff0c\u5411 Mikigo \u8fd9\u4e2a\u7c7b\u6dfb\u52a0\u4e86\u4e00\u4e2a\u5c5e\u6027\uff0c\u5143\u7c7b\u6709\u65f6\u79f0\u4e3a\u7c7b\u5de5\u5382\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_6","title":"\u516d\u3001\u8fed\u4ee3\u5668\u548c\u751f\u6210\u5668","text":""},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1_4","title":"1\u3001\u8fed\u4ee3\u534f\u8bae","text":"<p>\u8fed\u4ee3\u5c31\u662f\u53ef\u4ee5\u4f7f\u7528\u5faa\u73af\u5c06\u6570\u636e\u6328\u4e2a\u6328\u4e2a\u53d6\u51fa\u6765\uff0c\u8fd9\u4e2a\u597d\u7406\u89e3\u662f\u5427\uff0c\u6bd4\u5982\uff0c\u54b1\u4eec\u5e38\u89c1\u7684\u5bf9\u4e00\u4e2a\u5217\u8868\u8fdb\u884c\u8fed\u4ee3\uff1a</p> <pre><code>for i in [1, 2, 3]:\nprint(i)\n</code></pre> <p>\u7ed3\u679c\u4e0d\u7528\u8bb2\u80af\u5b9a\u662f\u6328\u7740\u53d6\u51fa\u5217\u8868\u91cc\u9762\u7684\u6570\u5b57\u4e86\u3002</p> <p>\u90a3\u5217\u8868\u91cc\u9762\u7a76\u7adf\u662f\u5b9e\u73b0\u4e86\u4ec0\u4e48\u534f\u8bae\uff0c\u6216\u8005\u8bf4\u4e00\u4e2a\u5bf9\u8c61\u5b9e\u73b0\u4ec0\u4e48\u9b54\u6cd5\u51fd\u6570\u5c31\u53ef\u4ee5\u8fed\u4ee3\u5462\uff0c\u8fd9\u5c31\u662f\u8fed\u4ee3\u534f\u8bae\uff1a<code>__iter__</code></p> <p>\u4e00\u4e2a\u7c7b\u53ea\u8981\u5b9e\u73b0\u4e86\u9b54\u6cd5\u51fd\u6570 <code>__iter__</code> \u5c31\u662f\u53ef\u8fed\u4ee3\u7684\uff08<code>Iterable</code>\uff09\uff0c\u4f46\u662f\u5b83\u8fd8\u4e0d\u662f\u8fed\u4ee3\u5668(<code>Iterator</code>)\uff0c\u54c1\u4e00\u4e0b\u533a\u522b\u3002</p> <pre><code>class IterTest:\ndef __iter__(self):\n...\n</code></pre> <p>\u6765\u9a8c\u8bc1\u4e00\u4e0b\uff1a</p> <pre><code>from collections.abc import Iterable\nfrom collections.abc import Iterator\nprint(\"\u662f\u5426\u53ef\u8fed\u4ee3\uff1a\", isinstance(IterTest(), Iterable))\nprint(\"\u662f\u5426\u4e3a\u8fed\u4ee3\u5668\uff1a\", isinstance(IterTest(), Iterator))\n</code></pre> <pre><code>\u662f\u5426\u53ef\u8fed\u4ee3\uff1aTrue\n\u662f\u5426\u4e3a\u8fed\u4ee3\u5668\uff1aFalse\n</code></pre> <p>\u4f60\u770b\u5b9e\u73b0\u4e86\u8fed\u4ee3\u534f\u8bae\uff0c\u5c31\u662f\u53ef\u8fed\u4ee3\u7684\uff0c\u60f3\u8d77\u9e2d\u5b50\u7c7b\u578b\u4e86\u5417\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2_3","title":"2\u3001\u8fed\u4ee3\u5668\u548c\u53ef\u8fed\u4ee3\u5bf9\u8c61","text":"<p>\u6211\u4eec\u73b0\u5728\u77e5\u9053\u4e00\u4e2a\u5bf9\u8c61\u53ea\u8981\u5b9e\u73b0\u4e86 <code>__iter__</code> \u5c31\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\uff0c\u73b0\u5728\u54b1\u4eec\u6765\u8bd5\u8bd5\u5bf9\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4f7f\u7528 for \u5faa\u73af\u8fdb\u884c\u8fed\u4ee3\uff0c\u653e\u4e2a\u7b80\u5355\u7684\u5217\u8868\u8fdb\u53bb\u770b\u770b\uff1a</p> <pre><code>class IterTest:\ndef __iter__(self):\nreturn [1, 2, 3]\nfor i in IterTest():\nprint(i)\n</code></pre> <p>\u5728 <code>__iter__</code> \u51fd\u6570\u91cc\u9762\u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\uff0c\u4f46\u4e0d\u662f\u8fed\u4ee3\u5668\u3002</p> <pre><code>Traceback (most recent call last):\nFile \"/tmp/pycharm_project_609/123.py\", line 11, in &lt;module&gt;\nfor i in IterTest():\nTypeError: iter() returned non-iterator of type 'list'\n</code></pre> <p>\u8fd0\u884c\u62a5\u9519\u4e86\uff0c\u8bf4 iter \u8fd4\u56de\u4e86\u4e00\u4e2a\u4e0d\u662f\u8fed\u4ee3\u5668\u7684\u5bf9\u8c61\u3002\u8bf4\u660e\u5728 <code>__iter__</code> \u91cc\u9762\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u5bf9\u5427\uff0c\u5176\u4ed6\u7684\u5148\u4e0d\u7ba1\uff0c\u54b1\u4eec\u653e\u4e00\u4e2a\u8fed\u4ee3\u5668\u8fdb\u53bb\uff0c\u4fdd\u8bc1\u7a0b\u5e8f\u8dd1\u8d77\u6765\u4e0d\u62a5\u9519\u3002</p> <p>\u653e\u4e00\u4e2a\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u8fdb\u53bb\u8bd5\u8bd5\uff1a</p> <pre><code>class IterTest:\ndef __iter__(self):\nreturn (i for i in range(3))\nfor i in IterTest():\nprint(i)\n</code></pre> <pre><code>0\n1\n2\n</code></pre> <p>\u5509\uff0c\u8fd9\u4e0b\u5bf9\u4e86\uff0c\u6ca1\u62a5\u9519\uff0c\u800c\u4e14\u4e5f\u80fd\u8fed\u4ee3\u51fa\u6765\u4e86\u3002</p> <p>\u4f46\u662f\uff0c\u6b64\u65f6\u4ecd\u7136\u8fd8\u4e0d\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u8981\u5b9e\u73b0\u8fed\u4ee3\u5668\uff0c\u8fd8\u5fc5\u987b\u8981\u5b9e\u73b0\u53e6\u5916\u4e00\u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__next__</code></p> <pre><code>class IterTest:\ndef __iter__(self):\nreturn (i for i in range(3))\ndef __next__(self):\n...\n</code></pre> <p>\u9a8c\u8bc1\u4e00\u4e0b</p> <pre><code>print(\"\u662f\u5426\u4e3a\u8fed\u4ee3\u5668\uff1a\", isinstance(IterTest(), Iterator))\n</code></pre> <pre><code>\u662f\u5426\u4e3a\u8fed\u4ee3\u5668\uff1a True\n</code></pre> <p>\u4f60\u770b\uff0c\u5b9e\u73b0 <code>__next__</code> \u4e4b\u540e\uff0c\u5c31\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u4e86\u3002\u90a3 <code>__next__</code> \u5e94\u8be5\u600e\u4e48\u5199\uff0c\u524d\u9762\u6211\u4eec\u5df2\u7ecf\u770b\u5230\uff0c <code>__iter__</code> \u91cc\u9762\u662f\u4e0d\u8d1f\u8d23\u903b\u8f91\u5904\u7406\u7684\uff0c\u5b83\u53ea\u7ba1\u8fd4\u56de\uff0c\u903b\u8f91\u5904\u7406\u9700\u8981\u5728 <code>__next__</code> \u91cc\u9762\u53bb\u505a\u3002</p> <p>\u4f7f\u7528\u7ecf\u5178\u7684\u6590\u6ce2\u90a3\u5951\u6570\u5217\u6765\u4e3e\u4f8b\uff1a</p> <pre><code>class Fib:\ndef __init__(self, n):\nself.a, self.b = 0, 1\nself.n = n\n# \u8fd4\u56de\u8fed\u4ee3\u5668\u5bf9\u8c61\u672c\u8eab\ndef __iter__(self):\nreturn self\n# \u8fd4\u56de\u5bb9\u5668\u4e0b\u4e00\u4e2a\u5143\u7d20\ndef __next__(self):\nif self.n &gt; 0:\nself.a, self.b = self.b, self.a + self.b\nself.n -= 1\nreturn self.a\nelse:\nraise StopIteration\n</code></pre> <p>\u8fd9\u91cc\u9762 n \u662f\u7528\u6765\u9650\u5236\u8fed\u4ee3\u6b21\u6570\u7684\uff0c\u4e0d\u7136\u8fd9\u4e2a\u5faa\u73af\u5c06\u4e00\u76f4\u8fdb\u884c\u4e0b\u53bb\uff0c\u76f4\u5230\u5b87\u5b99\u7684\u5c3d\u5934\uff0c\u629b <code>StopIteration</code> \u5f02\u5e38\u4f1a\u88ab <code>for</code> \u5faa\u73af\u81ea\u52a8\u5904\u7406\u6389\u3002</p> <pre><code>for i in Fib(10):\nprint(i)\n</code></pre> <pre><code>1\n2\n3\n5\n8\n13\n21\n34\n55\n</code></pre> <p>\u8fd9\u6837\u6211\u4eec\u5c31\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u8fed\u4ee3\u5668\u3002</p> <p>\u7b80\u5355\u4e00\u53e5\u8bdd\u603b\u7ed3\u4e00\u4e0b\uff1a\u8fed\u4ee3\u5668\u5c31\u662f\u4f7f\u5bf9\u8c61\u53ef\u4ee5\u8fdb\u884c for \u5faa\u73af\uff0c\u5b83\u9700\u8981\u5b9e\u73b0 <code>__iter__</code> \u548c <code>__next__</code> \u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\u3002</p> <p>\u6709\u540c\u5b66\u8981\u8bf4\u4e86\uff0c\u5c31\u8fd9\uff1f\u4e0d\u5c31\u7528 for \u5faa\u73af\u561b\uff0c\u641e\u8fd9\u4e48\u590d\u6742\u560e\u54c8\uff0c\u6211\u4e3a\u4ec0\u4e48\u8981\u7528\u8fed\u4ee3\u5668\u554a\uff1f</p> <p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u8fed\u4ee3\u5668</p> <p>\u8282\u7701\u8d44\u6e90\u6d88\u8017\uff0c\u8fed\u4ee3\u5668\u5e76\u4e0d\u4f1a\u8ba1\u7b97\u6bcf\u4e00\u9879\u7684\u503c\uff0c\u5b83\u53ea\u5728\u4f60\u8bbf\u95ee\u8fd9\u4e9b\u9879\u7684\u65f6\u5019\u624d\u8ba1\u7b97\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u4fdd\u5b58\u7684\u662f\u4e00\u79cd\u8ba1\u7b97\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u8ba1\u7b97\u7684\u7ed3\u679c\u3002\u80fd\u7406\u89e3\u5417\uff0c\u76f8\u5f53\u4e8e\u8fed\u4ee3\u5668\u662f\u9c7c\u7aff\uff0c\u800c\u4e0d\u662f\u4e00\u6c60\u5b50\u7684\u9c7c\uff0c\u9700\u8981\u9c7c\u7684\u65f6\u5019\u9493\u5c31\u884c\u4e86\uff0c\u800c\u4e0d\u7528\u628a\u6240\u6709\u9c7c\u90fd\u642c\u56de\u5bb6\u3002</p> <p>\u5e73\u65f6\u53ef\u80fd\u611f\u53d7\u4e0d\u5230\u54c8\uff0c\u5f53\u4f60\u9700\u8981\u8ba1\u7b97\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u6570\u636e\u65f6\uff0c\u4f60\u5c31\u80fd\u611f\u53d7\u5230\u4e86\uff0c\u8fd9\u5c31\u662f\u201c\u60f0\u6027\u6c42\u503c\u201d\u7684\u9b45\u529b\u3002</p> <p>\u4f60\u53ef\u4ee5\u8bd5\u8bd5\u524d\u9762\u7684\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u5217\u5b50\uff0c\u5bf9\u6bd4\u4e00\u4e2a\u666e\u901a\u7684\u5217\u8868\uff0c\u7136\u540e\u7ed9\u4e00\u4e2a\u5f88\u5927\u7684\u6570\u5b57\uff0c\u533a\u522b\u5c31\u5f88\u660e\u663e\u4e86\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3_3","title":"3\u3001\u751f\u6210\u5668","text":"<p>\u751f\u6210\u5668\u4e5f\u662f\u4e00\u79cd\u8fed\u4ee3\u5668\uff0c\u7279\u6b8a\u7684\u8fed\u4ee3\u5668\uff0c\u5b83\u4e5f\u53ef\u4ee5\u7528 for \u5faa\u73af\u6765\u53d6\u503c\uff0c\u4f46\u662f\u5927\u90e8\u5206\u7684\u60c5\u51b5\u4e0b\u662f\u4f7f\u7528 next() \u51fd\u6570\u8fdb\u884c\u53d6\u503c\u3002</p> <p>\u524d\u9762\u6211\u4eec\u8bb2\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u5df2\u7ecf\u89c1\u8bc6\u8fc7\uff0c\u8fd9\u662f\u4e00\u79cd\u4fbf\u643a\u7684\u5199\u751f\u6210\u5668\u7684\u65b9\u6cd5\uff1a</p> <pre><code>my_gen = (i for i in range(10))\nprint(next(my_gen))\nprint(next(my_gen))\nprint(next(my_gen))\nprint(next(my_gen))\n</code></pre> <pre><code>0\n1\n2\n3\n</code></pre> <p>\u4e00\u822c\u8fd9\u4e48\u73a9\u7684\u54c8\u3002</p> <p>\u524d\u9762\u8bb2\u7684\u597d\u591a\u5bf9\u8c61\u90fd\u662f\u5728\u7c7b\u91cc\u9762\u5b9a\u4e49\u7684\uff0c\u800c\u751f\u6210\u5668\u5bf9\u8c61\u5c31\u4e0d\u662f\u5728\u7c7b\u91cc\u9762\u4e86\uff0c\u800c\u662f\u5728\u51fd\u6570\u91cc\u9762\u5b9a\u4e49\uff0c\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\u53ea\u8981\u51fa\u73b0\u4e86 <code>yield</code> \u5b83\u5c31\u4e0d\u662f\u666e\u901a\u51fd\u6570\uff0c\u800c\u662f\u4e00\u4e2a\u751f\u6210\u5668\u3002</p> <pre><code>def my_gen():\nprint(\"setp 1\")\nyield 1\nprint(\"setp 2\")\nyield 2\ng = my_gen()\nnext(g)\nnext(g)\n</code></pre> <pre><code>step 1\nstep 2\n</code></pre> <p><code>yield</code> \u7684\u7528\u9014\u662f\u8ba9\u51fd\u6570\u6682\u505c\uff0c\u5e76\u4fdd\u5b58\u5bf9\u8c61\u72b6\u6001\u5728\u5185\u5b58\u4e2d\uff0c\u4e0b\u6b21\u518d\u4f7f\u7528 <code>next</code> \u8c03\u7528\u540c\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53c8\u5f00\u59cb\u4ece\u4e4b\u524d\u6682\u505c\u7684\u4f4d\u7f6e\u5f00\u59cb\u6267\u884c\uff0c\u76f4\u5230\u8fd0\u884c\u5230\u4e0b\u4e00\u4e2a <code>yield</code> \u53c8\u6682\u505c\uff0c\u5982\u679c\u540e\u9762\u6ca1\u6709 <code>yield</code>\u4e86\uff0c\u5219\u4f1a\u629b <code>StopIteration</code> \u5f02\u5e38\u3002</p> <p><code>yield</code> \u548c <code>return</code> \u90fd\u80fd\u8fd4\u56de\u6570\u636e\uff0c\u4f46\u662f\u6709\u533a\u522b\uff0c<code>return</code> \u8bed\u53e5\u4e4b\u540e\u7684\u4ee3\u7801\u662f\u4e0d\u6267\u884c\u7684\uff0c\u800c <code>yield</code> \u540e\u9762\u8fd8\u53ef\u4ee5\u6267\u884c\u3002</p> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u751f\u6210\u5668\u51fd\u6570\u91cc\u9762\u80fd\u7528 <code>return</code> \u5417\uff1f\u597d\u95ee\u9898\uff0c\u4e0d\u6127\u662f\u4f60\u3002</p> <p>\u751f\u6210\u5668\u91cc\u9762\u662f\u53ef\u4ee5\u7528 <code>return</code> \u7684\uff0c\u4f46\u662f\uff0c<code>return</code> \u540e\u9762\u7684\u6570\u636e\u4e0d\u4f1a\u88ab\u8fd4\u56de\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>def my_gen():\nyield 1\nyield 2\nreturn 3\nfor i in my_gen():\nprint(i)\n</code></pre> <pre><code>1\n2\n</code></pre> <p>\u4f60\u770b\uff0c3 \u5e76\u6ca1\u6709\u88ab\u8fd4\u56de\uff0c\u6240\u4ee5\u8bf4\u751f\u6210\u5668\u91cc\u9762\u7684 <code>return</code> \u53ea\u662f\u4e00\u4e2a\u7ed3\u675f\u7684\u6807\u5fd7\uff0c\u5b83\u4e0d\u4f1a\u628a\u540e\u9762\u7684\u503c\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\uff0c\u8fd9\u8ddf\u51fd\u6570\u91cc\u9762\u7684 <code>return</code> \u662f\u4e0d\u4e00\u6837\u7684\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#4_2","title":"4\u3001\u603b\u7ed3","text":"<p>\u770b\u5b8c\u524d\u9762\u8fed\u4ee3\u5668\u548c\u751f\u6210\u5668\u7684\u5185\u5bb9\uff0c\u53ef\u80fd\u6709\u4e9b\u540c\u5b66\u6709\u70b9\u6655\u4e86\uff0c\u6ca1\u5173\u7cfb\uff0c\u591a\u770b\u51e0\u904d\uff0c\u7ecf\u5e38\u770b\uff0c\u7ecf\u5e38\u6655\u3002</p> <p>\u6211\u4eec\u7b80\u5355\u603b\u7ed3\u4e00\u4e0b\uff1a</p> <ul> <li> <p>\u8fed\u4ee3\u5668\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u9b54\u6cd5\u51fd\u6570\uff1a<code>__iter__</code> \u548c <code>__next__</code> \uff1b</p> </li> <li> <p>\u8fed\u4ee3\u5668\u5141\u8bb8\u60f0\u6027\u6c42\u503c\uff0c\u53ea\u6709\u5728\u8bf7\u6c42\u4e0b\u4e00\u4e2a\u5143\u7d20\u65f6\u8fed\u4ee3\u5668\u5bf9\u8c61\u624d\u4f1a\u53bb\u751f\u6210\u5b83\uff0c\u5b83\u4fdd\u5b58\u7684\u662f\u4e00\u79cd\u751f\u6210\u6570\u636e\u7684\u65b9\u6cd5\uff1b</p> </li> <li>\u751f\u6210\u5668\u662f\u8fed\u4ee3\u5668\u7684\u4e00\u79cd\u66f4 <code>Pythonic</code> \u7684\u5199\u6cd5\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u91cc\u9762\u7528 <code>yield</code> \u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\uff1b</li> <li>\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u662f\u751f\u6210\u5668\u7684\u4e00\u79cd\u66f4\u52a0 <code>Pythonic</code> \u7684\u5199\u6cd5\u3002</li> </ul>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#_7","title":"\u4e03\u3001\u9ad8\u9636\u51fd\u6570","text":"<p>\u9ad8\u9636\u51fd\u6570\u662f\u901a\u8fc7\u7ec4\u5408\u7b80\u5355\u51fd\u6570\u6210\u4e00\u4e2a\u590d\u6742\u8868\u8fbe\u5f0f\u7684\u51fd\u6570\u3002\u4f60\u53ef\u4ee5\u7406\u89e3\u6210\uff0c\u51fd\u6570\u5957\u51fd\u6570\u3002\u51fd\u6570\u5f0f\u7f16\u7a0b\u662f\u4e00\u79cd\u7f16\u7a0b\u8303\u5f0f\uff0c\u8fd9\u90e8\u5206\u5185\u5bb9\u53ef\u4ee5\u4f53\u73b0 Python \u5728\u51fd\u6570\u5f0f\u7f16\u7a0b\u4e0a\u7684\u5e94\u7528\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#1lambda","title":"1\u3001lambda","text":"<p>\u533f\u540d\u51fd\u6570\uff08lambda\uff09\uff0c\u8fd9\u4e2a\u51fd\u6570\u6ca1\u6709\u51fd\u6570\u540d\uff0c\u7528\u4e8e\u4e00\u884c\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u4e5f\u662f\u4e00\u79cd\u8bed\u6cd5\u7cd6\u3002</p> <p>\u5b9a\u4e49\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0c\u529f\u80fd\u5c31\u662f\u53c2\u6570\u52a01\uff1a</p> <pre><code>my_lb = lambda x: x + 1\n</code></pre> <p>\u666e\u901a\u51fd\u6570\u7684\u5199\u6cd5\u5c31\u662f\uff1a</p> <pre><code>def add_one(n):\nreturn n + 1\n</code></pre> <p>\u4f60\u770b\uff0c\u786e\u5b9e\u5f88\u7b80\u6d01\u54c8\uff0cmy_lb \u4e0d\u662f\u51fd\u6570\u540d\u54c8\uff0c\u6709\u51fd\u6570\u540d\u5b83\u5c31\u4e0d\u662f\u533f\u540d\u51fd\u6570\u4e86\uff0c\u800c\u662f\u51fd\u6570\u5bf9\u8c61\uff0c\u54b1\u53ef\u4ee5\u8c03\u7528\u5b83\u3002</p> <pre><code>print(my_lb(1))\n</code></pre> <p>\u6211\u4e2a\u4eba\u89c9\u5f97\uff0c\u533f\u540d\u51fd\u6570\u5f88\u5c34\u5c2c\uff0c\u57fa\u672c\u4e0a\u90fd\u662f\u7528\u5728\u4e0b\u9762\u51e0\u4e2a\u9ad8\u9636\u51fd\u6570\u91cc\u9762\u7684\uff0c\u5982\u679c\u4f60\u5e73\u65f6\u4e5f\u60f3\u7528\u5b83\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u662f\u4e0d\u7b26\u5408\u793e\u533a\u89c4\u8303\u7684\u3002\u7b80\u5355\u7684\u8868\u8fbe\u5f0f\u8fd8\u884c\uff0c\u590d\u6742\u7684\u8868\u8fbe\u5f0f\u53ef\u8bfb\u6027\u592a\u5dee\u3002</p> <p>\u4f20\u8a00 Python \u4e4b\u7236 Guido \u4e5f\u4e0d\u63a8\u8350\u4f7f\u7528\u5b83\uff0c\u751a\u81f3\u66fe\u60f3\u8fc7\u79fb\u9664\u5b83\uff0c\u540e\u6765\u653e\u5f03\u4e86\uff0c\u4f30\u8ba1\u662f\u4e0d\u597d\u641e\u3002\u5c31\u50cf GIL \u4e00\u6837\uff0c\u5927\u5bb6\u90fd\u77e5\u9053\u4e0d\u597d\uff0c\u4f46\u662f\u8fd9\u4e48\u591a\u5e74\u4e0b\u6765\u592a\u591a\u5e93\u90fd\u7528\u5230\u4e86\uff0c\u54ea\u662f\u4f60\u60f3\u5220\u5c31\u80fd\u5220\u7684\uff0c\u793e\u533a\u4e0d\u7b54\u5e94\uff0c\u6211\u4e5f\u4e0d\u7b54\u5e94\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#2map","title":"2\u3001map","text":"<p>map \u51fd\u6570\u662f\u7ed9\u4e00\u4e2a\u5e8f\u5217\u505a\u6620\u5c04\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\u5e8f\u5217\u3002</p> <p>\u7b80\u5355\u901a\u4fd7\u8bb2\u5c31\u662f\uff1a\u62ff\u5230\u4e00\u4e2a\u5e8f\u5217\uff0c\u7ed9\u5e8f\u5217\u4e2d\u5143\u7d20\u4e00\u987f\u64cd\u4f5c\u4e4b\u540e\uff0c\u8fd4\u56de\u5e8f\u5217\u3002</p> <pre><code>my_map = map(lambda x: x + 1, [1, 2, 3])\nprint(my_map)\nmy_list = list(my_map)\nprint(my_list)\n</code></pre> <pre><code>&lt;map object at 0x7f201238cd68&gt;\n[2, 3, 4]\n</code></pre> <p>\u4f60\u770b\uff0cmap \u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8f6c list \u4e4b\u540e\u6bcf\u4e2a\u5143\u7d20\u7684\u52a0\u4e861\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#3reduce","title":"3\u3001reduce","text":"<p>reduce \u51fd\u6570\u5c31\u662f\u5bf9\u4e00\u4e2a\u5e8f\u5217\u505a\u7d2f\u79ef\uff0c\u5373\u5c06\u5e8f\u5217\u4e2d\u524d\u4e00\u4e2a\u5143\u7d20\u548c\u540e\u4e00\u4e2a\u5143\u7d20\u8fdb\u884c\u903b\u8f91\u7ec4\u5408\uff0c\u7136\u540e\u7ed3\u679c\u518d\u548c\u540e\u9762\u4e00\u4e2a\u5143\u7d20\u7ec4\u5408\u3002</p> <p>\u7b80\u5355\u901a\u4fd7\u8bb2\u5c31\u662f\uff1a\u62ff\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u5e8f\u5217\uff0c\u7ed9\u5e8f\u5217\u4e2d\u5143\u7d20\u4e00\u987f\u64cd\u4f5c\u4e4b\u540e\uff0c\u8fd4\u56de\u64cd\u4f5c\u7ed3\u679c\u3002</p> <pre><code>from functools import reduce\nmy_rd = reduce(lambda x, y: x + y, [1, 2, 3])\nprint(my_rd)\n</code></pre> <pre><code>6\n</code></pre> <p>\u4f60\u770b\uff0c\u628a\u5217\u8868\u4e2d\u7684\u5143\u7d20\u90fd\u76f8\u52a0\u4e86\uff0c\u6ce8\u610f\u7ec4\u5408\u5173\u7cfb\u4e0d\u4e00\u5b9a\u662f\u76f8\u52a0\uff0c\u4f60\u53ef\u4ee5\u6362\u6210\u76f8\u4e58\u8bd5\u8bd5\u3002</p> <p>\u4e4d\u4e00\u770b\u548c\u4e0a\u9762\u7684 map \u662f\u4e00\u4e2a\u610f\u601d\u54c8\uff0c\u786e\u5b9e\u7528\u6cd5\u4e00\u6837\uff0c\u533a\u522b\u5c31\u662f reduce \u51fd\u6570\u91cc\u9762\u7684 lambda \u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u800c map \u51fd\u6570\u53c2\u6570\u7406\u8bba\u4e0a\u53ef\u4ee5\u591a\u4e2a\uff0c\u4f46\u662f\u6bcf\u4e2a\u53c2\u6570\u5bf9\u5e94\u4e00\u4e2a\u5e8f\u5217\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6709\u591a\u5c11\u4e2a\u53c2\u6570\uff0c\u5c31\u8981\u6709\u591a\u5c11\u4e2a\u5e8f\u5217\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#4filter","title":"4\u3001filter","text":"<p>filter \u51fd\u6570\u7528\u4e8e\u8fc7\u6ee4\u7684\uff0c\u5373\u5c06\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u5224\u65ad\uff0c\u7136\u540e\u8fd4\u56de\u4e3a True \u7684\u5143\u7d20\u3002</p> <pre><code>my_ft = filter(lambda x: x % 2 == 1, [1, 2, 3])\nprint(my_ft)\nmy_list = list(my_ft)\nprint(my_list)\n</code></pre> <pre><code>&lt;filter object at 0x7f778f58fd68&gt;\n[1, 3]\n</code></pre> <p>\u5224\u65ad\u5e8f\u5217\u4e2d\u54ea\u4e9b\u6570\u662f\u5947\u6570\uff0cfilter \u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8f6c\u5217\u8868\u4e4b\u540e\uff0c\u53ef\u4ee5\u770b\u5230\u7ed3\u679c\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#5sorted","title":"5\u3001sorted","text":"<p>sorted \u51fd\u6570\u7528\u4e8e\u6392\u5e8f\uff0c\u597d\u591a\u540c\u5b66\u53ef\u80fd\u7528\u8fc7\u5b83\u7684\u53c2\u6570 reverse=False \u5347\u5e8f\uff08\u9ed8\u8ba4\uff09\uff0creverse=True \u964d\u5e8f\uff0c\u4f46\u662f\u8fd8\u6709\u4e2a\u53c2\u6570 key \u53ef\u80fd\u6ca1\u548b\u7528\u8fc7\uff0c\u8fd9\u91cc\u53ef\u4ee5\u7ed9\u8868\u8fbe\u5f0f\u3002</p> <pre><code>my_st = sorted([1, 5, 3])\nprint(my_st)\nmy_st = sorted([1, 5, 3], reverse=True)\nprint(my_st)\n</code></pre> <pre><code>[1, 3, 5]\n[5, 3, 1]\n</code></pre> <p>\u6570\u5b57\u6392\u5e8f\u8fd8\u662f\u633a\u597d\u7528\u7684\u54c8\uff0c\u5904\u7406\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u4e5f\u90fd\u53ef\u4ee5\uff0c\u4f46\u662f\u5982\u679c\u662f\u5904\u7406\u6bd4\u8f83\u590d\u6742\u5b57\u7b26\u4e32\u6392\u5e8f\u5c31\u6709\u70b9\u8d39\u52b2\u4e86\uff0c\u4e0d\u4fe1\u8bd5\u8bd5\u770b\uff1a</p> <pre><code>test_list = [\"test_mi_001\",\"test_ki_012\",\"test_go_008\",\"test_lt_003\"]\n</code></pre> <p>\u6211\u60f3\u8ba9\u8fd9\u4e2a\u5217\u8868\u6309\u7167\u7ed3\u5c3e\u7684\u5e8f\u53f7\u6392\u5e8f\uff1a</p> <pre><code>my_st = sorted(test_list)\nprint(my_st)\n</code></pre> <pre><code>['test_go_008', 'test_ki_012', 'test_lt_003', 'test_mi_001']\n</code></pre> <p>\u6392\u4e86\u4e2a\u5bc2\u5bde\uff0c\u65e0\u8bba\u662f\u5347\u5e8f\u8fd8\u662f\u964d\u5e8f\u90fd\u662f\u4e0d\u884c\u7684\u3002</p> <p>\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u53c2\u6570 key\uff0c\u52a0\u8868\u8fbe\u5f0f\uff1a</p> <pre><code>my_st = sorted(test_list, key=lambda x: x.split(\"_\")[-1])\nprint(my_st)\n</code></pre> <pre><code>['test_mi_001', 'test_lt_003', 'test_go_008', 'test_ki_012']\n</code></pre> <p>\u5509\uff0c\u8fd9\u5c31\u5bf9\u4e86\uff0c\u6211\u4eec\u5728\u8868\u8fbe\u5f0f\u91cc\u9762\u5c06\u7ed3\u5c3e\u7684\u5e8f\u53f7\u53d6\u51fa\u6765\uff0ckey \u5c31\u662f\u5173\u952e\u5b57\uff0c\u610f\u601d\u5c31\u662f\u6309\u7167\u6211\u53d6\u51fa\u6765\u7684\u5173\u952e\u5b57\u6392\u5e8f\u3002\u8fd9\u91cc\u7a0d\u5fae\u7406\u89e3\u4e00\u4e0b\u54c8\uff0c\u91cc\u9762\u7684\u8868\u8fbe\u5f0f\u6bd4\u8f83\u7075\u6d3b\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u505a\uff1a</p> <pre><code>import re\nmy_st = sorted(test_list, key=lambda x: re.findall(r\"\\d+\", x))\n</code></pre> <p>\u4e5f\u90fd\u662f\u53ef\u4ee5\u7684\u54c8\uff0c\u6ca1\u6bdb\u75c5\u3002</p> <p>\u5b83\u4e0d\u4ec5\u53ef\u4ee5\u5bf9\u5217\u8868\u6392\u5e8f\uff0c\u53ea\u8981\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\u90fd\u53ef\u4ee5\uff0c\u5217\u8868\u5bf9\u8c61\u7684\u5185\u5efa\u65b9\u6cd5 sort \u4e5f\u53ef\u4ee5\u8fd9\u6837\u7528\uff0c\u4f46\u533a\u522b\u662f sort \u662f\u5bf9\u539f\u5217\u8868\u8fdb\u884c\u6392\u5e8f\uff0c\u4e0d\u8fd4\u56de\u65b0\u5217\u8868\u3002</p> <p>\u8fd9\u91cc\u518d\u8865\u5145\u4e00\u4e2a\u5c0f\u77e5\u8bc6\uff0c\u6211\u4eec\u7ecf\u5e38\u5f80\u4e00\u4e2a\u5217\u8868\u4e2d\u53bb\u6dfb\u52a0\u6570\u636e\uff0c\u7136\u540e\u5bf9\u5176\u8fdb\u884c\u6392\u5e8f\uff0c\u8fd9\u6837\u505a\u6ca1\u5565\u95ee\u9898\uff0c\u4f46\u662f\u5982\u679c\u6570\u636e\u91cf\u5927\u4e86\u4e4b\u540e\uff0c\u6027\u80fd\u4f1a\u6bd4\u8f83\u4f4e\u3002</p> <p>\u7ef4\u62a4\u4e00\u4e2a\u6392\u5e8f\u5e8f\u5217\uff0c\u5efa\u8bae\u4f7f\u7528Python \u7684\u6807\u51c6\u5e93 bisect \u6765\u505a\uff0c\u5b83\u662f\u91c7\u7528\u4e8c\u5206\u67e5\u627e\u7b97\u6cd5\uff0c\u6027\u80fd\u8f83\u9ad8\u3002</p>"},{"location":"Python/Python%E4%BB%8E%E8%BF%9B%E9%98%B6%E5%88%B0%E9%AB%98%E7%BA%A7%E2%80%94%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%89%88/#6zip","title":"6\u3001zip","text":"<p>zip \u5c31\u662f\u5c06\u591a\u4e2a\u5e8f\u5217\u6253\u5305\u6210\u4e00\u4e2a\u4e2a\u5143\u7ec4\uff0c\u7136\u540e\u8fd4\u56de\u7531\u8fd9\u4e9b\u5143\u7ec4\u7ec4\u6210\u7684\u5217\u8868\u3002</p> <pre><code>a = [1, 2, 3]\nb = [4, 5, 6]\nc = zip(a, b)\nprint(c)\nmy_list = list(c)\nprint(my_list)\n</code></pre> <pre><code>&lt;zip object at 0x7f4ada0fa548&gt;\n[(1, 4), (2, 5), (3, 6)]\n</code></pre> <p>zip \u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\u3002</p> <p>\u8f6c\u5217\u8868\u4e4b\u540e\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u76f8\u5f53\u4e8e\u662f\u628a\u5143\u7d20\u7eb5\u5411\u5206\u522b\u53d6\u51fa\u6765\uff0c\u653e\u5230\u4e00\u4e2a\u5143\u7ec4\u91cc\u9762\uff0c\u7136\u540e\u5143\u7ec4\u7ec4\u6210\u4e00\u4e2a\u5217\u8868\u3002\u505a\u6570\u636e\u5904\u7406\u7684\u65f6\u5019\u7ecf\u5e38\u7528\u5230\uff0c\u4e86\u89e3\u4e00\u4e0b\u3002</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/","title":"Python\u5305\u6784\u5efa\u548c\u53d1\u5e03","text":""},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#1","title":"1\u3001\u5fc5\u8981\u7684\u6587\u4ef6","text":"<p>\u9664\u4e86\u4f60\u7684\u6e90\u4ee3\u7801\u4ee5\u5916\uff0c\u4f60\u8fd8\u9700\u8981\u51c6\u5907\u4ee5\u4e0b\u6587\u4ef6\uff1b</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#license","title":"LICENSE","text":"<p>\u5f00\u6e90\u534f\u8bae\u6587\u4ef6</p> <p>\u8fd9\u91cc\u4ee5\u6211\u7684\u9879\u76ee\u7528\u5230\u7684\u5f00\u6e90\u534f\u8bae\u4e3e\u4f8b\uff1a</p> <p>https://github.com/funny-dream/pdocr-rpc/blob/main/LICENSE</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#readme","title":"README","text":"<p>\u4ecb\u7ecd\u8fd9\u4e2a\u5305\u7684\u5b89\u88c5\u53ca\u4f7f\u7528\uff0c\u7406\u8bba\u4e0a\u4f60\u53ef\u4ee5\u5199\u4efb\u4f55\u4e1c\u897f\u5728\u4e0a\u9762\uff0c\u4e3b\u8981\u8ba9\u522b\u4eba\u5168\u65b9\u4f4d\u4e86\u89e3\u8fd9\u4e2a\u5305\u7684\u4f7f\u7528\uff1b</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#pyprojecttoml","title":"pyproject.toml","text":"<p>\u7f51\u7edc\u4e0a\u5927\u591a\u5173\u4e8e Python \u6253\u5305\u4f7f\u7528\u7684\u90fd\u662f <code>setup.py</code>\uff0c\u6700\u65b0\u6700\u6d41\u884c\u7684\u662f\u4f7f\u7528 <code>pyproject.toml</code>\uff0c<code>pypi</code> \u5b98\u65b9\u4e5f\u63a8\u8350\u4f7f\u7528\u5b83\uff1b</p> <p>\u76f8\u6bd4\u4e8e<code>setup.py</code>\uff0c<code>pyproject.toml</code> \u7684\u63cf\u8ff0\u66f4\u4e3a\u7cbe\u7ec6\uff0c\u4f46\u4e5f\u66f4\u4e3a\u7e41\u7410\uff0c\u5982\u679c\u4f60\u662f\u9ad8\u5b9a\u73a9\u5bb6\uff0c\u5f53\u7136\u9996\u9009 <code>pyproject.toml</code> \uff1b</p> <p>\u5f53\u7136\uff0c\u5e38\u7528\u7684\u51e0\u4e2a\u4e1c\u897f\u90fd\u5dee\u4e0d\u591a\uff0c\u4e0b\u9762\u5c31\u4ee5\u6211\u7684\u9879\u76ee\u4e3e\u4f8b\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\uff1ahttps://github.com/funny-dream/pdocr-rpc/blob/main/pyproject.toml</p> <p>\u91cc\u9762\u4e3b\u8981\u5305\u542b\u8fd9\u4e9b\u5185\u5bb9\uff1a</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#build-system","title":"build-system","text":"<pre><code>[build-system]\nrequires = [\"hatchling\"]\nbuild-backend = \"hatchling.build\"\n</code></pre> <p>\u6784\u5efa\u7cfb\u7edf</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#project","title":"project","text":"<pre><code>[project]\nname = \"pdocr-rpc\"\nauthors = [\n{ name=\"mikigo\", email=\"1964191531@qq.com\" },\n]\ndescription = \"PaddleOCR-RPC\"\nreadme = \"README.md\"\nrequires-python = \"&gt;=3.7\"\nclassifiers = [\n\"Programming Language :: Python :: 3\",\n\"License :: OSI Approved :: Apache Software License\",\n\"Operating System :: OS Independent\",\n]\ndependencies = [\n\"pyscreenshot;sys_platform == 'linux'\",\n\"pillow;sys_platform == 'win32'\",\n]\n</code></pre> <p>\u8fd9\u91cc\u9762\u5c31\u662f\u4e00\u4e9b\u57fa\u672c\u4fe1\u606f\uff0c\u4f60\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff1b</p> <p>\u6ce8\u610f\uff1a</p> <p>\uff081\uff09<code>classifiers</code> \u91cc\u9762 <code>License</code> \u5b57\u6bb5\u8981\u548c\u9879\u76ee\u7684\u5f00\u6e90\u534f\u8bae\u4e00\u81f4\uff1b\u5728\u8fd9\u91cc\u5217\u51fa\u4e86\u6240\u6709\u7684\u5f00\u6e90\u534f\u8bae\u5e94\u8be5\u600e\u4e48\u5199\uff1ahttps://pypi.org/classifiers/</p> <p>\uff082\uff09<code>dependencies</code> \u662f\u4f60\u9879\u76ee\u7684\u4f9d\u8d56\uff0c\u522b\u4eba\u4f7f\u7528 pip \u5b89\u88c5\u7684\u65f6\u5019\u4f1a\u540c\u65f6\u5b89\u88c5\u4e0a\u8fd9\u4e9b\u4f9d\u8d56\uff1b</p> <p>\u6ce8\u610f\u8fd9\u91cc\u5982\u679c\u6709\u4e00\u4e9b\u6761\u4ef6\uff0c\u6bd4\u5982\u6709\u4e9b\u5305\u6709\u7248\u672c\u7684\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001Python\u7248\u672c\u7684\u9650\u5236\uff0c\u5fc5\u987b\u8981\u6309\u7167\u89c4\u8303\u5199\uff1ahttps://peps.python.org/pep-0508/</p> <p>\uff083\uff09\u53ef\u9009\u4f9d\u8d56</p> <pre><code>[project.optional-dependencies]\ntest = [\n\"pytest\",\n]\ndoc = [\"mkdocs-material\"]\n</code></pre> <p>\u8fd9\u4e9b\u662f\u53ef\u9009\u7684\uff0c\u5b89\u88c5\u7684\u65f6\u5019\u53ef\u4ee5\u8fd9\u6837\u8fdb\u884c\u5b89\u88c5\uff1a</p> <pre><code>pip install pdocr-rpc[test]\n</code></pre> <p>\u8fd9\u6837\u5c31\u4f1a\u5b89\u88c5 <code>pytest</code></p> <p>\uff084\uff09urls</p> <pre><code>[project.urls]\nSource = \"https://github.com/funny-dream/pdocr-rpc\"\nDocumentation = \"https://funny-dream.github.io/pdocr-rpc\"\n</code></pre> <p>\u8fd9\u4e2a\u5728 <code>pypi</code> \u7684\u7f51\u9875\u7aef\u80fd\u5c55\u793a\uff0c\u522b\u4eba\u53ef\u4ee5\u901a\u8fc7\u90a3\u91cc\u8df3\u8f6c\u7684\u4f60\u7684\u6587\u6863\u6216\u6e90\u7801\u9875\u9762\uff1b</p> <p>\uff085\uff09version</p> <pre><code>[tool.hatch.version]\npath = \"allure_custom/__version__.py\"\n</code></pre> <p>\u7528\u4e00\u4e2a <code>__version__.py</code> \u6307\u5b9a\u7248\u672c\u662f\u6bd4\u8f83\u4f18\u96c5\u7684\u65b9\u6cd5\uff1b</p> <pre><code>__title__ = \"allure_custom\"\n__version__ = \"2023.6.26\"\n</code></pre> <p>\u5173\u4e8e <code>project</code> \u4e0b\u7684\u8be6\u7ec6\u5185\u5bb9\u53ca\u89c4\u8303\uff0c\u8bf7\u67e5\u770b\uff1ahttps://packaging.python.org/en/latest/specifications/declaring-project-metadata/#declaring-project-metadata</p>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#2","title":"2\u3001\u6253\u5305","text":"<p>\u5b89\u88c5\u6253\u5305\u5de5\u5177\uff1a</p> <pre><code>sudo pip3 install build\n</code></pre> <p>\u6253\u5305\uff1a</p> <pre><code>python3 -m build\n</code></pre> <p>\u5b8c\u6210\u540e\u5e94\u751f\u6210\u4e24\u4e2a\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\uff1a<code>dist</code></p> <pre><code>dist/\n\u251c\u2500\u2500 xxx.whl\n\u2514\u2500\u2500 xxx.tar.gz\n</code></pre>"},{"location":"Python/Python%E5%8C%85%E6%9E%84%E5%BB%BA%E5%92%8C%E5%8F%91%E5%B8%83/#3","title":"3\u3001\u53d1\u5e03","text":"<p>\u9996\u5148\u4f60\u9700\u8981\u6ce8\u518c\u4e00\u4e2a  pypi \u7684\u8d26\u53f7\uff1ahttps://pypi.org/account/register/</p> <p>\u5b89\u88c5\u53d1\u5e03\u5de5\u5177\uff1a</p> <pre><code>sudo pip3 install twine\n</code></pre> <p>\u53d1\u5e03\uff1a</p> <pre><code>twine upload dist/*\n</code></pre> <p>\u8f93\u5165\u4f60\u7684\u8d26\u53f7\u5bc6\u7801\u5373\u53ef\u53d1\u5e03\u5230 pypi\uff0c\u4ee5\u540e\u6bcf\u6b21\u53d1\u5e03\u5305\u8bb0\u5f97\u66f4\u65b0\u7248\u672c\uff1b</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"Python\u57fa\u7840\u8bed\u6cd5\u20148\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================\n# Author : mikigo\n# Time   : 2020/10/10\n# =============================\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#python","title":"\u4e00\u3001Python\u57fa\u7840","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\uff08\u4e00\uff09\u8f93\u5165\u8f93\u51fa","text":"<p>1. print</p> <pre><code>\uff081\uff09print(\"hello world\") \u62ec\u53f7\u8868\u793a\u8c03\u7528\u51fd\u6570print\uff0c\u62ec\u53f7\u5185\u7684\u5b57\u7b26\u4e32\u7528\u5f15\u53f7\u5f15\u8d77\u6765\u3002\n\uff082\uff09print(\"hello\",\"world\",\"mikigo\") \u53ef\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\u3002\n\uff083\uff09print(name\uff09\u4e0d\u52a0\u5f15\u53f7\u8868\u793a\u8c03\u7528\u53d8\u91cf\u3002\n\uff084\uff09print(100+200) \u4e0d\u52a0\u5f15\u53f7\uff0c\u8868\u793a\u76f4\u63a5\u8fd0\u7b97\u3002\n</code></pre> <p>2. input</p> <pre><code>\uff081\uff09input() \u8f93\u5165\uff0c\u5149\u6807\u4f1a\u7b49\u5f85\u952e\u76d8\u8f93\u5165\u3002\n\uff082\uff09input(\"\u8bf7\u8f93\u5165\u5185\u5bb9\") \u62ec\u53f7\u5185\u5efa\u8bae\u8f93\u5165\u63d0\u793a\u4fe1\u606f\u3002\n\uff083\uff09input \u8f93\u5165\u7684\u503c\u90fd\u4f1a\u88ab\u5f53\u6210\u5b57\u7b26\u4e32\uff0c\u5305\u62ec\u6570\u5b57\u3002\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\uff08\u4e8c\uff09\u6570\u636e\u7c7b\u578b","text":"<pre><code>1. \u6574\u6570 int \u6ca1\u6709\u5c0f\u6570\u70b9\u3002\n2. \u6d6e\u70b9\u6570 float \uff1a\u6709\u5c0f\u6570\u70b9\u3002\n3. \u5e03\u5c14\u503c bool \uff1aTrue \u6216 False \u3002\u6ce8\u610f\u9996\u5b57\u6bcd\u5927\u5199\u3002\n4. \u7a7a\u503c None :\u7a7a\u503c\uff0c\u4f46\u548c0\u6709\u533a\u522b\u3002\n5. type() \u67e5\u770b\u6570\u636e\u7c7b\u578b\uff08isinstance\uff09\u3002\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\uff08\u4e09\uff09\u53d8\u91cf\u3001\u8868\u8fbe\u5f0f","text":"<p>1. \u53d8\u91cf\u8d4b\u503c</p> <p>\uff081\uff09<code>name=\"mikigo\"</code> \u8868\u793a\u5c06 <code>mikigo</code> \u8fd9\u4e2a\u5b57\u7b26\u4e32\u8d4b\u503c\u7ed9\u53d8\u91cf <code>name</code>\uff0c\u6ce8\u610f\u8981\u52a0\u5f15\u53f7\uff0c\u4e0d\u52a0\u5f15\u53f7\u4f1a\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u53d8\u91cf</p> <p>\uff082\uff09a,b,c=7,8,9 \u591a\u5143\u8d4b\u503c\uff0c\u8868\u793a\u5c06\u503c\u4e00\u4e00\u5bf9\u5e94\u7684\u590d\u5236\u5230\u7b49\u53f7\u524d\u9762\u7684\u53d8\u91cf\uff0c\u4f46\u4f4d\u7f6e\u7684\u4e2a\u6570\u4e00\u5b9a\u8981\u4e00\u81f4\u3002</p> <p>\uff083\uff09\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362</p> <pre><code> - str(age) \u8868\u793a\u5c06\u53d8\u91cfage\u8f6c\u6362\u6210\u5b57\u7b26\u578b\n- int\uff081.5\uff09\u8868\u793a\u5c06float\u8f6c\u6362\u6210int\uff08\u53d6\u6574\u4e3a1\uff09\n- float(6) \u8868\u793a\u5c06int\u8f6c\u6362\u6210float\n</code></pre> <p>2. \u8868\u8fbe\u5f0f</p> <pre><code>\uff081\uff09+ - * /\n\uff082\uff09% \u8868\u793a\u53d6\u4f59\u6570\n\uff083\uff09// \u8868\u793a\u53d6\u5546\u6570\n\uff084\uff09** \u8868\u793a\u6b21\u5e42 \uff0c\u6bd4\u598210**5 \u8868\u793a10\u76845\u6b21\u5e42\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#string","title":"\uff08\u56db\uff09\u5b57\u7b26\u4e32 string","text":"<p>1.\u683c\u5f0f\u5316\u5b57\u7b26\u4e32</p> <pre><code>\uff081\uff09%d\uff08data\uff09 \u8868\u793a\u6570\u5b57\u7ad9\u4f4d\n\uff082\uff09%s\uff08string\uff09 \u8868\u793a\u5bf9\u5b57\u7b26\u4e32\u7ad9\u4f4d\n\uff083\uff09%r \u4efb\u4f55\u7c7b\u578b\u90fd\u53ef\u4ee5\u63a5\u6536\uff0c\u4f46\u5b57\u7b26\u4e32\u6700\u7ec8\u6253\u5370\u51fa\u6765\u6709\u5f15\u53f7\u3002\n\uff084\uff09\u683c\u5f0f\uff1aprint(\"%s = %d\" % \uff08age,19\uff09)\n\uff085\uff09\"mikigo{}\".format((\"good\",))\n\uff086\uff09f\"mikigo{good}\"\n</code></pre> <p>2.\u5b57\u7b26\u4e32\u64cd\u4f5c</p> <p>\uff081\uff09\u5b57\u7b26\u4e32\u76f8\u52a0\uff0c\u6bd4\u5982\uff1a<code>\"mi\" + \"ki\" &gt; miki</code>\uff1b</p> <p>\uff082\uff09\u661f\u53f7\u76f8\u4e58\uff0c\u6bd4\u5982\uff1a<code>2 * \"mi\" &gt; mimi</code>\uff1b</p> <p>\uff083\uff09[ ] \u8868\u793a\u901a\u8fc7\u7d22\u5f15\u622a\u53d6\u5b57\u7b26\uff0c\u7b2c 1 \u4e2a\u5b57\u7b26\u7d22\u5f15\u662f 0 \uff1b</p> <p>\uff084\uff09[ : ] \u8868\u793a\u622a\u53d6\u5b57\u7b26\u4e32 \u6bd4\u5982\uff1a[2:4] \u8868\u793a\u4ece\u7d22\u5f15 2 \u5f00\u59cb\uff0c\u622a\u53d6\u5230\u7d22\u5f15 3\uff08\u4e0d\u5305\u542b 4 \uff09\uff1b</p> <p>\uff085\uff09in \u8868\u793a in \u540e\u9762\u5b57\u7b26\u4e32\u4e2d\u662f\u5426\u5305\u542b in \u524d\u9762\u7684\u5b57\u7b26\uff0c\u6bd4\u5982\uff1a<code>\"i\" in \"miki\"  &gt;&gt; True\uff1b</code></p> <p>\uff086\uff09not in \u7528\u6cd5\u4e0e in \u7c7b\u4f3c\u4f46\u662f\u53d6\u53cd\uff1b</p> <p>\uff087\uff09r/R \u8868\u793a\u6240\u6709\u5b57\u7b26\u90fd\u6309\u7167\u5b57\u9762\u610f\u601d\u6765\u4f7f\u7528\u3002\u6bd4\u5982\uff1a<code>print(r\"hello\\nmikigo\")</code> \u6362\u884c\u5b57\u7b26 \\n \u4e0d\u8d77\u4f5c\u7528\uff0c\u76f4\u63a5\u8f93\u5165\u5f15\u53f7\u5185\u7684\u5b57\u7b26\u4e32\u3002</p> <p>3.\u5b57\u7b26\u4e32\u7684\u5e38\u89c1\u51fd\u6570\u65b9\u6cd5</p> <p>\uff081\uff09len(str) \u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff1b</p> <p>\uff082\uff09count \u8ba1\u6570\uff1b</p> <pre><code>- \"mikigo\".count(\"mi\") \u76f4\u63a5\u8ddf\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\uff0c\u5219\u8fd4\u56de\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570\u3002\n- \"mikigo\".count(\"i\",2,10) \u8868\u793a\u5728\u7d22\u5f152\u523010\u4e4b\u95f4\uff08\u4e0d\u5305\u542b10\uff09\uff0c\u8fd4\u56de\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570\u3002\n</code></pre> <p>\uff083\uff09startswith \u6216 endswith \u4ee5\u4ec0\u4e48\u5f00\u59cb\u6216\u4ee5\u4ec0\u4e48\u7ed3\u675f\uff1b</p> <pre><code>- \"mikigo\".startswith(\"m\") \u8868\u793a\u5224\u65ad\u662f\u5426\u4ee5\u5b57\u7b26m\u5f00\u59cb\uff0c&gt; True\n- \"mikigo\".endswith(\"m\") \u8868\u793a\u5224\u65ad\u662f\u5426\u4ee5\u5b57\u7b26m\u7ed3\u675f\uff0c&gt; False\n</code></pre> <p>\uff084\uff09find \u67e5\u627e\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u7d22\u5f15\u4f4d\u7f6e\uff0c\u5982\u679c\u627e\u4e0d\u5230\u4f1a\u8fd4\u56de -1\uff1b</p> <pre><code>- \"mikigo\".find(\"i\") \u8868\u793a\u627e\u51fa\u5b57\u7b26i\u5728\u5b57\u7b26\u4e32\u4e2d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u7d22\u5f15\u4f4d\u7f6e\uff0c&gt; 1\n- \"mikigo\".rfind(\"i\") \u8868\u793a\u4ece\u53f3\u5f00\u59cb\u627e\u51fa\u5b57\u7b26i\u5728\u5b57\u7b26\u4e32\u4e2d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u7d22\u5f15\u4f4d\u7f6e\uff0c&gt; 3\n</code></pre> <p>\uff085\uff09index \u7528\u6cd5\u540c find\uff0c\u533a\u522b\u5728\u4e8e\uff0c\u627e\u4e0d\u5230\u65f6\u4f1a\u62a5\u9519\uff1b</p> <p>\uff086\uff09strip \u5220\u9664\u6216\u622a\u6389\uff1b</p> <pre><code>- \" mikigo \".strip() \u5220\u9664\u524d\u540e\u7684\u7a7a\u683c\n- \" mikigo \".rstrip(\"o\") \u5220\u9664\u53f3\u8fb9\u7684\u5b57\u7b26o\n- \" mikigo \".lstrip(\"m\") \u5220\u9664\u5de6\u8fb9\u7684\u5b57\u7b26m\n</code></pre> <p>\uff087\uff09replace \u66ff\u6362</p> <pre><code>- \"mikigo\".replace(\"i\",\"oo\") \u8868\u793a\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u6240\u6709\u5b57\u7b26i\u66ff\u6362\u79f0\u5b57\u7b26\u4e32oo\n- \"mikigo\".replace(\"i\",\"oo\",1) \u8868\u793a\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26i\u66ff\u6362\u4e3aoo\uff0c\u53ea\u66ff\u6362\u4e00\u6b21\n</code></pre> <p>\uff088\uff09join \u52a0\u5165\uff1a<code>\"miki\".join(\"ab\")  &gt;&gt; \"amikib\"</code> \u6bcf\u4e2a\u5b57\u7b26\u62c6\u5f00\uff0c\u52a0\u5165\u67d0\u4e2a\u5b57\u7b26\u6216\u5b57\u7b26\u4e32\u3002</p> <p>\uff089\uff09split \u4ee5\u5206\u9694\u7b26\u622a\u53d6</p> <pre><code>- \"mikigo\".split(\"i\") \u8868\u793a\u4ee5\u5b57\u7b26i\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u5c06\u5b57\u7b26\u4e32\u8fdb\u884c\u5206\u9694\u3002\n- \"mikigo\".split(\"i\",1) \u8868\u793a\u4ee5\u5b57\u7b26i\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u4ee5\u7b2c1\u4e2ai\u4f5c\u4e3a\u5b57\u7b26\u4e32\u7684\u5206\u9694\u7b26 \u8fdb\u884c\u5206\u9694\u3002\n- \"mikigo\\nhello\".splitlines() \u6216  \"mikigo\\nhello\".splitlines(keepends=False) \u8868\u793a\u6309\u884c\uff08\"\\r\",\"\\n\",\"\\r\\n\"\uff09\u5206\u9694\uff08\u4e0d\u5305\u542b\u6362\u884c\u7b26\uff09\u3002\n- \"mikigo\\nhello\".splitlines(keepends=True) \u8868\u793a\u4ee5\\n\u6362\u884c\uff0c\u4e14\u5305\u542b\u6362\u884c\u7b26\u3002\n- \u6269\u5c55: \u591a\u79cd\u65b9\u5f0f\u5206\u5272\u5b57\u7b26\u4e32  re.split('a|b', 'fdasfweqgasfewaq')\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#list","title":"\uff08\u4e94\uff09\u5217\u8868\uff08list\uff09","text":"<p>1.list\u57fa\u672c\u64cd\u4f5c</p> <pre><code>\uff081\uff09\u5217\u8868\uff08list\uff09\u7528[ ]\u8868\u793a\uff0c\u662f\u6709\u5e8f\uff0c\u53ef\u53d8\uff0c\u53ef\u6307\u5b9a\u4f4d\u7f6e\u53d6\u503c\u7684\u3002\n\uff082\uff09\u5217\u8868\u91cc\u9762\u7684\u5143\u7d20\uff0c\u53ef\u4ee5\u662f\u4efb\u610f\u6570\u636e\u7c7b\u578b\uff0c\u5305\u62ec\u5217\u8868\u3001None\u3001bool\n\uff083\uff09\u540c\u4e00\u5217\u8868\u4e2d\u53ef\u5b58\u653e\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\n</code></pre> <p>2.\u5207\u7247</p> <pre><code>\uff081\uff09lst[index] \u53d6\u5355\u4e2a\u5143\u7d20\uff0c\u76f4\u63a5\u8ddf\u7d22\u5f15\u3002\u6bd4\u5982 lst[2]\uff0c\u8868\u793a\u53d6\u7d22\u5f15 2 \u7684\u5143\u7d20\uff1b\n\uff082\uff09lst[0:2] \u53d6\u4e00\u4e2a\u533a\u95f4\u3002\u8868\u793a\u53d6\u7d22\u5f15 0 \u5230 1 \u7684\u5143\u7d20\uff1b\n\uff083\uff09lst[0:5:2] \u8868\u793a\u6309\u6b65\u957f 2 \u53bb\u53d6\u7d22\u5f15 0 \u5230 4 \u4e4b\u95f4\u7684\u5143\u7d20\uff1b\n\uff084\uff09lst[-1] \u8868\u793a\u53d6\u6700\u540e\u4e00\u4e2a\uff1b\n\uff085\uff09lst[::-1] \u8868\u793a\u5c06\u4e00\u4e2a\u5217\u8868\u53cd\u5411\u6392\u5e8f\u3002\n</code></pre> <p>3.list\u5e38\u89c1\u7684\u51fd\u6570\u548c\u65b9\u6cd5 </p> <p>\uff081\uff09\u51fd\u6570</p> <pre><code>1\uff09len(list) \u5217\u8868\u7684\u957f\u5ea6\uff0c\u5373\u5217\u8868\u4e2d\u5143\u7d20\u7684\u4e2a\u6570\uff1b\n2\uff09max(list) \u76f8\u540c\u7684\u6570\u636e\u7c7b\u578b\u53d6\u6700\u5927\u503c\u3002\n</code></pre> <p>\uff082\uff09\u65b9\u6cd5</p> <pre><code>1\uff09list.append(obj) \u5728\u5217\u8868\u672b\u5c3e\u6dfb\u52a0\u65b0\u7684\u5bf9\u8c61\u3002list.append(\"ab\"),\u8868\u793a\u5728\u672b\u5c3e\u52a0\u5165\u5b57\u7b26\u4e32 \"ab\"\uff0c\u4f46 append \u4e00\u6b21\u53ea\u80fd\u589e\u52a0\u4e00\u4e2a\u5143\u7d20\uff1b\n2\uff09list.count(obj) \u7edf\u8ba1\u67d0\u4e2a\u5143\u7d20\u5728\u5217\u8868\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\uff1b\n3\uff09list.extend(seq) \u5728\u672b\u5c3e\u8ffd\u52a0\u53e6\u4e00\u4e2a\u5e8f\u5217\u3002\u8ffd\u52a0\u7684\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u4e0d\u80fd\u662f\u5355\u4e2a\u5143\u7d20\u3002\u6bd4\u5982 list.extend([123])\uff1b\n4\uff09list.index(obj) \u627e\u51fa\u67d0\u4e2a\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a\u7d22\u5f15\u4f4d\u7f6e\uff1b\n5\uff09list.insert(index,obj) \u5c06\u5bf9\u8c61\u63d2\u5165\u5230\u5217\u8868\uff08\u4f4d\u7f6e\uff0c\u5143\u7d20\uff09\uff1b\n6\uff09list.pop(index) \u5220\u9664\u67d0\u4e2a\u4f4d\u7f6e\u7684\u5143\u7d20\uff08\u9ed8\u8ba4\u5220\u9664\u6700\u540e\u4e00\u4e2a\uff09\u3002\u6bd4\u5982 list.pop(1) \u8868\u793a\u5220\u9664\u7d22\u5f151\u7684\u5143\u7d20\uff0c\u4e14\u8fd4\u56de\u5143\u7d20\u7684\u503c\uff1b\n7\uff09list.remove(obj) \u5220\u9664\u5217\u8868\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a\uff0c\u4fee\u6539\u5217\u8868\u672c\u8eab\uff1b\n8\uff09list.reverse() \u53cd\u5411\u6392\u5e8f\uff1b\n9\uff09list.sort() \u91cd\u65b0\u6392\u5e8f\uff1b\n10\uff09list.clear() \u6e05\u7a7a\u5217\u8868\uff1b\n11\uff09list.copy() \u590d\u5236\u5217\u8868\u3002\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#tuple","title":"\uff08\u516d\uff09\u5143\u7ec4\uff08tuple\uff09","text":"<p>\u5b9a\u4e49\uff1a\u4ee5\u5c0f\u62ec\u53f7\u62ec\u8d77\u6765\u7684\u6709\u5e8f\u5217\u8868\uff0c\u4f46\u4e0d\u80fd\u4fee\u6539\u3002</p> <pre><code>a = (2,3,4,5)\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#dict","title":"\uff08\u4e03\uff09\u5b57\u5178\uff08dict\uff09","text":"<p>1.\u5b9a\u4e49\uff1a\u5b57\u5178\u662f\u7528\u5927\u62ec\u53f7\u62ec\u8d77\u6765\uff0c\u7531\u952e\u503c\u5bf9\uff08key:value\uff09\u7ec4\u6210\u7684\uff0c\u4e14\u662f\u65e0\u5e8f\u7684\u3002</p> <p>2.key \u662f\u552f\u4e00\u7684\uff0c\u4e00\u822c\u8d4b\u503c\u4e3a string\uff0cvalue \u53ef\u4ee5\u662f\u4efb\u610f\u6570\u636e\u7c7b\u578b</p> <p>3.\u5e38\u7528\u64cd\u4f5c</p> <pre><code>\uff081\uff09dt[\"key\"] \u6839\u636e\u952e\u8bfb\u53d6\u503c\n\uff082\uff09dt[\"old_key\"]=\"new_value\" \u6839\u636e\u952e\u4fee\u6539\u503c\n\uff083\uff09dt[\"new_key\"]=\"new_value\" \u65b0\u589e\u952e\u503c\u5bf9\n\uff084\uff09len(dt) \u8fd4\u56de\u5143\u7d20\u7684\u91cf\uff08\u952e\u503c\u5bf9\uff09\n</code></pre> <p>4.dict\u5e38\u7528\u65b9\u6cd5</p> <pre><code>\uff081\uff09key in dict \u5224\u65ad\u952e\u662f\u5426\u5728\u5b57\u5178\u4e2d\n\uff082\uff09dict.items() \u8fd4\u56de\u5217\u8868\uff0c\u5217\u8868\u7531\u5143\u7ec4\u7ec4\u6210\uff0c\u6bcf\u4e2a\u5143\u7ec4\u7531\u4e00\u4e2a\u952e\u503c\u5bf9\u5c06\u952e\u548c\u503c\u62c6\u5206\u4e3a\u4e24\u4e2a\u5b57\u7b26\u4e32\u7ec4\u6210\u3002\n\uff083\uff09dict.keys() \u5c06\u6240\u6709\u7684\u952e\u7ec4\u6210\u4e00\u4e2a\u5217\u8868\u3002\n\uff084\uff09dict.values() \u5c06\u6240\u6709\u7684\u503c\u7ec4\u6210\u4e00\u4e2a\u5217\u8868\u3002\n\uff085\uff09dict1.update(dict2) \u5c06\u5b57\u51782\u4e2d\u7684\u952e\u503c\u5bf9\u6dfb\u52a0\u5230\u5b57\u51781\u4e2d\n\uff086\uff09dict.get(key,default=None) \u8fd4\u56de\u6307\u5b9a\u952e\u7684\u503c\uff0c\u5982\u679c\u503c\u4e0d\u5b58\u5728\uff0c\u8fd4\u56dedefault\u503c\u3002\u6bd4\u5982\uff1adict.get(\"name\",\"peter\") \u5982\u679c\u5b57\u5178\u4e2d\u6709name\u8fd9\u4e2a\u952e\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u5176\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u952e\uff0c\u5219\u8fd4\u56de\"peter\"\n\uff087\uff09dict.setdefault(key,default=None) \u548cget\u4e00\u6837\u4f1a\u8fd4\u56de\u6307\u5b9a\u952e\u7684\u503c\uff0c\u4f46\u82e5\u952e\u4e0d\u5728\u5b57\u5178\u4e2d\uff0c\u4f1a\u6dfb\u52a0\u6210\u4e3a\u65b0\u7684\u952e\u503c\u5bf9\u3002\u6bd4\u5982\uff1adict.setdefault(\"name\",\"peter\")\uff0c\u5982\u679c\u5b57\u5178\u4e2d\u6709name\u8fd9\u4e2a\u952e\uff0c\u5219\u8fd4\u56de\u5176\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u4f1a\u5c06\u5b9a\u4e49\u7684\u503c\uff0c\u6dfb\u52a0\u5230\u5b57\u5178\u4e2d\u3002\n\uff088\uff09dict.pop(key,default=None) \u5220\u9664\u952e\u5bf9\u5e94\u7684\u503c\uff0ckey\u4e0d\u5b58\u5728\u8fd4\u56dedefault\u503c\u3002\n\uff089\uff09dict.copy() \u6d45\u590d\u5236\n\uff0810\uff09dict.clear() \u6e05\u9664\u6240\u6709\u5143\u7d20\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u4e8c\u3001\u8fc7\u7a0b\u63a7\u5236","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\uff08\u4e00\uff09\u6761\u4ef6\u8bed\u53e5","text":"<p>1.\u53e5\u5f0f\uff1a</p> <pre><code>if \u6761\u4ef6\u5224\u65ad\uff1a\uff08\u7f29\u8fdb\u548c\u5192\u53f7\uff09\nprint(\"\u5b57\u7b26\u4e32\")\nelse:\nprint(\"\u5b57\u7b26\u4e32\")\n</code></pre> <p>2.else \u53ef\u4ee5\u4e0d\u8981\uff0c\u8bed\u6cd5\u4e0a\u6ca1\u6709\u95ee\u9898</p> <p>3.\u8fd0\u7b97\u7b26</p> <p>(1)  <code>&lt; , &lt;= , &gt; , &gt;= , == , !=</code></p> <p>(2\uff09<code>and , or , not , in , not in, is</code></p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_6","title":"\uff08\u4e8c\uff09\u5faa\u73af\u8bed\u53e5","text":"<p>1.while</p> <pre><code>while \u5224\u65ad\u6761\u4ef6\uff1a\n\u8bed\u53e5\nelse \uff1a\n\u8bed\u53e5\n</code></pre> <pre><code>break \u7ec8\u6b62\u5faa\u73af\u8bed\u53e5\n\ncontinue \u7ed3\u675f\u672c\u6b21\u5faa\u73af\uff0c\u7ee7\u7eed\u8fdb\u884c\u4e0b\u4e00\u8f6e\u5faa\u73af\u3002\n</code></pre> <p>2.for\u8bed\u53e5\uff08\u904d\u5386\u5e8f\u5217\u7684\u5143\u7d20\uff09</p> <pre><code>for i in [1,2,3,4]\uff1a\nprint(i)\n</code></pre> <ul> <li> <p>in \u540e\u9762\u53ef\u4ee5\u8ddf\u5143\u7ec4\u3001\u5217\u8868\u3001\u5b57\u7b26\u4e32\uff0c\u4f46\u8ddf\u5b57\u5178\u65f6\u53ea\u80fd\u53d6\u5230\u5b57\u5178\u4e2d\u7684\u952e\uff08key\uff09\u3002</p> </li> <li> <p>range(\u51fd\u6570)</p> </li> <li>range(3) \u8868\u793a\u4ece\u7d22\u5f150\uff0c\u53d6\u5230\u7d22\u5f152\uff08\u5f00\u533a\u95f4\uff09</li> <li>range(1,4) \u8868\u793a\u4ece\u7d22\u5f151\uff0c\u53d6\u5230\u7d22\u5f153</li> <li>range(1,10,2) \u8868\u793a\u4ece\u7d22\u5f151\uff0c\u53d6\u5230\u7d22\u5f1510\uff0c\u6b65\u957f\u4e3a2</li> </ul>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_7","title":"\u4e09\u3001\u51fd\u6570","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_8","title":"\uff08\u4e00\uff09\u5b9a\u4e49","text":"<p>\u51fd\u6570\u662f\u53ef\u91cd\u590d\u4f7f\u7528\u7684\uff0c\u5177\u6709\u4e00\u5b9a\u529f\u80fd\u7684\u4ee3\u7801\u6bb5\u3002</p> <p>def \u51fd\u6570\u540d\uff08\u53c2\u65701\uff0c\u53c2\u65702\uff0c\u00b7\u00b7\u00b7\u00b7\uff09</p> <p><code>python def add(a,b):     c = a + b     print(c)</code></p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_9","title":"\uff08\u4e8c\uff09\u8fd4\u56de\u503c","text":"<p>\u8c03\u7528\u51fd\u6570\u540e\uff0c\u5c06\u6267\u884c\u7ed3\u679c\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\u3002 <pre><code>def add(a,b):\nc = a + b\nreturn c\n</code></pre> &gt;&gt;x=add(1,2)  # \u8fd4\u56de\u4e00\u4e2ac\u7684\u503c\u8d4b\u7ed9x\uff0c\u5982\u679c\u8fd4\u56de\u503c\u6709\u591a\u4e2a\uff0c\u800c\u53d8\u91cf\u53ea\u67091\u4e2a\uff0c\u5219\u4f1a\u751f\u6210\u4e00\u4e2a\u5143\u7ec4\u3002\u4e5f\u53ef\u4ee5\u7528\u591a\u4e2a\u53d8\u91cf\u5bf9\u5e94\u591a\u4e2a\u8fd4\u56de\u503c\uff0c\u5373\u591a\u5143\u8d4b\u503c\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_10","title":"\uff08\u4e09\uff09\u53c2\u6570","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1\u3001\u4f4d\u7f6e\u53c2\u6570(\u5f62\u53c2)","text":"<p><pre><code>def func(name, age):\nprint(name, age)\n</code></pre> \u4f4d\u7f6e\u53c2\u6570\u65f6\u6839\u636e\u4f4d\u7f6e\u987a\u5e8f\u4f20\u5165\u51fd\u6570\uff0c\u8c03\u7528\u51fd\u6570\u65f6\u5fc5\u987b\u4e0e\u5b9a\u4e49\u65f6\u7684\u53c2\u6570\u6570\u91cf\u4e00\u81f4\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u9ed8\u8ba4\u53c2\u6570","text":"<ul> <li> <p>def func(name, age=18):      print(\"a\u672a\u88ab\u5b9a\u4e49\")  # \u53c2\u6570\u5728\u5b9a\u4e49\u7684\u65f6\u5019\u5c31\u8d4b\u503c\u7684</p> </li> <li> <p>\u9ed8\u8ba4\u53c2\u6570\u5728\u8c03\u7528\u7684\u65f6\u5019\u5982\u679c\u4e0d\u4f20\u5165\uff0c\u5219\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\uff0c\u5982\u679c\u7ed9\u4f20\u9012\u4e86\u53c2\u6570\uff0c\u5219\u503c\u4f1a\u88ab\u8986\u76d6\u3002</p> </li> </ul>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u53ef\u53d8\u53c2\u6570","text":"<p><pre><code>def func(*args):\nsum = 0\nfor n in args:\nsum = sum + n\nreturn sum\n</code></pre>   &gt;&gt;func(1,2,3,\u00b7\u00b7\u00b7)  \u4f20\u5165\u7684\u53c2\u6570\u6570\u91cf\u53ef\u53d8\uff0c\u4f1a\u81ea\u52a8\u7ec4\u88c5\u79f0\u4e00\u4e2a\u5143\u7ec4\uff0c\u5982\u679c\u4f20\u51650\u4e2a\u53c2\u6570\uff0c\u7ed3\u679c\u65f6\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5143\u7ec4\u3002</p> <ul> <li>\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u8c03\u7528\u7684\u65f6\u5019\u5728\u51fd\u6570\u62ec\u53f7\u5185\u52a0*\u53f7\uff08\u53c2\u6570\u89e3\u6784\uff09</li> </ul> <p>tp=\uff081\uff0c2\uff0c3\uff0c4\uff09</p> <p>resule = add(*tp)</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4\u3001\u5173\u952e\u5b57\u53c2\u6570\uff08\u952e\u548c\u503c\uff09","text":"<pre><code>def func(**kwargs):\nprint(kwargs)\n</code></pre> <p>&gt;&gt;func(name=\"peter\")   # \u7ed3\u679c\u662f\u6253\u5370\u4e00\u4e2a\u5b57\u5178{\"name\"\uff1a\"peter\"}</p> <ul> <li>\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u8c03\u7528\u7684\u65f6\u5019\u5728\u51fd\u6570\u62ec\u53f7\u5185\u52a0**</li> </ul> <p>&gt;&gt;dct = {\"eat1\":\"\u9178\u8fa3\u7c89\",\"eat2\":\"\u87ba\u72ee\u7c89\"}</p> <p>&gt;&gt;func(**dct)</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5","title":"5\u3001\u7ec4\u5408\u53c2\u6570","text":"<p>\u987a\u5e8f\u4e3a\u4f4d\u7f6e\u53c2\u6570\uff0c\u53ef\u53d8\u53c2\u6570\uff0c\u9ed8\u8ba4\u53c2\u6570\uff0c\u5173\u952e\u5b57\u53c2\u6570</p> <pre><code>def func(name, age, *args, gender=\u2019\u7537\u2019, **kwargs)\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#class","title":"\u56db\u3001\u7c7b\uff08class\uff09","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_11","title":"\uff08\u4e00\uff09\u7c7b\u7684\u5b9e\u4f8b","text":"<p>1.\u7c7b\u7684\u5b9e\u4f8b\u662f\u5bf9\u8c61\uff0c\u4e00\u4e2a\u5b9e\u4f8b\u5305\u542b\u5c5e\u6027\uff08\u6709\u4ec0\u4e48\uff09\u548c\u65b9\u6cd5\uff08\u80fd\u505a\u4ec0\u4e48\uff09\u3002</p> <p>2.\u7c7b\u7684\u58f0\u660e\uff1aclass \u7c7b\u540d():  \u7c7b\u540d\u5355\u8bcd\u9996\u5b57\u6bcd\u5927\u5199\uff0c\u5982\u679c\u662f\u591a\u4e2a\u5355\u8bcd\uff0c\u5355\u8bcd\u4e0e\u5355\u8bcd\u4e4b\u95f4\u4e0d\u7a7a\u683c\uff0c\u76f4\u63a5\u6328\u7740\u5199\uff0c\u4f46\u6bcf\u4e2a\u5355\u8bcd\u9996\u5b57\u6bcd\u9700\u8981\u5927\u5199\u3002</p> <p>3.\u5b9a\u4e49\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5</p> <pre><code>class Person():\ndef __init__ (self, name, age):\nself.name = name\nself.age = age\ndef run(self, food):\nprint(\"%s\u90fd%d\u5c81\u4e86,\u5929\u5929\u5403%s\" % \uff08self.name, self.age,food\uff09)\n</code></pre> <p>\uff082\uff09\u65b9\u6cd5\u8c03\u65b9\u6cd5\u6216\u65b9\u6cd5\u8c03\u5c5e\u6027\u7b49\uff0c\u5185\u90e8\u8c03\u7528\u90fd\u8981\u52a0self\u3002  \u2461</p> <p>\uff083\uff09\u8c03\u7528\u5916\u90e8\u53d8\u91cf\u65f6\uff0c\u4e0d\u52a0self\u3002</p> <p>\uff084\uff09\u8c03\u7528</p> <pre><code>\u2460 \u5b9e\u4f8b\u5316\uff1ax = Person(\"peter\",18)\n\u2461 print(x.name) \u8c03\u7528\u7c7b\u7684\u5c5e\u6027\n\u2462 print(x.run(\"\u8089\"))\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_12","title":"\uff08\u4e8c\uff09\u7ee7\u627f","text":"<p>\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5</p> <pre><code>class Student(Person):  #\u7ee7\u627f\u65f6\u62ec\u53f7\u5185\u76f4\u63a5\u5199\u7236\u7c7b\u7684\u7c7b\u540d\npass #\u5b8c\u5168\u7ee7\u627f\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\n</code></pre> <pre><code>class Student(Person):\ndef __init__(self,name,age,cno)\nPerson.__init__(self,name,age)  \nself.cno = cno #\u5728\u7236\u7c7b\u7684\u57fa\u7840\u4e0a\u65b0\u589e\u5c5e\u6027\uff0c\u9700\u8981\u5148\u5c06\u7236\u7c7b\u6307\u5b9a\u8fdb\u6765\u3002\u5426\u5219\u65b0\u589e\u5c5e\u6027\u4f1a\u5c06\u7236\u7c7b\u7684\u5c5e\u6027\u8986\u76d6\u3002\ndef run(self):\nr = Person.run(self)\nreturn r  # \u5728\u7236\u7c7b\u7684\u57fa\u7840\u4e0a\u65b0\u589e\u65b9\u6cd5\uff0c\u9700\u8981\u5148\u6307\u5b9a\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\n</code></pre> <p>\u65b9\u6cd5\u91cd\u65b0\u5b9a\u4e49\u540e\uff0c\u8c03\u7528\u7684\u65f6\u5019\uff0c\u9ed8\u8ba4\u5148\u53bb\u8c03\u7528\u5b50\u7c7b\u7684\u65b9\u6cd5\uff0c\u7136\u540e\u518d\u53bb\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_13","title":"\uff08\u4e09\uff09\u8bbf\u95ee\u9650\u5236","text":"<p>1\uff0e\u8bbf\u95ee\u9650\u5236\u53ef\u4ee5\u4f7f\uff0c\u7c7b\u5185\u90e8\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u4e0d\u80fd\u5916\u90e8\u968f\u4fbf\u8bbf\u95ee\u3002\u7528\u6cd5\u662f\u5728\u5c5e\u6027\u6216\u65b9\u6cd5\u524d\u9762\u52a0\u53cc\u4e0b\u5212\u7ebf\uff0c\u8868\u793a\u79c1\u6709\u5c5e\u6027\u3002</p> <p>2\uff0e\u8bbf\u95ee\u9650\u5236\uff0c\u4e0d\u80fd\u88ab\u5916\u90e8\u968f\u4fbf\u8bbf\u95ee\uff0c\u4f46\u53ef\u4ee5\u88ab\u5185\u90e8\u8c03\u7528\uff0c\u79c1\u6709\u5c5e\u6027\u53ef\u4ee5\u7528\u65b9\u6cd5\u8c03\u7528\uff0c\u79c1\u6709\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5b9a\u4e49\u5176\u4ed6\u65b9\u6cd5\u8c03\u7528\u3002</p> <pre><code>class Person():\ndef  __init__(self,name):\nself.__name = name\ndef  __eat(self,food):\nreturn \"%s\u7231\u4e0a\u5403%s\"% (self.__name,food)\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_14","title":"\uff08\u56db\uff09\u7f16\u7801\u89c4\u8303","text":"<p>1\uff0e\u7f29\u8fdb\uff0c4\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\uff0c\u7a7a\u683c\u548ctab\u4e0d\u80fd\u6df7\u7528\uff08tab\u4ec5\u5728\u7f16\u8f91\u5668\u4e2d\u53ef\u4f7f\u7528\uff09\u3002</p> <p>2\uff0e\u7c7b\u540d\u7684\u5355\u8bcd\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u3002</p> <p>3\uff0e\u51fd\u6570\u548c\u7c7b\u7684\u5c5e\u6027\u547d\u540d\u4ee5\u5c0f\u5199\uff0c\u7528\u4e0b\u5212\u7ebf\u8fde\u63a5</p> <p>4\uff0e\u6240\u6709\u7684\u547d\u540d\u90fd\u5e94\u91c7\u7528\u6709\u610f\u4e49\u7684\u82f1\u6587\u5355\u8bcd\uff0c\u591a\u5355\u8bcd\u7531\u4e0b\u5212\u7ebf\u8fde\u63a5\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_15","title":"\u4e94\u3001\u6a21\u5757","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_16","title":"\uff08\u4e00\uff09\u5f15\u5165\u6a21\u5757","text":"<p>\uff081\uff09import \u540e\u9762\u76f4\u63a5\u8ddf\u6a21\u5757\u540d\u6216\u7c7b\u6216\u51fd\u6570\u3002</p> <pre><code>import time\n</code></pre> <p>\uff082\uff09from \u8def\u5f84 import \u7c7b\u6216\u51fd\u6570 #\u8def\u5f84\u6700\u597d\u7528\u7edd\u5bf9\u8def\u5f84\u3002</p> <pre><code>from model.A import add\n</code></pre>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_17","title":"\uff08\u4e8c\uff09\u5b89\u88c5\u4e09\u65b9\u5e93","text":"<p>\uff081\uff09sudo pip3  install  pymysql(\u4e09\u65b9\u5e93\u540d)  # \u5728\u547d\u4ee4\u884c\u76f4\u63a5\u8f93\u5165\u5373\u53ef\u3002</p> <p>\uff082\uff09\u5728 pycharm \u91cc\u9762\uff0c\u70b9\u51fb file\uff0c\u9009\u62e9 setting\uff0c\u9009\u62e9 Project\uff0c\u9009\u62e9 Project Interpreter\uff0c\u5728\u53f3\u4e0a\u89d2\u70b9 + \u53f7\uff0c\u8f93\u5165\u5e93\u540d\u5373\u53ef\u5b89\u88c5\u3002</p> <p>\uff083\uff09\u5982\u679c\u662f\u9700\u8981\u4e0b\u8f7d\u7684\u4e09\u65b9\u5e93\uff0c\u4e0b\u8f7d\u540e\u67e5\u770b\u6587\u4ef6\u5305\u91cc\u9762\u7684 readme \u6587\u4ef6\uff0c\u6839\u636e\u63cf\u8ff0\u8fdb\u884c\u5b89\u88c5\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_18","title":"\u516d\u3001\u5f02\u5e38\u5904\u7406","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#try","title":"\uff08\u4e00\uff09try\u8bed\u53e5","text":"<p>\uff081\uff09try ... except...except \u8868\u793a\u5f53\u7a0b\u5e8f\u8fd0\u884c\u9519\u8bef\u540e\uff0c\u88ab except \u6355\u6349\u5230\uff0c\u8fd4\u56de\u4e00\u4e2a\u53ef\u5b9a\u4e49\u7684\u4fe1\u606f\uff0c\u4e14\u4e0d\u4f1a\u5f71\u54cd\u540e\u7eed\u8bed\u53e5\u7684\u6267\u884c\u3002\u6bcf\u4e2a except \u540e\u9762\u8ddf\u4e0d\u540c\u7684\u8fd4\u56de\u4fe1\u606f\u3002 <pre><code>try:\n    print(a)\n    10/0\nexcept NameError:\n    print(\"a\u672a\u88ab\u5b9a\u4e49\")\nexcept ....\n</code></pre></p> <p>\uff082\uff09try ...except...finally \u540c\uff081\uff09\u4e00\u6837\uff0c\u4f46 finally \u540e\u7684\u8bed\u53e5\uff0c\u65e0\u8bba\u662f\u5426\u53d1\u751f\u5f02\u5e38\uff0c\u90fd\u4f1a\u6267\u884c\u3002</p> <p>\uff083\uff09try...except...else \u540c\uff081\uff09\u4e00\u6837\uff0c\u4f46 else  \u540e\u7684\u8bed\u53e5\uff0c\u662f\u5728\u6ca1\u6709\u53d1\u751f\u5f02\u5e38\u7684\u60c5\u51b5\u624d\u4f1a\u6267\u884c\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_19","title":"\uff08\u4e8c\uff09\u629b\u51fa\u5f02\u5e38","text":"<p>\u2460 raise NameError(\"\u8fd9\u662f\u4e00\u4e2a\u540d\u79f0\u9519\u8bef\")</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_20","title":"\uff08\u4e09\uff09\u5e38\u89c1\u7684\u5f02\u5e38","text":"<p>\u2460 AssertionError  assert\uff08\u65ad\u8a00\uff09\u8bed\u53e5\u5931\u8d25\u3002</p> <p>\u2461 AttributeError \u8bd5\u56fe\u8bbf\u95ee\u4e00\u4e2a\u5bf9\u8c61\u6ca1\u6709\u7684\u5c5e\u6027\uff0c\u6bd4\u5982foo.x\uff0c\u4f46\u662ffoo\u6ca1\u6709x\u8fd9\u4e2a\u5c5e\u6027\u3002</p> <p>\u2462 IOError \u8f93\u5165/\u8f93\u51fa\u5f02\u5e38\uff0c\u57fa\u672c\u4e0a\u662f\u65e0\u6cd5\u6253\u5f00\u6587\u4ef6\u3002</p> <p>\u2463 ImportError \u65e0\u6cd5\u5f15\u5165\u6a21\u5757\u6216\u8005\u5305\uff0c\u57fa\u672c\u4e0a\u662f\u8def\u5f84\u95ee\u9898\u3002</p> <p>\u2464 IndentationError \u8bed\u6cd5\u9519\u8bef\uff0c\u4ee3\u7801\u6ca1\u6709\u6b63\u786e\u5bf9\u9f50\u3002</p> <p>\u2465 IndexError \u4e0b\u6807\u7d22\u5f15\u8d85\u51fa\u5e8f\u5217\u8fb9\u754c\uff0c\u6bd4\u5982\u5f53x\u53ea\u6709\u4e09\u4e2a\u5143\u7d20\uff0c\u5374\u8bd5\u56fe\u8bbf\u95eex[5]\u3002</p> <p>\u2466 KeyError \u8bd5\u56fe\u8bbf\u95ee\u5b57\u5178\u91cc\u4e0d\u5b58\u5728\u7684\u952e\u3002</p> <p>\u2467 Kerboardinterrupt  Ctrl+C\u88ab\u6309\u4e0b\uff0c\u4e3b\u8981\u9488\u5bf9\u65e0\u9650\u5faa\u73af\u3002</p> <p>\u2468 NameError \u4f7f\u7528\u4e00\u4e2a\u8fd8\u672a\u88ab\u8d4b\u503c\u4e88\u5bf9\u8c61\u7684\u53d8\u91cf\u3002</p> <p>\u2469 SyntaxError \u4ee3\u7801\u975e\u6cd5\uff0c\u4ee3\u7801\u4e0d\u80fd\u89e3\u91ca\u3002</p> <p>\u246a TypeError \u4f20\u5165\u5bf9\u8c61\u7c7b\u578b\u4e0e\u8981\u6c42\u7684\u4e0d\u7b26\u3002</p> <p>\u246b UnboundLocalError \u8bd5\u56fe\u8bbf\u95ee\u4e00\u4e2a\u8fd8\u672a\u88ab\u8bbe\u7f6e\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u57fa\u672c\u4e0a\u662f\u7531\u4e8e\u53e6\u4e00\u4e2a\u540c\u540d\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u5bfc\u81f4\u4f60\u4ee5\u4e3a\u6b63\u5728\u8bbf\u95ee\u5b83\u3002</p> <p>\u246c ValueError \u4f20\u5165\u4e00\u4e2a\u8c03\u7528\u8005\u4e0d\u671f\u671b\u7684\u503c\uff0c\u5373\u4f7f\u503c\u7684\u7c7b\u578b\u662f\u6b63\u786e\u7684\u3002</p> <p>\u246d FileNotFoundError \u8bd5\u56fe\u6253\u5f00\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_21","title":"\u4e03\u3001\u6587\u4ef6\u8bfb\u5199","text":""},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#r","title":"\uff08\u4e00\uff09\u4ee5\u8bfb\u7684\u5f62\u5f0f\u6253\u5f00\uff0c\u5e76\u80fd\u5199\uff08r+\uff09","text":"<p>1.</p> <pre><code>&gt;&gt; f = open(\"test.txt\",\"r+\")\n&gt;&gt; f.write(\"xxx\")\n&gt;&gt; f.flush()\n&gt;&gt; f.close()\n</code></pre> <p>2.\u5149\u6807\u4f1a\u653e\u5728\u6587\u4ef6\u5f00\u5934\uff0c\u8f93\u5165\u7684\u8f93\u5165\u4f1a\u8986\u76d6\u5f00\u5934</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#w","title":"\uff08\u4e8c\uff09\u4ee5\u5199\u7684\u5f62\u5f0f\u6253\u5f00\uff0c\u5e76\u80fd\u8bfb(w+)","text":"<p>1.</p> <pre><code>&gt;&gt; f = open(\"test.txt\",\"w+\")\n&gt;&gt; data = f.read()\n&gt;&gt; print(date)\n</code></pre> <p>2.\u82e5\u6587\u4ef6\u5df2\u5b58\u5728\u4f1a\u5c06\u5176\u8986\u76d6\uff0c\u82e5\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u4f1a\u65b0\u5efa\u6587\u4ef6\u3002</p>"},{"location":"Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#a","title":"\uff08\u4e09\uff09\u8ffd\u52a0\u6a21\u5f0f\uff08a+\uff09","text":"<p>1.</p> <pre><code>&gt;&gt; f = open(\"test.txt\",\"a+\")\n</code></pre> <p>2.\u5149\u6807\u5728\u6587\u4ef6\u7684\u672b\u5c3e\uff0c\u5199\u5165\u4f1a\u8ffd\u52a0\u5230\u672b\u5c3e\uff0c\u82e5\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u4f1a\u65b0\u5efa\u6587\u4ef6\u3002</p> <pre><code>with open(\"test.txt\",\"a+\",encoding=\"utf-8\") as f:\nf.write(\"\u6211\u662f\u4e2d\u6587\")\nf.flush()\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/","title":"Python\u73af\u5883\u4e0e\u4f9d\u8d56\u7ba1\u7406","text":"<p>Python\u6709\u4e00\u5927\u7279\u70b9\uff0c\u5373\u5177\u6709\u5f3a\u5927\u7684\u6807\u51c6\u5e93\u548c\u7b2c\u4e09\u65b9\u5e93\u3002\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u7528\u5230\u7b2c\u4e09\u65b9\u5e93\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u5b89\u88c5\u548c\u7ba1\u7406\u3002\u57fa\u4e8e\u4e00\u5b9a\u7684\u5de5\u5177\u94fe\uff0cPython\u4e5f\u80fd\u5199\u51fa\u4f18\u96c5\u6807\u51c6\u7684\u9879\u76ee\u4ee3\u7801\uff0c\u5c06\u4f9d\u8d56\u7ba1\u7406\u73a9\u7684\u660e\u660e\u767d\u767d\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pip","title":"pip","text":"<p>pip \u662f Python \u6807\u51c6\u5e93\u7684\u4e00\u4e2a\u5305\uff0c\u4ece Python3.4 \u5f00\u59cb pip \u5df2\u7ecf\u5185\u7f6e\u5728 Python \u4e2d\u3002Python \u6709\u6210\u5343\u4e0a\u4e07\u7684\u5b9d\u85cf\u5e93\uff0c\u5b83\u4eec\u88ab\u653e\u7f6e\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u4ed3\u5e93 <code>pypi</code>\u3002pip \u5728\u8fd9\u4e2a\u4ed3\u5e93\u4e2d\u5145\u5f53\u7740\u7ba1\u7406\u5458\u7684\u89d2\u8272\uff0c\u53ef\u4ee5\u5c06\u9700\u8981\u7684\u5e93\u4ece Pypi \u53d6\u51fa\u6765\uff0c\u5b89\u88c5\u5e76\u7ba1\u7406\u8fd9\u4e9b\u5e93\u3002</p> <p>\u7531\u4e8e\u5927\u591a\u6570\u7684\u7b2c\u4e09\u65b9\u5e93\u90fd\u53d1\u5e03\u5728 pypi\uff0c\u6240\u4ee5\u901a\u8fc7pip\u5c31\u53ef\u4ee5\u5b89\u88c595%\u4ee5\u4e0a\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u4f53\u91cf\u5728\u5305\u5b89\u88c5\u8fd9\u65b9\u9762\u662f\u5927\u54e5\u7ea7\u522b\u3002pip\u8fd8\u6709\u4e00\u5927\u4f18\u52bf\u5c31\u662f\u5728\u5b89\u88c5\u5e93\u7684\u540c\u65f6\u4f1a\u628a\u5e93\u6240\u9700\u8981\u7684\u4f9d\u8d56\u4e5f\u4e00\u5e76\u8fdb\u884c\u5b89\u88c5\u3002\u7efc\u4e0a\u6240\u8ff0\uff0c\u5728\u5355\u4e00\u7684\u9879\u76ee\u73af\u5883\u4e2d\u63a8\u8350\u4f7f\u7528\u5b83\uff0c\u7b80\u5355\u4fbf\u6377\u3002</p> <p>\u5982\u679c\u6709\u4e24\u4e2a\u53ca\u4ee5\u4e0a\u7684\u9879\u76ee\u73af\u5883\u5c31\u4e0d\u5efa\u8bae\u53bb\u4f7f\u7528pip\uff0c\u4f1a\u51fa\u73b0\u73af\u5883\u51b2\u7a81\u4e14\u96be\u4ee5\u7ba1\u7406\u3002\u5982\u679c\u4e00\u5b9a\u8981\u4f7f\u7528\u90a3\u4e48\u5c31\u9700\u8981\u642d\u914d\u4e0a\u73af\u5883\u7ba1\u7406\u5de5\u5177\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_1","title":"\u5b89\u88c5","text":"<p>\u5982\u679c Python \u73af\u5883\u6ca1\u6709 pip \u5de5\u5177\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u6cd5\u8fdb\u884c\u5b89\u88c5\u3002</p> <p><pre><code>sudo apt-get install python-pip\n</code></pre> \u8fd8\u6709\u79cd\u65b9\u6cd5\uff1a</p> <p>\u5728 https://pypi.org/project/pip/#files \u4e2d\u4e0b\u8f7dpip\u5b89\u88c5\u6587\u4ef6\uff0c\u7136\u540e\u89e3\u538b\u5230 <code>python scripts</code> \u76ee\u5f55\u4e2d\uff0c\u6267\u884c <code>python setup.py install</code> \u547d\u4ee4\u5b89\u88c5\u5373\u53ef\uff1b</p> <p>\u8bb8\u591a\u4eba\u62b1\u6028 pip \u547d\u4ee4\u5b89\u88c5 Python \u5e93\u5f88\u6162\u6216\u8005\u662f\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u5931\u8d25\uff0c\u5176\u5b9e\u662f pip \u6e90\u7684\u95ee\u9898\uff0c\u5c06\u5176\u66f4\u6362\u4e3a\u6211\u4eec\u56fd\u5185\u6e90\u5373\u53ef\uff1b</p> <p>1.\u4e34\u65f6\u8bbe\u5b9a\uff1a</p> <p><pre><code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple some-package matplotlib\n</code></pre> 2.\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\uff1a</p> <p><pre><code>pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> \u8bbe\u4e3a\u9ed8\u8ba4\u540e\uff0c\u4ee5\u540e\u5b89\u88c5\u5e93\u90fd\u662f\u4ece\u6e05\u534e\u6e90\u4e0b\u8f7d\uff0c\u800c\u4e14\u65e0\u9700\u518d\u52a0\u955c\u50cf\u6e90\u7f51\u5740\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_2","title":"\u5feb\u901f\u914d\u7f6e\u73af\u5883","text":"<p>\u901a\u8fc7 pip list \u547d\u4ee4\u53ef\u4ee5\u9884\u89c8\u5f53\u524d\u73af\u5883\u4e0b\u7684\u4f9d\u8d56\u5305\uff1a</p> <p><pre><code>:~$ pip list\nPackage\u00a0 \u00a0 \u00a0 \u00a0Version\u00a0\n------------- --------\nasn1crypto\u00a0 \u00a0 0.24.0\u00a0\u00a0\ncolorama\u00a0 \u00a0 \u00a0 0.3.7\u00a0 \u00a0\nconfigparser\u00a0 3.5.0b2\u00a0\ncryptography\u00a0 2.6.1\u00a0 \u00a0\ndecorator\u00a0 \u00a0 \u00a04.3.0\n</code></pre> \u901a\u8fc7 pip install package_name \u547d\u4ee4\u5b89\u88c5 Python \u5305\uff1a \u4ee5 requests \u5305\u4e3e\u4f8b\u8bf4\u660e\uff1a</p> <p><pre><code>~$ pip install requests\nCollecting requests\n......\nSuccessfully installed certifi-2021.10.8 chardet-4.0.0 idna-2.10 requests-2.27.1 urllib3-1.26.16\n</code></pre> \u8fd8\u53ef\u4ee5\u901a\u8fc7pip install requests==&lt;\u7248\u672c\u53f7&gt;\u6765\u6307\u5b9a\u5305\u7684\u7248\u672c\u53f7\u8fdb\u884c\u5b89\u88c5\uff1a <pre><code>pip install requests==2.27.1\n</code></pre> \u5982\u679c\u6211\u4eec\u60f3\u5c06\u5b89\u88c5\u597d\u7684\u8fd9\u4e9b\u5305\u53ca\u4f9d\u8d56\u4fe1\u606f\u5168\u90e8\u8bb0\u5f55\u4e0b\u6765\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7pip freeze\u547d\u4ee4\u5c06\u4fe1\u606f\u8bb0  \u5728requirements.txt\u4e2d\u3002 <pre><code>pip freeze &gt; requirements.txt\n</code></pre> \u5f53\u6211\u4eec\u9700\u8981\u5728\u4e00\u4e2a\u65b0\u7684python\u73af\u5883\u4e2d\u5f15\u5165\u5f53\u524d\u7684\u4f9d\u8d56\u65f6\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u3002 <pre><code>pip  install -r requirements.txt\n</code></pre> \u8fd8\u53ef\u4ee5\u901a\u8fc7 pipreqs \u8fdb\u884c\u5bfc\u5305\u64cd\u4f5c\uff1a <pre><code>~$ pip install pipreqs\n~$ pipreqs ./  \u6b64\u547d\u4ee4\u4e5f\u662f\u751f\u6210\u4e00\u4e2arequirements.txt\u6587\u4ef6\u5728\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e0b\n</code></pre> \u5982\u679c\u73af\u5883\u4e2d\u5b58\u5728 requirements.txt \u6587\u4ef6\uff0c\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5bfc\u51fa requirements.txt \u6587\u4ef6\uff1a <pre><code>pipreqs ./ --encoding=utf-8 --force\n</code></pre> \u6ce8\u610f\u53ef\u80fd\u5728\u4f7f\u7528\u65f6\u4f1a\u53d1\u73b0\uff1a <pre><code>~$ pipreqs ./\nTraceback (most recent call last):\n\u00a0 File \"/home/uos/.local/bin/pipreqs\", line 6, in &lt;module&gt;\n\u00a0 \u00a0 from pipreqs.pipreqs import main\n\u00a0 File \"/home/uos/.local/lib/python2.7/site-packages/pipreqs/pipreqs.py\", line 51, in &lt;module&gt;\n\u00a0 \u00a0 from pipreqs import __version__\nImportError: cannot import name __version__\n</code></pre> \u62a5\u9519\u4e86\u600e\u4e48\u529e\uff1f</p> <p>\u4e0d\u8981\u614c\u5f20\uff0c\u5176\u5b9e\u8fd9\u662f\u56e0\u4e3a\u6b64\u73af\u5883\u4e0b\u7248\u672c\u4e0d\u53ef\u7528\uff0c\u6362\u4e2a\u7248\u672c\u5c31\u597d\u5566\uff01</p> <pre><code>~$\u00a0pip install pipreqs==100\nCollecting pipreqs==100\nCould not find a version that satisfies the requirement pipreqs==100 (from versions: 0.1.3, 0.1.4, 0.1.5, 0.1.6, 0.1.7, 0.1.8, 0.1.9, 0.2.0, 0.2.1, 0.2.2, 0.2.3, 0.2.4, 0.2.5, 0.2.7, 0.2.8, 0.2.9, 0.3.0, 0.3.1, 0.3.2, 0.3.3, 0.3.4, 0.3.5, 0.3.6, \n0.3.7, 0.3.8, 0.3.9, 0.4.0, 0.4.1, 0.4.2, 0.4.3, 0.4.4, 0.4.5, 0.4.6, 0.4.7, 0.4.8, 0.4.9, 0.4.10, 0.4.11)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u00a0\nNo matching distribution found for pipreqs==100\n\u8fd9\u91cc\u5f88\u591a\u7248\u672c\uff0c\u53ef\u4ee5\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u672a\u5b89\u88c5\u7684\uff0c\u5efa\u8bae\u4e0d\u8981\u88c5\u592a\u65e7\u7684\n~$ pip install pipreqs==0.4.1\n~$ pipreqs --help \u67e5\u770b\u6709\u6ca1\u6709\u62a5\u9519\uff0c\u6ca1\u6709\u62a5\u9519\u5c31ok\n\u63a5\u4e0b\u6765\u6b63\u5e38\u64cd\u4f5c\u5c31\u4e0d\u4f1a\u62a5\u9519\u5566\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_3","title":"\u660e\u786e\u73af\u5883\u4f9d\u8d56","text":"<p>pip list \u548c pip freeze \u6253\u5370\u51fa\u6765\u7684\u4f9d\u8d56\u90fd\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u65e0\u6cd5\u660e\u786e\u4f9d\u8d56\u5173\u7cfb\u3002</p> <p>\u5f53\u6211\u4eec\u60f3\u6e05\u7406\u67d0\u4e00\u4e2a\u5305\u65f6\uff0c\u4e0d\u77e5\u9053\u54ea\u4e2a\u662f\u76f4\u63a5\u4f9d\u8d56\u54ea\u4e2a\u662f\u95f4\u63a5\u4f9d\u8d56\u3002\u5bfc\u81f4\u73af\u5883\u6e05\u7406\u4e0d\u5e72\u51c0\u6216\u8005\u6e05\u7406\u4e86\u4e0d\u8be5\u6e05\u9664\u7684\u4f9d\u8d56\u3002</p> <p>\u8fd9\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528 pipdeptree \u6765\u7ba1\u7406\u4f9d\u8d56\u6811\uff1a</p> <p><pre><code>~$ pip install pipdeptree\n......\n~$ pipdeptree\n...\npipreqs==0.4.1\n\u00a0 - docopt [required: Any, installed: 0.6.2]\n\u00a0 - yarg [required: Any, installed: 0.1.9]\n\u00a0 \u00a0 - requests [required: Any, installed: 2.27.1]\n\u00a0 \u00a0 \u00a0 - certifi [required: &gt;=2017.4.17, installed: 2021.10.8]\n\u00a0 \u00a0 \u00a0 - chardet [required: &gt;=3.0.2,&lt;5, installed: 4.0.0]\n\u00a0 \u00a0 \u00a0 - idna [required: &gt;=2.5,&lt;3, installed: 2.10]\n\u00a0 \u00a0 \u00a0 - urllib3 [required: &gt;=1.21.1,&lt;1.27, installed: 1.26.16]\n...\n</code></pre> \u8fd9\u6837\u6211\u4eec\u5c31\u6e05\u695a\u7684\u77e5\u9053\u4f9d\u8d56\u76f4\u63a5\u7684\u5173\u7cfb\uff0c\u5728\u4f9d\u8d56\u6e05\u7406\u65f6\u5c31\u53ef\u4ee5\u907f\u514d\u51fa\u73b0\u95ee\u9898\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_4","title":"\u73af\u5883\u4f9d\u8d56\u6cbb\u7406","text":"<p>\u5982\u679c\u8bf4\u6211\u4eec\u60f3\u5378\u8f7d requests \u5305\uff0c\u76f4\u63a5\u4f7f\u7528 pip uninstall requests \u547d\u4ee4\u4f60\u4f1a\u53d1\u73b0\u600e\u4e48\u5378\u4e0d\u5e72\u51c0\uff1f</p> <p><pre><code>:~$ pipdeptree\nsetuptools==40.8.0\nsix==1.12.0\nwheel==0.32.3\nyarg==0.1.9\n\u00a0 - requests [required: Any, installed: 2.27.1]\n\u00a0 \u00a0 - certifi [required: &gt;=2017.4.17, installed: 2021.10.8]\n\u00a0 \u00a0 - chardet [required: &gt;=3.0.2,&lt;5, installed: 4.0.0]\n\u00a0 \u00a0 - idna [required: &gt;=2.5,&lt;3, installed: 2.10]\n\u00a0 \u00a0 - urllib3 [required: &gt;=1.21.1,&lt;1.27, installed: 1.26.16]\n:~$ pip uninstall requests\n:~$ pipdeptree\nsetuptools==40.8.0\nsix==1.12.0\nurllib3==1.26.16\nwheel==0.32.3\nyarg==0.1.9\n\u00a0 - requests [required: Any, installed: 2.21.0]\n\u53d1\u73b0\u53ea\u662f\u5355\u7eaf\u7684\u5378\u8f7d\u4e86requests\uff0c\u5b83\u4f9d\u8d56\u7684\u5305\u5e76\u6ca1\u6709\u88ab\u5378\u8f7d\uff01\n</code></pre> \u90a3\u4e48\u63a8\u8350\u4e00\u4e2a\u5de5\u5177 pip-autoremove \u6765\u505a\u8fd9\u4ef6\u4e8b\u60c5\uff0c\u4e0b\u9762\u7528\u8fd9\u4e2a\u5de5\u5177\u6765\u8bd5\u8bd5\uff1a <pre><code>~$ pip install pip-autoremove\n...\n~$ pip-autoremove requests -y\n...\n:~$ pipdeptree\nsix==1.12.0\nwheel==0.32.3\nyarg==0.1.9\n\u00a0 - requests [required: Any, installed: 2.21.0]\n</code></pre> \u4f60\u4f1a\u53d1\u73b0\u975e\u5e38\u597d\u7528\u54c8\uff0c\u5b83\u4f1a\u68c0\u7d22\u5230 requests\u5305 \u548c\u5b83\u7684\u76f8\u5173\u4f9d\u8d56\uff0c\u7136\u540e\u5168\u90e8\u5378\u8f7d\uff0c\u53ef\u4ee5\u8bf4\u662f\u975e\u5e38\u5e72\u51c0\uff01</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_5","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>pip install \u4e0e python install \u533a\u522b</p> <p>\u4ee5 requests \u4e3a\u4f8b\uff1a</p> <ul> <li> <p>\u5f53\u6211\u4eec\u7528 pip install requests \u5b89\u88c5 requests \u6a21\u5757\uff0c\u5219\u4f1a\u628a requests \u4f9d\u8d56\u7684\u5176\u4ed6\u5e93\u90fd\u5b89\u88c5\u4e0a\uff0c\u4e0d\u9700\u8981\u5728\u53bb\u8d39\u529b\u5b89\u88c5\u4f9d\u8d56\u7684\u5e93\u4e86\u3002</p> </li> <li> <p>\u5f53\u6211\u4eec\u4f7f\u7528 pip setup.py install \u5b89\u88c5 requests \u6a21\u5757\uff0c\u9700\u8981\u53bb\u624b\u52a8\u5b89\u88c5\u7b2c\u4e09\u65b9\u4f9d\u8d56\uff0c\u5426\u5219\u5728 import requests \u65f6\u4f1a\u51fa\u73b0\u62a5\u9519\u3002</p> </li> </ul>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#conda","title":"conda","text":"<p>conda\u662f\u4e00\u4e2a\u652f\u6301\u591a\u8bed\u8a00\u7684\u5305\u3001\u4f9d\u8d56\u548c\u73af\u5883\u7ba1\u7406\u5de5\u5177\uff0c\u5b83\u4e0d\u4ec5\u80fd\u7ba1\u7406\u5305\uff0c\u8fd8\u53ef\u4ee5\u9694\u79bb\u548c\u7ba1\u7406\u4e0d\u540cPython\u7248\u672c\u7684\u73af\u5883\uff0c\u7c7b\u4f3c\u4e8e\u7ba1\u7406node.js\u73af\u5883\u7684nvm\u5de5\u5177\u3002</p> <p>conda\u5b98\u65b9\u4e00\u5171\u6709\u4e24\u4e2a\u53d1\u884c\u7248anaconda\u548cminiconda\uff0canaconda\u76f8\u6bd4miniconda\u4f53\u79ef\u66f4\u5927\uff0c\u9884\u88c5\u4e86\u8bb8\u591a\u79d1\u5b66\u8ba1\u7b97\u7684\u5e93\uff0c\u5f88\u591a\u4e1c\u897f\u672a\u5fc5\u4f1a\u7528\u7684\u5230\uff0c\u6240\u4ee5\u5efa\u8bae\u4f7f\u7528miniconda\u3002</p> <p>\u5bf9\u4e8e\u8de8\u8bed\u8a00\u7684\u6216\u8005\u662f\u672c\u8eab\u5c31\u6574\u5408\u4e86\u5404\u79cd\u4f9d\u8d56\u7684\u73af\u5883(\u6bd4\u5982tenserflow)\uff0c\u518d\u8003\u8651\u4f7f\u7528conda\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#miniconda","title":"\u5b89\u88c5miniconda","text":"<p>1.\u9996\u5148\u4e0b\u8f7dminiconda\u7684\u5b89\u88c5\u811a\u672c</p> <pre><code>[https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh](https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh)\n</code></pre> <p>2.\u6267\u884c\u5b89\u88c5\u811a\u672c</p> <p>3.\u4e00\u76f4\u56de\u8f66\u7b49\u5230\u51fa\u73b0\u5982\u4e0b\u63d0\u793a\u5e76\u8f93\u5165yes\u56de\u8f66</p> <p><pre><code>Do you accept the license terms? [yes|no]\n[no] &gt;&gt;&gt;\u00a0\nPlease answer 'yes' or 'no':'\n&gt;&gt;&gt;\u00a0yes\n</code></pre> 4.\u6307\u5b9a\u5b89\u88c5\u8def\u5f84 <pre><code>[/home/uos/miniconda3] &gt;&gt;&gt;\u00a0\u8fd9\u91cc\u7684\u8def\u5f84\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u60c5\u51b5\u8bbe\u5b9a\uff0c\u6307\u5b9a\u5b8c\u6210\u56de\u8f66\n\u6211\u8fd9\u91cc\u5c31\u4e0d\u6307\u5b9a\u4e86\uff0c\u4f7f\u7528\u9ed8\u8ba4\u8def\u5f84\n</code></pre> 5.\u521d\u59cb\u5316conda <pre><code>by running conda init? [yes|no]\n[no] &gt;&gt;&gt; yes\u00a0\n</code></pre> \u901a\u8fc7\u7b80\u5355\u7684\u64cd\u4f5c\u5c31\u53ef\u4ee5\u5b89\u88c5\u6210\u529f\u4e86\uff0c\u5f53\u6253\u5f00\u7ec8\u7aef\u63d0\u793a\u7b26\u524d\u51fa\u73b0(base)\u8bf4\u660e\u8fdb\u5165\u4e86\u9ed8\u8ba4\u865a\u62df\u73af\u5883\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#base","title":"\u53d6\u6d88\u6fc0\u6d3bbase\u73af\u5883","text":"<p>\u5f53miniconda\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u6bcf\u6b21\u6253\u5f00\u7ec8\u7aef\u90fd\u4f1a\u6fc0\u6d3b\u5176\u9ed8\u8ba4\u7684base\u73af\u5883\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u7981\u6b62\u6fc0\u6d3b\u9ed8\u8ba4base\u73af\u5883\u3002</p> <pre><code>conda config --set auto_activate_base false\u00a0\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#python_1","title":"\u5b89\u88c5/\u5378\u8f7dPython\u5305","text":"<p>\u5f53\u6211\u4eec\u60f3\u5728conda\u4e2d\u5b89\u88c5\u5305\uff0c\u53ef\u4ee5\u9009\u62e9\u7528conda install\u6216\u8005pip install\uff0c\u4e24\u8005\u57fa\u672c\u76f8\u540c\uff0c\u4f46\u662fpip\u662f\u901a\u8fc7pypi\u4ed3\u5e93\u62c9\u53d6\u7684\u6570\u636e\uff0c\u800cconda\u662f\u901a\u8fc7anaconda.org\u4e0a\u62c9\u53d6\u7684\u6570\u636e\u3002\u6240\u4ee5\u8bf4pip\u7684\u5305\u66f4\u5168\u3002</p> <p>\u4ee5requests\u4e3a\u4f8b\uff1a</p> <pre><code>:~$ conda install requests  \u5b89\u88c5\n:~$ conda uninstall requests  \u5378\u8f7d\n\u64cd\u4f5c\u65b9\u6cd5\u548cpip\u51e0\u4e4e\u4e00\u6837\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_6","title":"\u4f9d\u8d56\u7ba1\u7406","text":"<p>conda \u4e5f\u6709\u548cpip freeze\u7c7b\u4f3c\u7684\u4f9d\u8d56\u7ba1\u7406\u65b9\u5f0f\uff1a</p> <p>\u4e3a\u5f53\u524d\u73af\u5883\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\uff1a</p> <p><pre><code>:~$ conda env export &gt; environment.yaml \n</code></pre> \u6839\u636e\u914d\u7f6e\u6587\u4ef6\u590d\u73b0\u5f53\u524d\u73af\u5883\uff1a <pre><code>:~$ conda env create -f environment.yaml\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_7","title":"\u73af\u5883\u64cd\u4f5c","text":"<p>\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u73af\u5883\uff0c\u5e76\u6fc0\u6d3b\u8be5\u73af\u5883\uff1a</p> <pre><code>:~$ conda create -n uos python=3.7 -y  \u73af\u5883\u540d\u79f0\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u6211\u8fd9\u91cc\u4f7f\u7528uos\n...\n:~$ conda activate uos\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u521b\u5efa\u73af\u5883\u4e4b\u540e\uff0c\u4e00\u5b9a\u8981 activate \u8be5\u73af\u5883\uff0c\u5426\u5219\u540e\u7eed\u7684 install \u64cd\u4f5c\u8fd8\u662f\u5728 base \u73af\u5883\u3002 \u67e5\u770b\u5df2\u6709\u73af\u5883\u5217\u8868\uff1a</p> <pre><code>:~$ conda env list\n# conda environments:\n#\nbase\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0/home/uos/miniconda3\nuos\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0*\u00a0 /home/uos/miniconda3/envs/uos\n</code></pre> <p>\u67e5\u770b\u5f53\u524d\u73af\u5883\u4e0b\u7684\u4f9d\u8d56\uff1a</p> <pre><code>:~$ conda list\n# packages in environment at /home/uos/miniconda3/envs/uos:\n#\n# Name\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Version\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0Build\u00a0 Channel\n_libgcc_mutex\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a00.1\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 main\u00a0\u00a0\n_openmp_mutex\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a05.1\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a01_gnu\u00a0\u00a0\nca-certificates\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a02023.01.10\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0h06a4308_0\u00a0\u00a0\ncertifi\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a02022.12.7\u00a0 \u00a0 \u00a0 \u00a0 py37h06a4308_0\u00a0\u00a0\nld_impl_linux-64\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 2.38\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0h1181459_1\n...\n</code></pre> <p>\u9000\u51fa\u73af\u5883\uff1a</p> <pre><code>:~$ conda deactivate\n:~$ exit  \u73af\u5883\u5185\u76f4\u63a5\u9000\u51fa\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_8","title":"\u5207\u6362\u73af\u5883\u6280\u5de7","text":"<p>\u5f53\u6211\u4eec\u5207\u6362\u73af\u5883\u65f6\uff0c\u4f1a\u4f7f\u7528conda activate\u547d\u4ee4\uff0c\u5982\u679c\u6211\u4eec\u60f3\u53ea\u8f93\u5165uos\u53ef\u4e0d\u53ef\u4ee5\u6fc0\u6d3b\u73af\u5883\u5462\uff1f</p> <p>\u5f53\u7136\u53ef\u4ee5\uff0c\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <pre><code>:~$ vim ~/.bash_profile\nalias uos=\"conda activate uos\"\n:~$ source ~/.bash_profile\n:~$ uos\n\u6b64\u65b9\u6cd5\u9002\u7528\u4e8e\u73af\u5883\u4e0e\u73af\u5883\u4e4b\u95f4\u5207\u6362\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_9","title":"\u5e38\u7528\u547d\u4ee4","text":"<p>\u73af\u5883\u76f8\u5173\uff1a</p> <pre><code>conda remove -n [env_name] --all  \u79fb\u9664\u73af\u5883\nconda create --name new_env_name --clone base_env_name  \u514b\u9686\u73af\u5883\n</code></pre> <p>\u65e5\u5e38\u76f8\u5173\uff1a</p> <pre><code>conda search [package_name]  \u641c\u7d22\u5b89\u88c5\u5305\u4fe1\u606f\nconda update [package_name]  \u66f4\u65b0\u5305\nconda remove [package_name]  \u5220\u9664\u5305\nconda clean -t  \u76f4\u63a5\u6e05\u9664\u88ab\u7f13\u5b58\u5305\nconda clean -y -a  \u76f4\u63a5\u6e05\u9664\u7d22\u5f15\u7f13\u5b58\u3001\u672a\u4f7f\u7528\u7f13\u5b58\u5305\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_10","title":"Python\u73af\u5883\u4e0e\u4f9d\u8d56\u7ba1\u7406","text":""},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pdm","title":"pdm","text":"<p>pdm\u662f\u4e00\u4e2a\u65b0\u7684Python\u5305\u7ba1\u7406\u5668\uff0c\u4e8e2021\u5e74\u53d1\u5e031.0\u7248\u672c\uff0c\u76ee\u524d\u6700\u65b0\u7248\u4e3a2.7\u3002\u503c\u5f97\u4e00\u63d0\u7684\u662f\u8fd9\u6b3e\u5de5\u5177\u7684\u5f00\u53d1\u8005\u662f\u4e2d\u56fd\u4eba\u3002\u4e3a\u4ec0\u4e48\u9009\u62e9pdm\u5462\uff1f\u9996\u5148\u5b83\u4e0d\u662f\u4f20\u7edf\u7684\u5305\u7ba1\u7406\u5668(pipenv,poetry)\u9700\u8981\u57fa\u4e8e\u865a\u62df\u73af\u5883\uff0cpdm\u5f97\u76ca\u4e8e2018\u5e74\u7684\u4e00\u4e2aPEP\u63d0\u6848\uff08PEP582\uff0cPython local packages directory\uff09\uff0c\u5b8c\u5168\u6452\u5f03\u4e86\u865a\u62df\u73af\u5883\u3002</p> <p>PDM \u5305\u542b\u5982\u4e0b\u7279\u6027\uff1a</p> <p>1.PEP 582 \u672c\u5730\u9879\u76ee\u5e93\u76ee\u5f55\uff0c\u652f\u6301\u5b89\u88c5\u4e0e\u8fd0\u884c\u547d\u4ee4\uff0c\u5b8c\u5168\u4e0d\u9700\u8981\u865a\u62df\u73af\u5883\u3002</p> <p>2.\u4e00\u4e2a\u7b80\u5355\u4e14\u76f8\u5bf9\u5feb\u901f\u7684\u4f9d\u8d56\u89e3\u6790\u5668\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u5927\u7684\u4e8c\u8fdb\u5236\u5305\u53d1\u5e03\u3002</p> <p>3.\u517c\u5bb9 PEP 517 \u7684\u6784\u5efa\u540e\u7aef\uff0c\u7528\u4e8e\u6784\u5efa\u53d1\u5e03\u5305(\u6e90\u7801\u683c\u5f0f\u4e0e wheel \u683c\u5f0f)</p> <p>4.\u62e5\u6709\u7075\u6d3b\u4e14\u5f3a\u5927\u7684\u63d2\u4ef6\u7cfb\u7edf\uff08\u6709\u63d2\u4ef6\u7cfb\u7edf\u76f4\u63a5\u5c31\u62c9\u5f00\u4e00\u4e2a\u6863\u6b21\uff09</p> <p>5.PEP 621 \u5143\u6570\u636e\u683c\u5f0f</p> <p>6.\u50cf pnpm \u4e00\u6837\u7684\u4e2d\u5fc3\u5316\u5b89\u88c5\u7f13\u5b58\uff0c\u8282\u7701\u78c1\u76d8\u7a7a\u95f4</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_11","title":"\u5b89\u88c5","text":"<p>pdm\u7684\u5b89\u88c5\u65b9\u5f0f\u6709\u5f88\u591a\u79cd\uff0c\u6bd4\u5982pip\u3001pipx\u3001homebrew\u7b49\u3002\u8fd9\u91cc\u63a8\u8350\u4e00\u6b3e\u5b89\u88c5\u547d\u4ee4\u884c\u5b89\u88c5\u5de5\u5177\uff0cpipx \u662f\u5b89\u88c5\u5e76\u8fd0\u884c Python \u7ec8\u7aef\u7528\u6237\u5e94\u7528\uff08end-user applications\uff09\u7684\u5de5\u5177\u3002\u7ec8\u7aef\u7528\u6237\u5e94\u7528\uff0c\u5176\u5b9e\u53ef\u4ee5\u7406\u89e3\u4e3a\u7528 Python \u7f16\u5199\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u76f4\u63a5\u4ece\u547d\u4ee4\u884c\u8c03\u7528\u7684\u90a3\u79cd\u3002</p> <p><pre><code>python3 -m pip install --user pipx\n</code></pre> pipx \u9700\u8981 Python 3.6 \u53ca\u4ee5\u4e0a\u7248\u672c\uff0c\u540c\u65f6\u5fc5\u987b\u5df2\u7ecf\u5b89\u88c5\u597d\u4e86 pip\u3002 <pre><code>pipx install pdm\n</code></pre> \u5982\u679c\u63d0\u793a\u865a\u62df\u73af\u5883\u6ca1\u6709\u88ab\u521b\u5efa\u9700\u8981\u5b89\u88c5venv\uff0c\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\u3002 <pre><code>sudo apt-get install python3-venv\n</code></pre> \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\u518d\u901a\u8fc7pipx\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5pdm\u3002 <pre><code>:~$ pipx install pdm\n\u00a0 installed package pdm 2.7.0, installed using Python 3.7.3\n\u00a0 These apps are now globally available\n\u00a0 \u00a0 - pdm\ndone! \u2728 \ud83c\udf1f \u2728\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pdm_1","title":"\u521d\u59cb\u5316pdm","text":"<p>\u6267\u884c pdm init \u5c31\u4f1a\u5f00\u59cb\u521d\u59cb\u5316\uff0c\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u4f1a\u8ba9\u4f60\u9009\u62e9\u9879\u76ee\u7684\u4e00\u4e9b\u4fe1\u606f</p> <p><pre><code>:~$ pdm init\nCreating a pyproject.toml for PDM...\nPlease enter the Python interpreter to use\n0. /usr/bin/python (2.7)\n1. /usr/bin/python3.7m (3.7)\n2. /usr/bin/python3.7 (3.7)\n3. /usr/bin/python2.7 (2.7)\n4. /home/uos/.local/pipx/venvs/pdm/bin/python (3.7)\nPlease select (0): 2\nUsing Python interpreter: /usr/bin/python3.7 (3.7)\nUsing __pypackages__ because non-venv Python is used.\nWould you like to create a virtualenv with /usr/bin/python3.7? [y/n] (y): y\nVirtualenv is created successfully at /home/uos/.venv\nIs the project a library that is installable?\nIf yes, we will need to ask a few more questions to include the project name and build backend [y/n] (n): y\nProject name (uos): 123like\nProject version (0.1.0):\u00a0\nProject description ():\u00a0\nWhich build backend to use?\n0. pdm-backend\n1. setuptools\n2. flit-core\n3. hatchling\n4. pdm-pep517\nPlease select (0): 4\nLicense(SPDX name) (MIT):\u00a0\nAuthor name ():\u00a0\nAuthor email ():\u00a0\nPython requires('*' to allow any) (&gt;=3.7):\u00a0\nChanges are written to pyproject.toml.\nFound following files from other formats that you may import:\n0. /home/uos/requirements.txt (requirements)\n1. don't do anything, I will import later.\nPlease select: 1\n</code></pre> \u5b8c\u6210\u4e4b\u540e\uff0cPDM \u4f1a\u5c06\u4f60\u7684\u9009\u62e9\u4ee5 toml \u683c\u5f0f\u5199\u5165 pyproject.toml \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002 <pre><code>:~$ cat pyproject.toml\u00a0\n[project]\nname = \"123like\"\nversion = \"0.1.0\"\ndescription = \"\"\nauthors = [\n\u00a0 \u00a0 {name = \"\", email = \"\"},\n]\ndependencies = []\nrequires-python = \"&gt;=3.7\"\nreadme = \"README.md\"\nlicense = {text = \"MIT\"}\n\n[build-system]\nrequires = [\"pdm-pep517&gt;=1.0\"]\nbuild-backend = \"pdm.pep517.api\"\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_12","title":"\u5305\u64cd\u4f5c","text":"<p>\u5b89\u88c5\u5305\u548c Poetry \u4e00\u6837\uff0c\u5b89\u88c5\u4f7f\u7528\u7684\u662f add \u547d\u4ee4</p> <p><pre><code>pdm add requests\n</code></pre> \u67e5\u770b\u5305 <pre><code>pdm list --graph\n</code></pre> pdm list \u8fd8\u6709\u4e24\u4e2a\u9009\u9879\uff1a \u2013freeze\uff1a\u4ee5 requirements.txt \u7684\u683c\u5f0f\u5217\u51fa\u5df2\u5b89\u88c5\u7684\u5305</p> <p>\u2013json\uff1a\u4ee5 json \u7684\u683c\u5f0f\u5217\u51fa\u5df2\u5b89\u88c5\u7684\u5305\uff0c\u4f46\u5fc5\u987b\u4e0e --graph \u540c\u65f6\u4f7f\u7528</p> <p>\u8981\u67e5\u770b\u67d0\u4e2a\u5305\u7684\u67d0\u4f53\u8be6\u60c5\uff0c\u76f4\u63a5\u7528 pdm show some_package\u5373\u53ef</p> <p><pre><code>pdm show requests\n</code></pre> \u5220\u9664\u5305 <pre><code>pmd remove requests\n</code></pre> \u66f4\u65b0\u5305 <pre><code># \u66f4\u65b0\u6240\u6709\u5305\npdm update # \u66f4\u65b0\u67d0\u4e2a\u5305\npdm update &lt;somepackage&gt;\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_13","title":"\u9879\u76ee\u914d\u7f6e","text":"<p><pre><code>pdm config\nSite/default configuration (/etc/xdg/pdm/config.toml):\nbuild_isolation = True\ncache_dir = /home/uos/.cache/pdm\ncheck_update = True\n...\nHome configuration (/home/uos/.config/pdm/config.toml):\nProject configuration (/home/uos/pdm.toml):\n</code></pre> pdm config \u91cc\u9762\u6709\u975e\u5e38\u591a\u7684\u914d\u7f6e\uff0c\u60f3\u8981\u4e00\u4e00\u641e\u6e05\u695a\u7684\u53ef\u4ee5\u53bb\u5b98\u7f51\u67e5\u9605\uff1ahttps://pdm.fming.dev/latest/reference/configuration/</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_14","title":"\u8fd0\u884c\u547d\u4ee4","text":"<p>\u60f3\u8981\u5728 pdm \u7684\u73af\u5883\u4e2d\u6267\u884c\u547d\u4ee4\u6216\u8005\u9879\u76ee\uff0c\u53ef\u4ee5\u4f7f\u7528 run \u547d\u4ee4\uff0c\u82e5\u662f\u6267\u884c\u9879\u76ee\u65f6\uff0c\u6709\u8bf8\u591a\u53c2\u6570\uff0c\u53ef\u4ee5\u5728 pyproject.toml \u914d\u7f6e\u547d\u4ee4\u522b\u540d\u3002</p> <pre><code>:~$ pdm run python main.py\u00a0\nhello,uos\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_15","title":"\u547d\u4ee4\u522b\u540d","text":"<p>\u5728 pyproject.toml \u6dfb\u52a0\u00a0[tool.pdm.scripts]\u53ef\u4ee5\u8bbe\u7f6e\u5feb\u6377\u547d\u4ee4\u522b\u540d\uff0c\u82e5\u9879\u76ee\u7684\u6267\u884c\u6709\u975e\u5e38\u591a\u7684\u53c2\u6570\uff0c\u8fd9\u79cd\u8bbe\u5b9a\u522b\u540d\u7684\u65b9\u6cd5\u5c06\u5f88\u6709\u7528 \u3002</p> <p><pre><code>[tool.pdm.scripts]\nstart = \"python main.py\"\n\n:~$ pdm run start\nhello,uos\n</code></pre> [tool.pdm.scripts]\u6709\u4e24\u79cd\u5f62\u5f0f\uff1a <pre><code># \u7b2c\u4e00\u79cd\n[tool.pdm.scripts]\nstart = \"python main.py\"\n# \u7b2c\u4e00\u79cd\n[tool.pdm.scripts]\nstart = {cmd = \"python main.py\"}\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#python_2","title":"\u5207\u6362 Python \u7248\u672c","text":"<p>\u5f53\u4f60\u5728\u521d\u59cb\u5316 pdm \u9879\u76ee\u65f6\uff0c\u5c31\u5df2\u7ecf\u9009\u5b9a\u4e86\u5f53\u524d\u7684 Python \u7248\u672c\u548c\u53ef\u7528\u7684 Python \u7248\u672c\u8303\u56f4\uff0c\u540e\u9762\u5982\u679c\u60f3\u66f4\u6539\uff0c\u53ef\u4ee5\u4f7f\u7528 use \u547d\u4ee4\uff0c\u4f46\u7248\u672c\u8981\u53d7\u4e4b\u524d\u8bbe\u5b9a\u7684\u7248\u672c\u8303\u56f4\u7ea6\u675f\u3002\u5047\u8bbe\u5141\u8bb8\u8303\u56f4\u662f python 3.9+\uff0c\u5f53\u524d\u4f7f\u7528\u7684\u662f python 3.10\uff0c\u53ef\u4ee5\u76f4\u63a5\u5207\u6362\u8fc7\u53bb\u3002</p> <p><pre><code>pdm use python3.9  \n</code></pre> \u5047\u8bbe\u5141\u8bb8\u8303\u56f4\u662f python 3.9+\uff0c\u5f53\u524d\u4f7f\u7528\u7684\u662f python 3.10\uff0c\u53ef\u4ee5\u76f4\u63a5\u5207\u6362\u8fc7\u53bb\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_16","title":"\u517c\u5bb9\u73af\u5883","text":"<p>pdm \u8db3\u591f\u597d\u7528\uff0c\u4e5f\u8db3\u591f\u5f00\u653e\uff0c\u5982\u679c\u4f60\u5f53\u524d\u4f7f\u7528\u7684\u662f\u5176\u4ed6\u7684\u5305\u7ba1\u7406\u5668\uff0c\u6bd4\u5982 pipenv \uff0cpoetry\uff0c\u6216\u8005\u8fd8\u5728\u7528\u6700\u539f\u59cb\u7684 requirements.txt \uff0c\u4f60\u4e5f\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8fc1\u79fb\u5230 pdm \u4e2d\u6765\uff1a</p> <p>1.\u4f7f\u7528 pdm import -f {file} \u65e0\u9700\u521d\u59cb\u5316\uff0c\u76f4\u63a5\u8f6c\u6362</p> <p>2.\u6267\u884c pdm init \u6216\u8005 pdm install \u7684\u65f6\u5019\uff0c\u4f1a\u81ea\u52a8\u8bc6\u522b\u4f60\u5f53\u524d\u7684\u4f9d\u8d56\u60c5\u51b5\u5e76\u8f6c\u6362</p> <p>\u540c\u6837\u7684\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5f53 pdm \u7ba1\u7406\u7684\u9879\u76ee\uff0c\u5bfc\u51fa\u4e3a\u5176\u4ed6\u65b9\u6848pyproject.toml \u548c pdm.lock\u662f pdm \u7684\u4e24\u4e2a\u6838\u5fc3\u6587\u4ef6\u3002pdm \u505a\u4e3a\u4e00\u4e2a\u540e\u8d77\u4e4b\u79c0\uff0c\u4e5f\u6ca1\u6709\u5fd8\u672c\uff0c\u5b83\u652f\u6301\uff1a</p> <p>\u5c06 pyproject.toml \u8f6c\u6210 setup.py</p> <p><pre><code>pdm export -f setuppy -o setup.py\n</code></pre> \u5c06 pdm.lock \u8f6c\u6210 requirements.txt <pre><code>pdm export -o requirements.txt\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#venv","title":"venv","text":"<p>venv\u662fPython\u4e2d\u81ea\u5e26\u7684\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u7ba1\u7406\u865a\u62df\u73af\u5883\u7684\u6a21\u5757\u3002</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_17","title":"\u521b\u5efa\u865a\u62df\u73af\u5883","text":"<p><pre><code>:~$ python3 -m venv uos   uos\u4e3a\u865a\u62df\u73af\u5883\u540d\u79f0\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\n</code></pre> \u53ef\u4ee5\u8bf4\u662f\u975e\u5e38\u7684\u5feb\uff0c\u4e24\u4e09\u79d2\u5c31\u521b\u5efa\u6210\u529f\u4e86\uff01 \u521b\u5efa\u5b8c\u6210\u4e4b\u540e\u5728\u73af\u5883\u76ee\u5f55\u4e0b\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2apyvenv.cfg\u7684\u6587\u4ef6\uff0c\u5b83\u8bb0\u5f55\u7740\u865a\u62df\u73af\u5883\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u5305\u62ec\u4f60\u4f7f\u7528\u7684 Python \u7684\u5bb6\u76ee\u5f55\uff0c\u8fd8\u6709\u5f53\u524d\u865a\u62df\u73af\u5883\u7684 Python \u7248\u672c\uff0c\u662f\u5426\u5f00\u542f\u4f7f\u7528\u7cfb\u7edf\u7684 site-packages \u6a21\u5757\uff0c\u5982\u679c\u5f00\u542f\u4e86\uff0c\u90a3\u4e48\u5f53\u4f60\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7cfb\u7edf\u4e2d\u5df2\u7ecf\u88c5\u8fc7\u7684\u7b2c\u4e09\u65b9\u6a21\u5757\uff0c\u4f46\u662f\u4f60\u5728\u865a\u62df\u73af\u5883\u4e0b\u88c5\u7684\u6a21\u5757\u5c31\u4e0d\u80fd\u88ab\u5176\u4ed6\u5730\u65b9\u7684\u7a0b\u5e8f\u4f7f\u7528\u3002</p> <p><pre><code>:~/uos$ cat pyvenv.cfg\u00a0\nhome = /usr/bin\ninclude-system-site-packages = false\nversion = 3.7.3\n</code></pre> \u5982\u679c\u4f60\u7684\u7cfb\u7edf\u91cc\u6709\u591a\u4e2aPython3\u73af\u5883\uff0c\u90a3\u4e48\u5728\u521b\u5efa\u65f6\u6307\u660e\u6e05\u695a\u7248\u672c\u53f7\u5c31\u53ef\u4ee5\u4e86\u3002 <pre><code>:~$ python3.9 -m venv [venv_dir]\n</code></pre></p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_18","title":"\u8fdb\u5165\u865a\u62df\u73af\u5883","text":"<p>\u9996\u5148\u6211\u4eec\u8fdb\u5165\u5230\u521b\u5efa\u597d\u7684\u865a\u62df\u73af\u5883\u76ee\u5f55\uff0c\u901a\u8fc7source\u8fdb\u5165\u865a\u62df\u73af\u5883\uff1a</p> <pre><code>:~/uos$ source bin/activate\n(uos) uos@uos-PC:~/uos$\n\u547d\u4ee4\u884c\u524d\u6709\u521b\u5efa\u7684\u865a\u62df\u73af\u5883\u540d\u79f0\u8bf4\u660e\u5c31\u5df2\u8fdb\u5165\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_19","title":"\u9000\u51fa\u865a\u62df\u73af\u5883","text":"<pre><code>:~$deactivate\n</code></pre>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_20","title":"\u603b\u7ed3","text":"<p>venv\u662f Python3 \u4e2d\u81ea\u5e26\u7684\u865a\u62df\u73af\u5883\u7ba1\u7406\u5de5\u5177\uff0c\u4e0d\u9700\u8981\u989d\u5916\u5b89\u88c5\uff0c\u529f\u80fd\u7b80\u5355\uff0c\u7528\u6cd5\u4e5f\u7b80\u5355\u3002\u4f46\u662f\u5b83\u4e0d\u80fd\u50cf poetry \u548c pipenv \u7528\u4e8e\u9879\u76ee\u7684\u7ba1\u7406\uff0c\u56e0\u6b64 venv \u5efa\u8bae\u53ea\u505a\u4e86\u89e3\uff0c\u5728\u4e00\u4e9b\u7b80\u5355\u7684\u573a\u666f\u4e2d\u53ef\u4ee5\u4f7f\u7528\uff0c\u5982\u679c\u662f\u590d\u6742\u7684\u9879\u76ee\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0a poetry \u548c pipenv\u3002 </p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#virtualenv","title":"virtualenv","text":"<p>...</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#virtualenvwrapper","title":"virtualenvwrapper","text":"<p>...</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pyenv","title":"pyenv","text":"<p>...</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#pipenv","title":"pipenv","text":"<p>...</p>"},{"location":"Python/Python%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#poetry","title":"poetry","text":""},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"FastAPI\u20148\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================\n# Author : mikigo\n# Time   : 2023/3/1\n# =============================\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>FastAPI \u662f\u4e00\u4e2a Web \u670d\u52a1\u6846\u67b6\uff0c\u5176\u4e3b\u8981\u7279\u70b9\u5c31\u662f\"\u5feb\"\u3002</p> <p>\u5728 Python Web \u670d\u52a1\u9886\u57df\u6bd4\u8f83\u77e5\u540d\u7684\u5c31\u662f Django\u3001Flask\uff0c\u4f46\u5176\u6027\u80fd\u4e00\u76f4\u4e3a\u5927\u5bb6\u6240\u8bdf\u75c5\uff0c\u4ee5\u81f3\u4e8e\u5f88\u591a\u5927\u578b\u9879\u76ee\u4f1a\u9009\u62e9\u57fa\u4e8e Go \u8bed\u8a00\u7684 Web \u670d\u52a1\u6846\u67b6\uff0c\u6bd4\u5982 beego\u3002\u800c Django\u3001Flask \u8f83\u591a\u5e94\u7528\u4e8e\u4e00\u4e9b\u5c0f\u578b\u7f51\u7ad9\u6216\u8005\u4e00\u4e9b\u4e2a\u4eba\u535a\u5ba2\u7c7b\u7f51\u7ad9\u3002</p> <p>\u5e94\u8be5\u8bf4\uff0cPython \u5728 Web \u540e\u7aef\u670d\u52a1\u9886\u57df\u662f\u5931\u8d25\u7684\uff0c\u800c FastAPI \u7684\u51fa\u73b0\u6216\u8bb8\u6709\u53ef\u80fd\u4e3a Python \u6273\u56de\u4e00\u5c40\u3002</p> <p>FastAPI \u4e4b\u6240\u4ee5\u80fd\u7a81\u7834 Python \u8bed\u8a00\u672c\u8eab\u6240\u5e26\u6765\u7684\u6027\u80fd\u74f6\u9888\uff0c\u662f\u56e0\u4e3a\u5176\u4e3b\u8981\u91c7\u7528\u4e86\u5f02\u6b65\u7684\u8bbe\u8ba1\u601d\u8def\uff0c\u65e0\u8bba\u662f\u6e90\u7801\u8fd8\u662f\u793a\u4f8b\uff0c\u90fd\u6709\u5927\u91cf\u534f\u7a0b\u7684\u5199\u6cd5\u3002</p> <p>\u534f\u7a0b\uff0c\u662f Python \u552f\u4e00\u80fd\u7a81\u7834\u7ebf\u7a0b GIL\uff08\u5168\u5c40\u89e3\u91ca\u5668\u9501\uff09\u3001\u7a81\u7834\u8fdb\u7a0b CPU \u6570\u91cf\u9650\u5236\u7684\u9ad8\u9636\u7f16\u7801\u6a21\u5f0f\uff0c\u5b83\u4f7f\u5f97\u4efb\u52a1\u95f4\u7684\u5207\u6362\u80fd\u591f\u50cf\u8c03\u7528\u51fd\u6570\u4e00\u6837\u8f7b\u677e\u3002\u534f\u7a0b\u4e5f\u662f Python \u91cc\u9762\u6700\u4e0d\u597d\u7406\u89e3\u7684\u5185\u5bb9\u4e4b\u4e00\u3002</p> <p>\u4f46\u662f\u6ca1\u5173\u7cfb\uff0cFastAPI \u901a\u8fc7\u975e\u5e38\u7cbe\u826f\u7684\u8bbe\u8ba1\u8ba9\u4f60\u4e0d\u7528\u771f\u6b63\u5f04\u61c2\u534f\u7a0b\u5c31\u80fd\u8f7b\u677e\u4f7f\u7528\u5b83\u3002</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883: <code>deepin</code></p> <pre><code>$ pip3 install fastapi\n</code></pre> <p>\u5b89\u88c5 ASGI \u670d\u52a1\u5668\uff0c\u7528\u4e8e\u542f\u52a8\u670d\u52a1</p> <pre><code>$ pip3 install \"uvicorn[standard]\"\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u7b80\u5355\u7684\u4f8b\u5b50","text":"<p>\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u8fd4\u56de\u7b80\u5355\u7684 json \u54cd\u5e94\uff1a</p> <pre><code>from fastapi import FastAPI\napp = FastAPI()\n</code></pre> <p>\u8fd9\u662f\u56fa\u5b9a\u5199\u6cd5\uff0c\u540e\u9762\u7684\u5185\u5bb9\u5c31\u4e0d\u91cd\u590d\u5199\u8fd9\u4e24\u884c\u4e86\uff1b</p> <pre><code>@app.get(\"/\")\ndef hello():\nreturn {\"msg\": \"hello mikigo\"}\n</code></pre> <p>\u5728\u7ec8\u7aef\u901a\u8fc7\u547d\u4ee4\u542f\u52a8\u670d\u52a1\uff1a</p> <pre><code>uvicorn main:app --reload\n</code></pre> <p>\u5728\u672c\u673a\u6d4f\u89c8\u5668\u8bbf\u95ee\uff1ahttp://127.0.0.1:8000/\uff1b</p> <p>\u6211\u4e2a\u4eba\u559c\u6b22\u5728 <code>py</code> \u6587\u4ef6\u91cc\u9762\u5199\u542f\u52a8\uff1a</p> <pre><code>import os\nfrom fastapi import FastAPI\nimport uvicorn\napp = FastAPI()\n@app.get(\"/\")\nasync def hello():\nreturn {\"msg\": \"hello mikigo\"}\nif __name__ == '__main__':\nuvicorn.run(\napp=\"main:app\",\nhost=os.popen(\"hostname -I\").read().split(\" \")[0],  # \u52a8\u6001\u83b7\u53d6\u672c\u673aIP,\u5982\u679c\u4e0d\u4f20\u9ed8\u8ba4\u4e3a127.0.0.1\nport=5000, # \u6307\u5b9a\u4e00\u4e2a\u6d4b\u8bd5\u7528\u7aef\u53e3\nreload=True\n)\n</code></pre> <p>\u8fd9\u6837\u76f4\u63a5\u8fd0\u884c <code>py</code> \u811a\u672c\uff1a</p> <p></p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#openapi","title":"OpenAPI \u6587\u6863","text":"<p>FastAPI \u7684\u4e00\u4e2a\u7279\u70b9\u5c31\u662f\u81ea\u5e26\u63a5\u53e3\u6587\u6863\uff0c\u53ea\u9700\u8981\u5728 url \u540e\u9762\u52a0 <code>docs</code>\uff1a</p> <p></p> <p>\u4f60\u5982\u679c\u4e0d\u559c\u6b22 Swagger \u98ce\u683c\u7684\u6587\u6863\uff0c\u53ef\u4ee5\u5c06 <code>docs</code> \u6539\u6210 <code>redoc</code>\uff0cFastAPI \u9ed8\u8ba4\u643a\u5e26\u4e24\u79cd\u98ce\u683c\u7684\u63a5\u53e3\u6587\u6863\u3002</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#pydantic","title":"\u56db\u3001Pydantic","text":"<p>FastAPI \u662f\u501f\u52a9 Pydantic \u6765\u8fdb\u884c\u7c7b\u578b\u58f0\u660e\u7684\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u7528\u9014\uff1a</p> <ul> <li>\u5bf9\u8bf7\u6c42\u4f53\u548c\u54cd\u5e94\u4f53\u7684\u53c2\u6570\u7c7b\u578b\u8fdb\u884c\u58f0\u660e\uff1b</li> <li>\u5728\u7f16\u8f91\u5668\u91cc\u9762\u4eab\u53d7\u4ee3\u7801\u8865\u5168\u7684\u4e50\u8da3\uff1b</li> </ul> <p>\u4f7f\u7528\u8fc7 Python \u7684 typing \u7684\u540c\u5b66\u5e94\u8be5\u77e5\u9053\u3010\u7c7b\u578b\u6807\u6ce8\u3011\uff0c\u5b83\u53ef\u4ee5\u6821\u9a8c\u53c2\u6570\u53ca\u8fd4\u56de\u7684\u7c7b\u578b\uff0c\u4f7f\u5f97\u4ee3\u7801\u66f4\u52a0\u4e25\u7981\uff0c\u4e14\u66f4\u5177\u6709\u53ef\u8bfb\u6027\u3002</p> <p>Pydantic \u63d0\u4f9b\u4e86\u66f4\u52a0\u5f3a\u5927\u7684\u7c7b\u578b\u5b9a\u4e49\u548c\u66f4\u52a0\u53cb\u597d\u7684\u9519\u8bef\u63d0\u793a\u529f\u80fd\u3002\u5373\u4f7f\u4e0d\u7528 FastAPI\uff0c\u5728\u5176\u4ed6\u7f16\u7801\u4e2d\u4f60\u4e5f\u53ef\u4ee5\u5f88\u6709\u6548\u7684\u4f7f\u7528\u5b83\u3002</p> <p>\u4f7f\u7528\u4e3e\u4f8b\uff1a</p> <pre><code>from datetime import date\nfrom pydantic import BaseModel\ndef main(user_id: str):\nreturn user_id\nclass User(BaseModel):\nid: int\nname: str\njoined: date\n</code></pre> <p>\u4f20\u9012\u53c2\u6570\u8fdb\u53bb\uff1a</p> <pre><code>my_user: User = User(id=3, name=\"mikigo\", joined=\"20230303\")\nsecond_user_data = {\n\"id\": 4,\n\"name\": \"Mary\",\n\"joined\": \"2018-11-30\",\n}\nmy_second_user: User = User(**second_user_data)\n</code></pre> <p><code>from pydantic import BaseModel</code> \u91cc\u9762\u7684 <code>BaseModel</code> \u8bb0\u4f4f\uff0c\u901a\u5e38\u90fd\u662f\u7ee7\u627f\u8fd9\u4e2a\u7c7b\u6765\u5199\u6211\u4eec\u7684\u81ea\u5b9a\u4e49\u7c7b\u578b\uff1b</p> <p>\u5c06 <code>Pydantic</code> \u6570\u636e\u7c7b\u578b\u8f6c\u6362\u6210 JSON\uff1a</p> <pre><code>from fastapi.encoders import jsonable_encoder\njson_user = jsonable_encoder(my_user)\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u4e94\u3001\u53c2\u6570","text":"<p>FastAPI \u662f RESTful \u98ce\u683c\u7684\u6846\u67b6\uff0c\u540e\u9762\u4f8b\u5b50\u7684\u63a5\u53e3\u8bf7\u6c42\u6211\u90fd\u4f7f\u7528 Postman \u6765\u505a\uff0c\u8fd9\u4e2a\u53ea\u662f\u4e2a\u4eba\u4e60\u60ef\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u63a5\u53e3\u6587\u6863\u91cc\u9762\u63d0\u4f9b\u7684\u3010Try it out\u3011\u63a5\u53e3\u8c03\u8bd5\u529f\u80fd\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 requests \u8fd9\u7c7b\u7684 HTTP \u5e93\u8fdb\u884c\u63a5\u53e3\u8bf7\u6c42\uff0c\u6548\u679c\u662f\u4e00\u6837\u7684\u3002</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1\u3001\u8def\u5f84\u53c2\u6570","text":""},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#11","title":"1.1 \u666e\u901a\u8def\u5f84\u53c2\u6570","text":"<p>\u58f0\u660e\u8def\u5f84\u53c2\u6570\uff1a</p> <pre><code>@app.get(\"/items/{item_id}\")\nasync def read_item(item_id):\nreturn {\"item_id\": item_id}\n</code></pre> <p>\u8def\u5f84\u53c2\u6570 <code>item_id</code> \u53ef\u4ee5\u4f20\u5165\u5230\u51fd\u6570\u4e2d\uff0c\u6bd4\u5982\uff1ahttp://10.8.13.224:5000/items/mikigo </p> <p>\u4f20\u9012\u53c2\u6570\u4e3a\uff1amikigo\uff0c\u54cd\u5e94\u5982\u4e0b\uff1a</p> <pre><code>{\"item_id\":\"mikigo\"}\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#12","title":"1.2 \u6709\u7c7b\u578b\u7684\u8def\u5f84\u53c2\u6570","text":"<p>\u58f0\u660e\u8def\u5f84\u53c2\u6570\uff1a</p> <pre><code>@app.get(\"/items/{item_id}\")\nasync def read_item(item_id: int):\nreturn {\"item_id\": item_id}\n</code></pre> <p>\u533a\u522b\u662f\u7ed9\u53c2\u6570 <code>item_id</code> \u6307\u5b9a\u4e86\u4e00\u4e2a\u7c7b\u578b <code>int</code>\uff1b</p> <p>\u5982\u679c\u8fd8\u662f\u4f20\u9012\u53c2\u6570\u4e3a\uff1amikigo\uff0chttp://10.8.13.224:5000/items/mikigo \u4f1a\u62a5\u9519\uff1a</p> <pre><code>{\n\"detail\": [\n{\n\"loc\": [\n\"path\",\n\"item_id\"\n],\n\"msg\": \"value is not a valid integer\",\n\"type\": \"type_error.integer\"\n}\n]\n}\n</code></pre> <p>\u5fc5\u987b\u8981\u7ed9\u4e00\u4e2a\u6570\u5b57\u624d\u884c http://10.8.13.224:5000/items/520 \u54cd\u5e94\uff1a</p> <pre><code>{\n\"item_id\": 520\n}\n</code></pre> <p>\u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u8def\u5f84\u53c2\u6570\u7684\u6570\u636e\u6821\u9a8c\uff1b</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u67e5\u8be2\u53c2\u6570","text":"<p>\u4e0d\u5c5e\u4e8e\u8def\u5f84\u53c2\u6570\u7684\u5176\u4ed6\u51fd\u6570\u53c2\u6570\uff0c\u4f1a\u88ab\u88ab\u81ea\u52a8\u89e3\u91ca\u4e3a\"\u67e5\u8be2\u5b57\u7b26\u4e32\"\u53c2\u6570\u3002</p> <pre><code>@app.get(\"/items/\")\nasync def read_item(name: str = \"\"):\nreturn {\"name\" : name}\n</code></pre> <p>\u67e5\u8be2\u53c2\u6570\u7684\u952e\u503c\u5728 URL \u7684 <code>\uff1f</code> \u4e4b\u540e\uff0c\u5e76\u4ee5 <code>&amp;</code> \u7b26\u53f7\u5206\u9694\uff0c\u5c31\u548c\u6211\u4eec\u7406\u89e3\u7684\u666e\u901a GET \u8bf7\u6c42\u53c2\u6570\u4f20\u9012\u65b9\u5f0f\u662f\u4e00\u6837\u7684\uff1b</p> <pre><code>http://10.8.13.224:5000/items/?name=mikigo\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"name\": \"mikigo\"\n}\n</code></pre> <p>\u6ce8\u610f\u6211\u4eec\u5728 <code>read_item(name: str = \"\")</code> \u7ed9\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff0c\u8bf4\u660e\u53c2\u6570\u662f\u53ef\u9009\u7684\uff08\u4e0d\u4f20\u53c2\u4e5f\u53ef\u4ee5\uff09\uff0c\u5982\u679c \u76f4\u63a5\u7528<code>read_item(name: str)</code> \u8bf4\u660e\u53c2\u6570\u662f\u5fc5\u4f20\u7684\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u8bf7\u6c42\u4f53","text":"<p>\u8bf7\u6c42\u4f53\u662f\u5ba2\u6237\u7aef\u53d1\u9001\u7ed9 API \u7684\u6570\u636e\u3002\u54cd\u5e94\u4f53\u662f API \u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u6570\u636e\u3002</p> <p>\u4e00\u822c\u6211\u4eec\u8bf4GET\u65b9\u6cd5\u6ca1\u6709\u8bf7\u6c42\u4f53\uff0cPOST\u3001PUT\u7b49\u65b9\u6cd5\u624d\u6709\u8bf7\u6c42\u4f53\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>from typing import Union\nfrom pydantic import BaseModel\nclass Item(BaseModel):\nname: str\ndescription: Union[str, None] = None\n@app.post(\"/items/\")\nasync def post_test(item: Item):\nreturn {\"data\": item}\n</code></pre> <p>\u53d1\u4e00\u4e2a POST \u8bf7\u6c42\uff0c\u53c2\u6570\u4e3a\uff1a</p> <pre><code>{\n\"name\": \"mikigo\",\n\"description\": \"\u641e\u4e8b\u60c5\"\n}\n</code></pre> <p>\u8fd4\u56de\u503c\uff1a</p> <pre><code>{\n\"data\": {\n\"name\": \"mikigo\",\n\"description\": \"\u641e\u4e8b\u60c5\"\n}\n}\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4\u3001\u5185\u5efa\u53c2\u6570\u7c7b\u578b","text":""},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#41query","title":"4.1\u3001Query","text":"<p>Query \u4e00\u822c\u662f\u7528\u5728\u67e5\u8be2\u53c2\u6570\u91cc\u9762\uff1a</p> <pre><code>from fastapi import Query\n@app.get(\"/query/\")\nasync def query_test(\nname: Union[str, None] = Query(default=None, max_length=10)\n):\nreturn {\"name\": name}\n</code></pre> <p><code>Query(default=None, max_length=10)</code> \u91cc\u9762:</p> <ul> <li><code>default=None</code> \u8868\u793a\u53c2\u6570\u53ef\u9009\uff0c\u9ed8\u8ba4\u503c\u4e3a None\uff0c\u548c <code>name: str = None</code> \u5199\u6cd5\u662f\u4e00\u4e2a\u610f\u601d\uff1b</li> </ul> <p>\u5982\u679c\u60f3\u8981\u53c2\u6570\u5fc5\u586b\uff1a<code>default=...</code>\uff08\u6ca1\u9519\u54c8\uff0c\u5c31\u662f\u4e09\u4e2a\u70b9\uff0c\u4e09\u4e2a\u70b9\u5728 Python \u91cc\u9762\u662f\u4e00\u4e2a\u7701\u7565\u5bf9\u8c61\uff09\uff1b</p> <ul> <li><code>max_length=10</code> \u5b9a\u4e49\u4e86\u53c2\u6570\u7684\u6700\u5927\u957f\u5ea6\uff1b</li> </ul> <p><code>Query</code> \u652f\u6301\u7684\u53c2\u6570\u8fd8\u6709\u70b9\u591a\uff0c\u611f\u5174\u8da3\u53ef\u4ee5\u4e00\u4e2a\u4e2a\u8bd5\uff1a</p> <pre><code>def Query(\ndefault: Any = Undefined,\n*,\nalias: Optional[str] = None,\ntitle: Optional[str] = None,\ndescription: Optional[str] = None,\ngt: Optional[float] = None,\nge: Optional[float] = None,\nlt: Optional[float] = None,\nle: Optional[float] = None,\nmin_length: Optional[int] = None,\nmax_length: Optional[int] = None,\nregex: Optional[str] = None,\nexample: Any = Undefined,\nexamples: Optional[Dict[str, Any]] = None,\ndeprecated: Optional[bool] = None,\ninclude_in_schema: bool = True,\n**extra: Any,\n) -&gt; Any:\npass\n</code></pre> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/query?name=mikigo\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"name\": \"mikigo\"\n}\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#42path","title":"4.2\u3001Path","text":"<p>Path \u4e00\u822c\u662f\u7528\u5728\u8def\u5f84\u53c2\u6570\u91cc\u9762\uff1a</p> <pre><code>from fastapi import Path\n@app.get(\"/path/{path_id}\")\nasync def path_test(\npath_id: int = Path(default=...),\nname: Union[str, None] = Query(default=..., max_length=10)\n):\nresults = {\"path_id\": path_id}\nif name:\nresults.update({\"name\": name})\nreturn results\n</code></pre> <p>\u53ef\u4ee5\u770b\u7684\u51fa\u6765 <code>Path(default=..., max_length=10)</code> \u548c Query \u7528\u6cd5\u51e0\u4e4e\u4e00\u6837\uff0c\u4e0d\u662f\u51e0\u4e4e\uff0c\u5c31\u662f\u4e00\u6837\u7684\u3002</p> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/path/10?name=mikigo\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"path_id\": 10,\n\"name\": \"mikigo\"\n}\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#43body","title":"4.3\u3001Body","text":"<p>Body \u4e00\u822c\u662f\u7528\u4e8e\u8bf7\u6c42\u4f53\uff1a</p> <pre><code>from fastapi import Body\n@app.post(\"/body/\")\nasync def body_test(\nitem: Item,\nage: int = Body(default=None, gt=0)\n):\nresults = {\"data\": item}\nif age:\nresults.update({\"age\": age})\nreturn {\"results\": results}\n</code></pre> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/body\n</code></pre> <p>\u9700\u8981\u6784\u9020\u8bf7\u6c42\u4f53\uff1a</p> <pre><code>{\n\"item\": {\n\"name\": \"string\",\n\"description\": \"string\"\n},\n\"age\": 2\n}\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"results\": {\n\"data\": {\n\"name\": \"string\",\n\"description\": \"string\"\n},\n\"age\": 2\n}\n}\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#44field","title":"4.4\u3001Field","text":"<p>Field \u4e00\u822c\u7528\u4e8e\u8bf7\u6c42\u4f53\u7684\u5b57\u6bb5\uff0c\u5bf9\u8bf7\u6c42\u4f53\u7684\u53c2\u6570\u505a\u8fdb\u4e00\u6b65\u7684\u7ea6\u675f\uff0c\u5b83\u662f\u4ece pydantic \u5bfc\u5165\u7684\uff1a</p> <pre><code>from pydantic import Field\nclass FieldItem(BaseModel):\nname: str\ndescription: Union[str, None] = Field(\ndefault=None, title=\"deepin\", max_length=300\n)\n@app.post(\"/field/\")\nasync def field_test(\nitem: FieldItem,\nage: int = Body(default=None, gt=0)\n):\nresults = {\"data\": item}\nif age:\nresults.update({\"age\": age})\nreturn {\"field\": results}\n</code></pre> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/field\n</code></pre> <p>\u6784\u9020\u8bf7\u6c42\u4f53\u5982\u4e0b\uff1a</p> <pre><code>{\n\"item\": {\n\"name\": \"mikigo\",\n\"description\": \"1234\"\n},\n\"age\":30\n}\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"field\": {\n\"data\": {\n\"name\": \"mikigo\",\n\"description\": \"1234\"\n},\n\"age\": 30\n}\n}\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#45cookie","title":"4.5\u3001Cookie","text":"<p>\u5148\u8bbe\u7f6e cookie\uff1a</p> <pre><code>@app.post(\"/cookieset\")\nasync def cookie_set(response: Response):\nresponse.set_cookie(key=\"cookie1\", value=\"mikigocookie11111\")\nreturn {\"cookie_id\": \"ok\"}\n</code></pre> <p>\u8bf7\u6c42\u4e00\u4e0b\uff0c\u67e5\u770b cookie \u8bbe\u7f6e\u662f\u5426\u6210\u529f:</p> <p></p> <p>\u7136\u540e\u518d\u5b9a\u4e49 Cookie \u53c2\u6570\uff1a</p> <pre><code>from fastapi import Cookie\n@app.get(\"/cookieget\")\nasync def cookie_get(\nads_id: Union[str, None] = Cookie(default=None)\n):\nreturn {\"ads_id\": ads_id}\n</code></pre> <p><code>Cookie</code> \u53c2\u6570\u7684\u7ed3\u6784\u4e0e\u58f0\u660e <code>Query</code> \u53c2\u6570\u548c <code>Path</code> \u53c2\u6570\u65f6\u76f8\u540c</p> <p>\u8bf7\u6c42\u4e00\u628a\uff1a</p> <p></p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#46header","title":"4.6\u3001Header","text":"<p><code>Header</code> \u4f7f\u7528\u548c<code>Path</code>, <code>Query</code> and <code>Cookie</code> \u4e00\u6837;</p> <pre><code>from fastapi import Header\n@app.get(\"/header\")\nasync def header_test(user_agent: Union[str, None] = Header(default=None)):\nreturn {\"User-Agent\": user_agent}\n</code></pre> <p>\u8bf7\u6c42\uff1a</p> <pre><code>http://10.8.13.224:5000/header\n</code></pre> <p>\u54cd\u5e94\uff1a</p> <pre><code>{\n\"User-Agent\": \"PostmanRuntime/7.31.1\"\n}\n</code></pre> <p><code>Header</code> \u6709\u4e2a\u7279\u6b8a\u7684\u53c2\u6570 <code>convert_underscores: bool = True</code>\uff1b</p> <p>\u56e0\u4e3a\u5927\u591a\u6570\u6807\u51c6\u7684headers\u7528 \"\u8fde\u5b57\u7b26\" \u5206\u9694\uff0c\u56e0\u6b64\u9ed8\u8ba4\u5c06\u53c2\u6570\u540d\u79f0\u7684\u5b57\u7b26\u4ece\u4e0b\u5212\u7ebf (<code>_</code>) \u8f6c\u6362\u4e3a\u8fde\u5b57\u7b26 (<code>-</code>) \uff1b</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u516d\u3001\u54cd\u5e94","text":""},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_1","title":"1\u3001\u54cd\u5e94\u9650\u5236","text":"<p><code>Pydantic</code> \u4e0d\u4ec5\u53ef\u4ee5\u5bf9\u8bf7\u6c42\u53c2\u6570\u8fdb\u884c\u6821\u9a8c\u548c\u9650\u5236\uff0c\u5bf9\u54cd\u5e94\u540c\u6837\u53ef\u4ee5\uff1b</p> <pre><code>class Item(BaseModel):\nname: str\ndescription: Union[str, None] = None\n@app.post(\"/rsp_model/\", response_model=Item)\nasync def response_model_test(item: Item) -&gt; Any:\nreturn item\n</code></pre> <p>\u5728\u88c5\u9970\u5668 <code>@app.post</code> \u91cc\u9762\u6709\u4e2a\u53c2\u6570 <code>response_model</code> \u53ef\u4ee5\u58f0\u660e\u54cd\u5e94\u7684\u6a21\u578b\uff1b</p> <p><code>response_model=Item</code> \u8868\u793a\u54cd\u5e94\u4fe1\u606f\u4e5f\u662f <code>Item</code> \u7684\u7c7b\u578b\uff0cAPI \u6587\u6863\u91cc\u9762\u4e5f\u4f1a\u6709\u54cd\u5e94\u4fe1\u606f\u7684\u793a\u4f8b\uff0c\u5426\u5219\u5c31\u662f\u7a7a\u7684\uff1b</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_1","title":"2\u3001\u54cd\u5e94\u72b6\u6001\u7801","text":"<pre><code>@app.post(\"/status\", status_code=201)\nasync def status_code_test(name: str):\nreturn {\"name\": name}\n</code></pre> <p>\u8bf7\u6c42\u6210\u529f\uff0c\u8fd4\u56de\u72b6\u6001\u7801\u4e3a\uff1a201;</p> <p>API \u6587\u6863\u91cc\u9762\u4e5f\u4f1a\u6709\u5c55\u793a\uff1b</p> <p>fastapi \u63d0\u4f9b\u4e86\u4e00\u4e2a <code>status</code> \u6a21\u5757\u6765\u8868\u793a\u72b6\u6001\u7801\uff1a</p> <pre><code>from fastapi import status\n@app.post(\"/status\", status_code=status.HTTP_201_CREATED)\nasync def status_code_test(name: str):\nreturn {\"name\": name}\n</code></pre> <p><code>status.HTTP_201_CREATED</code> \u8fd9\u79cd\u65b9\u5f0f\u66f4\u5bb9\u6613\u7406\u89e3\u72b6\u6001\u7801\u7684\u610f\u601d\uff0c\u56e0\u6b64\u6211\u4e2a\u4eba\u66f4\u63a8\u8350\u8fd9\u79cd\u5199\u6cd5\u3002</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3_1","title":"3\u3001\u8fd4\u56de\u9519\u8bef\u4fe1\u606f","text":"<pre><code>from fastapi import HTTPException\nfrom fastapi import status\nnames = {\"one\": \"mikigo\"}\n@app.get(\"/resp_info/{name_id}\")\nasync def resp_info(name_id: str):\nif name_id not in names:\nraise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail=\"Item not found\")\nreturn {\"item\": names[name_id]}\n</code></pre> <p>\u53d1\u9001\u8bf7\u6c42\uff1a</p> <p></p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_6","title":"\u4e03\u3001\u8868\u5355\u53ca\u6587\u4ef6","text":""},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1form","title":"1\u3001Form\u8868\u5355","text":"<p>\u5e38\u89c1\u7684\uff0c\u767b\u5f55\u63a5\u53e3\u4f1a\u63d0\u4ea4 <code>Form</code> \u8868\u5355\uff1a</p> <pre><code>from fastapi import Form\n@app.post(\"/login/\")\nasync def login(username: str = Form(), password: str = Form()):\nreturn {\"username\": username}\n</code></pre> <p>\u91cd\u542f\u670d\u52a1\uff0c\u539a\u793c\u8c22\uff0c\u4f60\u4f1a\u53d1\u73b0\u62a5\u9519\uff0c\u63d0\u793a\u8981\u5b89\u88c5\u4f9d\u8d56\uff1a<code>python-multipart</code>\uff0c\u5565\u4e5f\u522b\u95ee\u76f4\u63a5\u88c5\uff1a</p> <pre><code>pip3 install python-multipart\n</code></pre> <p>\u518d\u91cd\u542f\u670d\u52a1\u4e4b\u540e\uff0c\u901a\u8fc7\u8868\u5355\u5b57\u6bb5\u53d1\u9001\uff0c\u6ce8\u610f\u4e0d\u80fd\u7528 JSON \u53d1\u9001\uff1b</p> <p></p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_2","title":"2\u3001\u4e0a\u4f20\u6587\u4ef6","text":"<p>\u4e0a\u4f20\u6587\u4ef6\u529f\u80fd\u4e5f\u4f9d\u8d56\uff1a<code>python-multipart</code>\uff1b</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#21file","title":"2.1\u3001File","text":"<pre><code>from fastapi import File\n@app.post(\"/files/\")\nasync def create_file(file: bytes = File()):\nreturn {\"file_size\": len(file)}\n</code></pre> <p><code>File</code> \u662f\u76f4\u63a5\u7ee7\u627f\u81ea <code>Form</code> \u7684\u7c7b\uff0c\u628a\u6587\u4ef6\u5f53\u505a\u8868\u5355\u4e0a\u4f20\uff0c\u6e90\u7801\uff1a</p> <pre><code>class File(Form):\ndef __init__():\n...\n</code></pre> <p>\u4ee5 <code>bytes</code> \u5f62\u5f0f\u8bfb\u53d6\u548c\u63a5\u6536\u6587\u4ef6\u5185\u5bb9\uff0c\u8fd9\u79cd\u65b9\u5f0f\u628a\u6587\u4ef6\u7684\u6240\u6709\u5185\u5bb9\u90fd\u5b58\u50a8\u5728\u5185\u5b58\u91cc\uff0c\u9002\u7528\u4e8e\u5c0f\u578b\u6587\u4ef6\u3002</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#22uploadfile","title":"2.2\u3001UploadFile","text":"<pre><code>from fastapi import UploadFile\n@app.post(\"/uploadfile/\")\nasync def create_upload_file(file: UploadFile):\nreturn {\"filename\": file.filename}\n</code></pre> <p><code>UploadFile</code> \u4e0e <code>bytes</code> \u76f8\u6bd4\u66f4\u597d\u4e00\u70b9\uff0c\u5373\u4f7f\u662f\u5927\u6587\u4ef6\u4e5f\u4e0d\u4f1a\u5360\u7528\u6240\u6709\u5185\u5b58\uff0c\u56e0\u4e3a\u5b83\u5185\u90e8\u6709\u4e2a\u6587\u4ef6\u6700\u5927\u9650\u5236\uff0c\u8d85\u8fc7\u5c31\u4f1a\u5148\u5b58\u5165\u78c1\u76d8\uff1b</p> <pre><code>class UploadFile:\n\"\"\"\n    An uploaded file included as part of the request data.\n    \"\"\"\nspool_max_size = 1024 * 1024\nfile: typing.BinaryIO\nheaders: \"Headers\"\ndef __init__(\nself,\nfilename: str,\nfile: typing.Optional[typing.BinaryIO] = None,\ncontent_type: str = \"\",\n*,\nheaders: \"typing.Optional[Headers]\" = None,\n) -&gt; None:\nself.filename = filename\nself.content_type = content_type\nif file is None:\nself.file = tempfile.SpooledTemporaryFile(max_size=self.spool_max_size)  # type: ignore[assignment]  # noqa: E501\nelse:\nself.file = file\n... # \u7701\u7565\u90e8\u5206\u4ee3\u7801\n</code></pre> <p><code>spool_max_size</code> \u5c31\u662f\u9650\u5236\u6587\u4ef6\u7684\u5927\u5c0f\uff1b</p> <p>\u901a\u8fc7\u4e0a\u9762\u6e90\u7801\u7684\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u770b\u51fa\u6709 2 \u4e2a\u5fc5\u4f20\u53c2\u6570\uff1a</p> <ul> <li><code>filename</code>\uff1a\u4e0a\u4f20\u6587\u4ef6\u540d\u5b57\u7b26\u4e32\uff08<code>str</code>\uff09\uff0c\u4f8b\u5982\uff0c <code>mikigo.jpg</code>\uff1b</li> <li><code>content_type</code>\uff1a\u5185\u5bb9\u7c7b\u578b\uff08MIME \u7c7b\u578b / \u5a92\u4f53\u7c7b\u578b\uff09\u5b57\u7b26\u4e32\uff08<code>str</code>\uff09\uff0c\u4f8b\u5982\uff0c<code>image/jpeg</code>\uff1b</li> </ul> <p>\u5982\u679c file \u53c2\u6570\u4e0d\u4f20\uff0c\u9ed8\u8ba4\u4e3a None\uff0c\u90a3\u4e48\u5b9e\u9645\u8c03\u7528\u7684\u662f <code>tempfile</code> \u6a21\u5757\u5b50\u7684 <code>SpooledTemporaryFile</code> \uff0c\u8fd9\u4e2a\u7c7b\u4f1a\u5c06\u6570\u636e\u7f13\u5b58\u5728\u5185\u5b58\u4e2d\u76f4\u5230\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7 <code>max_size</code>\uff0c\u8fd9\u65f6\u6587\u4ef6\u5185\u5bb9\u4f1a\u88ab\u5199\u5165\u78c1\u76d8\uff1b</p> <p><code>UploadFile</code> \u6e90\u7801\u91cc\u9762\u6709\u8fd9\u51e0\u4e2a\u65b9\u6cd5\uff1a</p> <pre><code>class UploadFile:\n# \u7701\u7565\u90e8\u5206\u4ee3\u7801\nasync def write(self, data: bytes) -&gt; None:\nif self._in_memory:\nself.file.write(data)\nelse:\nawait run_in_threadpool(self.file.write, data)\nasync def read(self, size: int = -1) -&gt; bytes:\nif self._in_memory:\nreturn self.file.read(size)\nreturn await run_in_threadpool(self.file.read, size)\nasync def seek(self, offset: int) -&gt; None:\nif self._in_memory:\nself.file.seek(offset)\nelse:\nawait run_in_threadpool(self.file.seek, offset)\nasync def close(self) -&gt; None:\nif self._in_memory:\nself.file.close()\nelse:\nawait run_in_threadpool(self.file.close)\n</code></pre> <p>\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u662f\u5f02\u6b65(<code>async</code>)\u65b9\u6cd5\uff1a</p> <ul> <li><code>write(data)</code>\uff1a\u628a <code>data</code> \uff08<code>str</code> \u6216 <code>bytes</code>\uff09\u5199\u5165\u6587\u4ef6\uff1b</li> <li><code>read(size)</code>\uff1a\u6309\u6307\u5b9a\u6570\u91cf\u7684\u5b57\u8282\u6216\u5b57\u7b26\uff08<code>size</code> (<code>int</code>)\uff09\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff1b</li> <li><code>seek(offset)</code>\uff1a\u79fb\u52a8\u81f3\u6587\u4ef6 <code>offset\uff08int\uff09</code>\u5b57\u8282\u5904\u7684\u4f4d\u7f6e\uff1b</li> <li>\u4f8b\u5982\uff0c<code>await myfile.seek(0)</code> \u79fb\u52a8\u5230\u6587\u4ef6\u5f00\u5934\uff1b</li> <li>\u6267\u884c <code>await myfile.read()</code> \u540e\uff0c\u9700\u518d\u6b21\u8bfb\u53d6\u5df2\u8bfb\u53d6\u5185\u5bb9\u65f6\uff0c\u8fd9\u79cd\u65b9\u6cd5\u7279\u522b\u597d\u7528\uff1b</li> <li><code>close()</code>\uff1a\u5173\u95ed\u6587\u4ef6\u3002</li> </ul> <p>\u4f7f\u7528\u5f02\u6b65\u7684\u65f6\u5019\u7528 <code>await</code> \uff1a</p> <pre><code>contents = await myfile.read()\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_7","title":"\u516b\u3001\u4f9d\u8d56\u9879","text":"<p>\u4f9d\u8d56\u9879\u4e5f\u53eb\u201c\u4f9d\u8d56\u6ce8\u5165\u201d\uff0c\u4f7f\u7528 <code>Depends</code>\uff1a</p> <pre><code>from fastapi import Depends\nasync def common_parameters(\nq: Union[str, None] = None, skip: int = 0, limit: int = 100\n):\nreturn {\"q\": q, \"skip\": skip, \"limit\": limit}\n@app.get(\"/dps\")\nasync def depends_test(commons: dict = Depends(common_parameters)):\nreturn commons\n</code></pre> <p><code>Depends</code> \u9700\u8981\u4f20\u5165\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u4e00\u822c\u5c31\u7ed9\u51fd\u6570\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u4f9d\u8d56\u51fd\u6570\uff0c\u6ce8\u610f\u4e0d\u662f\u8c03\u7528\u51fd\u6570\uff0c\u6ca1\u6709\u62ec\u53f7\uff1b</p> <p>\u4f9d\u8d56\u51fd\u6570\u7684\u53c2\u6570\u548c\u67e5\u8be2\u53c2\u6570\u7684\u4e00\u6837\uff1b</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_8","title":"\u4e5d\u3001\u5b89\u5168\u6027","text":""},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1oauth2","title":"1\u3001OAuth2","text":"<p>\u529f\u80fd\u4e5f\u4f9d\u8d56\uff1a<code>python-multipart</code>\uff1b</p> <p><code>OAuth2</code> \u4e3b\u8981\u7528\u4e8e\u9a8c\u8bc1\u7528\u6237\u8eab\u4efd\uff1a</p> <pre><code>from fastapi.security import OAuth2PasswordBearer\nfrom fastapi import Depends\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\n@app.get(\"/auth/\")\nasync def auth_test(token: str = Depends(oauth2_scheme)):\nreturn {\"token\": token}\n</code></pre> <p>\u67e5\u770b <code>OpenAPI</code> \u6587\u6863\u4f60\u4f1a\u53d1\u73b0\uff0c\u53f3\u4e0a\u89d2\u6709\u4e2a Authorize \u6309\u94ae\uff0c\u70b9\u5b83\uff1a</p> <p></p> <p>\u5f39\u51fa\u6388\u6743\u8868\u5355\uff0c\u8f93\u5165 <code>username</code> \u4e0e <code>password</code> \u53ca\u5176\u5b83\u53ef\u9009\u5b57\u6bb5\uff1b</p> <p>\u8fd9\u4e2a\u662f FastAPI \u7684\u5b89\u5168\u5de5\u5177\uff1b</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_3","title":"2\u3001\u83b7\u53d6\u5f53\u524d\u7528\u6237","text":"<pre><code>from typing import Union\nfrom fastapi import Depends\nfrom fastapi.security import OAuth2PasswordBearer\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\nclass User(BaseModel):\nusername: str\nemail: Union[str, None] = None\nfull_name: Union[str, None] = None\ndisabled: Union[bool, None] = None\ndef fake_decode_token(token):\nreturn User(\nusername=token + \"fakedecoded\", email=\"john@example.com\", full_name=\"John Doe\"\n)\nasync def get_current_user(token: str = Depends(oauth2_scheme)):\nuser = fake_decode_token(token)\nreturn user\n@app.get(\"/users/me\")\nasync def read_users_me(current_user: User = Depends(get_current_user)):\nreturn current_user\n</code></pre> <p>\u5148\u521b\u5efa\u4e00\u4e2a\u8bf7\u6c42\u4f53\u6a21\u578b <code>User</code>\uff1b</p> <p>\u518d\u521b\u5efa\u4e00\u4e2a <code>get_current_user</code> \u4f9d\u8d56\u9879\uff0c\u5b83\u7684\u4f9d\u8d56\u9879\u662f <code>oauth2_scheme</code>\uff0c\u8fd9\u91cc\u63a5\u53d7\u4e00\u4e2a <code>token</code> \u5b57\u7b26\u4e32\uff0c\u5728\u7ed9\u53e6\u5916\u4e00\u4e2a\u51fd\u6570 <code>fake_decode_token</code> \u8fdb\u884c\u89e3\u7801\u540e\uff0c\u8fd4\u56de user \u5bf9\u8c61\uff1b</p> <p>\u6700\u540e\uff0c\u901a\u8fc7 <code>read_users_me</code> \u4f9d\u8d56\u9879\uff0c\u8fd4\u56de\u5f53\u524d\u7528\u6237\uff1b</p> <p>\u8fd9\u91cc\u5b9e\u9645\u662f\u4e00\u4e2a\u5d4c\u5957\u4f9d\u8d56\u7684\u5173\u7cfb\u3002</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_9","title":"\u5341\u3001\u4e2d\u95f4\u4ef6","text":"<p>\u4e2d\u95f4\u4ef6\u5c31\u76f8\u5f53\u4e8e\u4e00\u4e2a\u94a9\u5b50\u51fd\u6570\uff0c\u5728\u6bcf\u4e2a\u8bf7\u6c42\u88ab\u5904\u7406\u4e4b\u524d\uff0c\u4ee5\u53ca\u6ca1\u997f\u54cd\u5e94\u8fd4\u56de\u4e4b\u524d\u5de5\u4f5c\u3002\u5de5\u4f5c\u539f\u7406\u7c7b\u4f3c\u4e8e Python \u91cc\u9762\u7684\u5c5e\u6027\u62e6\u622a\u5668\u5c31\u53ef\u4ee5\u7406\u89e3\u3002</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_2","title":"1\u3001\u521b\u5efa\u4e2d\u95f4\u4ef6","text":"<p>\u4f7f\u7528\u88c5\u9970\u5668 <code>@app.middleware(\"http\")</code> \uff0c\u56fa\u5b9a\u7528\u6cd5\uff0c\u8bb0\u4f4f\u5c31\u597d\u4e86\uff1b</p> <pre><code>import time\nfrom fastapi import Request\n@app.middleware(\"http\")\nasync def add_process_time_header(request: Request, call_next):\nstart_time = time.time()\nresponse = await call_next(request)  # \u8def\u5f84\u64cd\u4f5c\nprocess_time = time.time() - start_time\nresponse.headers[\"X-Process-Time\"] = str(process_time)\nreturn response\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>request\uff0cFastAPI \u7684\u8bf7\u6c42\u5bf9\u8c61\uff1b</li> <li>\u4e00\u4e2a\u51fd\u6570 <code>call_next</code> \u5b83\u5c06\u63a5\u6536 <code>request</code> \u4f5c\u4e3a\u53c2\u6570\uff1b</li> <li>\u8fd9\u4e2a\u51fd\u6570\u5c06 <code>request</code> \u4f20\u9012\u7ed9\u76f8\u5e94\u7684 \u8def\u5f84\u64cd\u4f5c\uff1b</li> <li>\u7136\u540e\u5b83\u5c06\u8fd4\u56de\u7531\u76f8\u5e94\u7684\u8def\u5f84\u64cd\u4f5c\u751f\u6210\u7684 <code>response</code>\uff1b</li> <li>\u7136\u540e\u4f60\u53ef\u4ee5\u5728\u8fd4\u56de <code>response</code> \u524d\u8fdb\u4e00\u6b65\u4fee\u6539\u5b83\uff1b</li> </ul>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2cors","title":"2\u3001\u8de8\u57df\u8d44\u6e90\u5171\u4eab(CORS)","text":"<p>\u5728\u540c\u4e00\u4e2aIP\u5730\u5740\u4e2d\uff0c\u4f46\u4f7f\u7528\u4e0d\u540c\u7684\u534f\u8bae\u6216\u8005\u7aef\u53e3\uff0c\u5c31\u662f\u4e0d\u540c\u7684\u57df\uff1b</p> <p>\u4f7f\u7528 <code>CORSMiddleware</code> \uff1a</p> <pre><code>from fastapi.middleware.cors import CORSMiddleware\norigins = [\n\"http://localhost\",\n\"http://localhost:8080\",\n]\napp.add_middleware(\nCORSMiddleware,\nallow_origins=origins,  #  \u4e00\u4e2a\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684\u6e90\u5217\u8868;\nallow_credentials=True, # \u6307\u793a\u8de8\u57df\u8bf7\u6c42\u652f\u6301 cookies,\u9ed8\u8ba4\u662f False\nallow_methods=[\"*\"],  # \u4e00\u4e2a\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684 HTTP \u65b9\u6cd5\u5217\u8868;\nallow_headers=[\"*\"],  # \u4e00\u4e2a\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684 HTTP \u8bf7\u6c42\u5934\u5217\u8868\n)\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#sql","title":"\u5341\u4e00\u3001SQL\u6570\u636e\u5e93","text":"<p>FastAPI \u4f7f\u7528\u6570\u636e\u4e00\u822c\u91c7\u7528 Python \u793e\u533a\u6700\u6d41\u884c\u7684 ORM \u5e93\uff1aSQLAlchemy\uff1b</p> <p>\u5982\u679c\u4f60\u4f1a\u7528 Django \u7684 model\uff0c\u90a3\u57fa\u672c\u4e0a\u5c31\u5f88\u7b80\u5355\u4e86\uff1b</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_3","title":"1\u3001\u521b\u5efa\u6570\u636e\u5e93\u5de5\u7a0b\u6587\u4ef6","text":"<p>\u5148\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\u7684\u76ee\u5f55\uff0c\u91cc\u9762\u5305\u542b\u8fd9\u4e9b\u6587\u4ef6\uff1a</p> <pre><code>.\n\u2514\u2500\u2500 sql_app\n    \u251c\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 crud.py\n    \u251c\u2500\u2500 database.py\n    \u251c\u2500\u2500 main.py\n    \u251c\u2500\u2500 models.py\n    \u2514\u2500\u2500 schemas.py\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_4","title":"2\u3001\u5b89\u88c5","text":"<p>\u5b89\u88c5 SQLAlchemy \u975e\u5e38\u7b80\u5355\uff1a</p> <pre><code>pip3 install SQLAlchemy\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3sqlalchemy","title":"3\u3001\u521b\u5efaSQLAlchemy\u90e8\u4ef6","text":"<p>SQLAlchemy \u652f\u6301\u591a\u79cd\u5e38\u7528\u7684\u6570\u636e\u7c7b\u578b\uff1a</p> <p>\u4ee5 sqlite \u4e3e\u4f8b\uff1a</p> <pre><code># sql_app/database.py\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\n# \u5b9a\u4e49\u6570\u636e\u5e93\u7684URL\nSQLALCHEMY_DATABASE_URL = \"sqlite:///./sql_app.db\"  \n# \u521b\u5efa SQLAlchemy \u5f15\u64ce\nengine = create_engine(  \nSQLALCHEMY_DATABASE_URL, connect_args={\"check_same_thread\": False} \n)\n# \u4f7f\u7528sessionmaker\u521b\u5efa\u4e00\u4e2a\u4f1a\u8bdd\u5b9e\u4f8b\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\n# \u521b\u5efa\u4e00\u4e2aBase\u7c7b\uff0c\u7528\u8fd9\u4e2a\u7c7b\u7ee7\u627f\uff0c\u6765\u521b\u5efa\u6bcf\u4e2a\u6570\u636e\u5e93\u6a21\u578b\u6216\u7c7b\nBase = declarative_base()\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4_1","title":"4\u3001\u521b\u5efa\u6570\u636e\u5e93\u6a21\u578b","text":"<pre><code># sql_app/models.py\n# \u5bfc\u5165\u4e00\u4e9b\u6570\u636e\u5e93\u7c7b\u578b,\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e9b\u5b57\u6bb5\u7684\u7c7b\u578b\nfrom sqlalchemy import Boolean, Column, ForeignKey, Integer, String\n# \u5173\u7cfb\nfrom sqlalchemy.orm import relationship\n# \u5bfc\u5165\u90e8\u4ef6Base\u7c7b\u7528\u4e8e\u521b\u5efa\u6570\u636e\u5e93\u6a21\u578b\nfrom .database import Base\nclass User(Base):\n__tablename__ = \"users\"\n# \u6bcf\u4e00\u4e2a\u90fd\u4ee3\u8868\u5176\u76f8\u5e94\u6570\u636e\u5e93\u8868\u4e2d\u7684\u4e00\u5217\nid = Column(Integer, primary_key=True, index=True)\nemail = Column(String, unique=True, index=True)\nhashed_password = Column(String)\nis_active = Column(Boolean, default=True)\n# \u8868\u793a\u8be5\u8868\u4e0e\u5176\u4ed6\u76f8\u5173\u7684\u8868\u4e2d\u7684\u503c\nitems = relationship(\"Item\", back_populates=\"owner\")\nclass Item(Base):\n__tablename__ = \"items\"\nid = Column(Integer, primary_key=True, index=True)\ntitle = Column(String, index=True)\ndescription = Column(String, index=True)\nowner_id = Column(Integer, ForeignKey(\"users.id\"))\n# \u8868\u793a\u8be5\u8868\u4e0e\u5176\u4ed6\u76f8\u5173\u7684\u8868\u4e2d\u7684\u503c\nowner = relationship(\"User\", back_populates=\"items\")3\n</code></pre> <p>\u5f53\u8bbf\u95ee <code>my_user.items</code> \u65f6\uff0cSQLAlchemy \u5b9e\u9645\u4e0a\u4f1a\u4ece <code>items</code> \u8868\u4e2d\u7684\u83b7\u53d6\u4e00\u6279\u8bb0\u5f55\u5e76\u5728\u6b64\u5904\u586b\u5145\u8fdb\u53bb\u3002</p> <p>\u6ce8\u610f\uff0c\u6570\u636e\u5e93\u6a21\u578b\u90fd\u662f\u5c06\u7c7b\u578b\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9 Column \u6765\u5b9a\u4e49\u7684\uff0c\u4f8b\u5982\uff1a</p> <pre><code>email = Column(String)\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5-pydantic","title":"5\u3001\u521b\u5efa Pydantic \u6a21\u578b","text":"<p>Pydantic \u6a21\u578b\u548c\u6570\u636e\u5e93\u6a21\u578b\u7684\u5c5e\u6027\u4e00\u81f4\uff1a</p> <pre><code># sql_app/schemas.py\nfrom typing import List, Union\nfrom pydantic import BaseModel\n# ========== item\u7684Pydantic\u6a21\u578b ============\n# models\u91cc\u9762\u7684Item\u4e5f\u6709title\u548cdescription\u5c5e\u6027\nclass ItemBase(BaseModel):\ntitle: str\ndescription: Union[str, None] = None\nclass ItemCreate(ItemBase):\npass\n# \u521b\u5efa\u7528\u4e8e\u8bfb\u53d6/\u8fd4\u56de\u7684Pydantic\u6a21\u578b/\u6a21\u5f0f\nclass Item(ItemBase):\nid: int\nowner_id: int\n# \u4e3a Pydantic \u63d0\u4f9b\u914d\u7f6e \nclass Config:\norm_mode = True\n# ========== user\u7684Pydantic\u6a21\u578b ============\n# models\u91cc\u9762\u7684User\u4e5f\u6709email\u5c5e\u6027\nclass UserBase(BaseModel):\nemail: str\n# \u5728\u521b\u5efa\u65f6\u6709\u4e00\u4e2apassword\u5c5e\u6027\nclass UserCreate(UserBase):\npassword: str\n# \u521b\u5efa\u7528\u4e8e\u8bfb\u53d6/\u8fd4\u56de\u7684Pydantic\u6a21\u578b/\u6a21\u5f0f\n# \u8bfb\u53d6\u7528\u6237\uff08\u4ece API \u8fd4\u56de\uff09\u65f6\u5c06\u4f7f\u7528\u4e0d\u5305\u62ecpassword\u7684User Pydantic\u6a21\u578b\nclass User(UserBase):\nid: int\nis_active: bool\nitems: List[Item] = []\n# \u4e3a Pydantic \u63d0\u4f9b\u914d\u7f6e\nclass Config:\n# orm_mode\u5c06\u544a\u8bc9 Pydantic\u6a21\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u5373\u5b83\u4e0d\u662f\u4e00\u4e2adict\uff0c\u800c\u662f\u4e00\u4e2a ORM \u6a21\u578b\norm_mode = True\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#6crud","title":"6\u3001CRUD\u5de5\u5177","text":"<p>\u7528\u6765\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u4ea4\u4e92\uff0cCRUD\u5206\u522b\u4e3a\uff1a\u589e\u52a0\u3001\u67e5\u8be2\u3001\u66f4\u6539\u548c\u5220\u9664\uff0c\u5373\u589e\u5220\u6539\u67e5\uff1b</p>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#61","title":"6.1\u3001\u8bfb\u53d6\u6570\u636e","text":"<pre><code># sql_app/crud.py\nfrom sqlalchemy.orm import Session\n# \u5bfc\u5165SQLAlchemy\u6a21\u578b\u548cPydantic\u6a21\u578b\nfrom . import models, schemas\ndef get_user(db: Session, user_id: int):\n\"\"\"\u901a\u8fc7ID\u67e5\u8be2\u7528\u6237\"\"\"\nreturn db.query(models.User).filter(models.User.id == user_id).first()\ndef get_user_by_email(db: Session, email: str):\n\"\"\"\u901a\u8fc7email\u67e5\u8be2\u7528\u6237\"\"\"\nreturn db.query(models.User).filter(models.User.email == email).first()\ndef get_users(db: Session, skip: int = 0, limit: int = 100):\n\"\"\"\u83b7\u53d6\u6240\u6709\u7528\u6237\"\"\"\nreturn db.query(models.User).offset(skip).limit(limit).all()\ndef get_items(db: Session, skip: int = 0, limit: int = 100):\n\"\"\"\u83b7\u53d6\u6240\u6709\u9879\u76ee\"\"\"\nreturn db.query(models.Item).offset(skip).limit(limit).all()\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#62","title":"6.2\u3001\u521b\u5efa\u6570\u636e","text":"<pre><code># sql_app/crud.py\ndef create_user(db: Session, user: schemas.UserCreate):\n\"\"\"\u521b\u5efa\u7528\u6237\"\"\"\nfake_hashed_password = user.password + \"notreallyhashed\"\n# \u83b7\u53d6\u6570\u636e\u5e93\u6a21\u578b\u5b9e\u4f8b\ndb_user = models.User(email=user.email, hashed_password=fake_hashed_password)\n# add\u65b9\u6cd5\u6dfb\u52a0\u6570\u636e\ndb.add(db_user)\n# \u63d0\u4ea4\ndb.commit()\n# \u5237\u65b0\ndb.refresh(db_user)\nreturn db_user\ndef create_user_item(db: Session, item: schemas.ItemCreate, user_id: int):\ndb_item = models.Item(**item.dict(), owner_id=user_id)\ndb.add(db_item)\ndb.commit()\ndb.refresh(db_item)\nreturn db_item\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#7","title":"7\u3001\u4e3b\u7a0b\u5e8f","text":"<pre><code># sql_app/main.py\nfrom typing import List\nfrom fastapi import Depends, FastAPI, HTTPException\nfrom sqlalchemy.orm import Session\nfrom . import crud, models, schemas\nfrom .database import SessionLocal, engine\nmodels.Base.metadata.create_all(bind=engine)\napp = FastAPI()\n# \u521b\u5efa\u4f9d\u8d56\u9879,\u6bcf\u4e2a\u8bf7\u6c42\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u5e93\u4f1a\u8bdd/\u8fde\u63a5\uff08SessionLocal\uff09\ndef get_db():\ndb = SessionLocal()\ntry:\nyield db\nfinally:\ndb.close()\n# SQLAlchemy\u6a21\u578b\u901a\u8baf\u9700\u8981\u4e00\u4e9b\u7b49\u5f85\u65f6\u95f4,\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528async\u548cawait\u8bed\u53e5\uff1b\n@app.post(\"/users/\", response_model=schemas.User)\ndef create_user(user: schemas.UserCreate, db: Session = Depends(get_db)):\ndb_user = crud.get_user_by_email(db, email=user.email)\nif db_user:\nraise HTTPException(status_code=400, detail=\"Email already registered\")\nreturn crud.create_user(db=db, user=user)\n@app.get(\"/users/\", response_model=List[schemas.User])\ndef read_users(skip: int = 0, limit: int = 100, db: Session = Depends(get_db)):\nusers = crud.get_users(db, skip=skip, limit=limit)\nreturn users\n@app.get(\"/users/{user_id}\", response_model=schemas.User)\ndef read_user(user_id: int, db: Session = Depends(get_db)):\ndb_user = crud.get_user(db, user_id=user_id)\nif db_user is None:\nraise HTTPException(status_code=404, detail=\"User not found\")\nreturn db_user\n@app.post(\"/users/{user_id}/items/\", response_model=schemas.Item)\ndef create_item_for_user(\nuser_id: int, item: schemas.ItemCreate, db: Session = Depends(get_db)\n):\nreturn crud.create_user_item(db=db, item=item, user_id=user_id)\n@app.get(\"/items/\", response_model=List[schemas.Item])\ndef read_items(skip: int = 0, limit: int = 100, db: Session = Depends(get_db)):\nitems = crud.get_items(db, skip=skip, limit=limit)\nreturn items\n</code></pre>"},{"location":"%E5%90%8E%E7%AB%AF/FastAPI%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#8","title":"8\u3001\u6267\u884c\u9879\u76ee","text":"<pre><code>uvicorn sql_app.main:app --reload\n</code></pre> <p>\u4ee5\u4e0a\u5185\u5bb9\u662f\u5165\u95e8\u7248\u77e5\u8bc6\uff0c\u8fd8\u6709\u4e00\u4e9b\u8fdb\u9636\u7684\u5185\u5bb9\u6216\u8005\u66f4\u52a0\u5de5\u7a0b\u5316\u7684\u5185\u5bb9\uff0c\u6211\u60f3\u653e\u5230 FastAPI \u5b9e\u6218\u91cc\u9762\u53bb\u5199\uff0c\u597d\u5566\u5c31\u5148\u5230\u8fd9\u91cc\u5427\uff0c\u671f\u5f85\u8fdb\u9636\u5185\u5bb9\u3002</p>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8Asudo%E5%85%8D%E5%AF%86/","title":"Linux \u4e0a sudo \u514d\u5bc6","text":"<pre><code>sudo visudo\n</code></pre> <p>\u6216\u8005</p> <pre><code>sudo vim /etc/sudoers\n</code></pre> <p>\u627e\u5230</p> <pre><code># Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) ALL\n</code></pre> <p>\u52a0\u4e2a NOPASSWD: \u5c31\u597d\u4e86\uff1b</p> <pre><code># Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) NOPASSWD: ALL\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E7%94%A8pip3%E8%BF%98%E6%98%AFsudopip3/","title":"Linux \u4e0a\u5982\u4f55\u9009\u62e9\u7528 pip3 \u8fd8\u662f sudo pip3","text":""},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E7%94%A8pip3%E8%BF%98%E6%98%AFsudopip3/#1sudo-pip3","title":"\uff081\uff09sudo pip3","text":"<p>\u5982\u679c\u8fd9\u4e2a\u5305\u662f\u5e26\u6709\u547d\u4ee4\u884c\u5de5\u5177\u7684\uff0c\u63a8\u8350\u4f7f\u7528<code>sudo pip3 install xxx</code> \u8fdb\u884c\u5b89\u88c5;</p> <p>\u8fd9\u6837\u547d\u4ee4\u884c\u5de5\u5177\u624d\u80fd\u5199\u5165\u5230\u7cfb\u7edf\u76ee\u5f55\u4e0b\uff0c\u4e00\u822c\u662f\u5728 <code>/usr/local/bin/</code> \u4e0b\u9762\uff1b</p> <p>\u5982\u679c\u4f60\u6ca1\u6709\u52a0 <code>sudo</code> \u5b89\u88c5\uff0c\u547d\u4ee4\u884c\u5de5\u5177\u65e0\u6cd5\u5199\u5165\u5230\u7cfb\u7edf\u76ee\u5f55\u4e0b\uff0c\u800c\u662f\u5199\u5165\u5230 <code>$HOME/.local/bin</code>\uff0c\u8fd9\u4e2a\u8def\u5f84\u5f88\u660e\u663e\u4e0d\u662f\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\uff0c\u56e0\u6b64\u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528\u6b64\u547d\u4ee4\uff0c\u8981\u60f3\u4f7f\u7528\u5b83\u4f60\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a</p> <p>\u7b2c\u4e00\u79cd\uff1a</p> <pre><code># \u8fdb\u5165\u5230\u547d\u4ee4\u76ee\u5f55 \ncd $HOME/.local/bin/\n# \u7ed9\u547d\u4ee4\u6267\u884c\u8d4b\u6743\u9650\nsudo chmod +x mycmd\n# \u6267\u884c\u5b83\n./mycmd\n</code></pre> <p>\u7b2c\u4e8c\u79cd\uff1a</p> <p>\u5c06 <code>$HOME/.local/bin</code> \u6dfb\u52a0\u5230 <code>PATH</code> \u91cc\u9762:</p> <p>\u4e34\u65f6\u4fee\u6539\uff1a</p> <pre><code>export PATH=/home/uos/.local/bin:$PATH\n#\u6216\u8005\u628aPATH\u653e\u5728\u524d\u9762\nexport PATH=$PATH:/home/uos/.local/bin\n</code></pre> <p>\u7528\u6237\u7ea7\u522b\u6c38\u4e45\u4fee\u6539\uff1a</p> <pre><code>vim ~/.bashrc\n# \u5728\u6700\u540e\u4e00\u884c\u52a0\u4e0a\nexport PATH=$PATH:/home/uos/.local/bin\n</code></pre> <p>\u7cfb\u7edf\u7ea7\u522b\u6c38\u4e45\u4fee\u6539\uff1a</p> <pre><code>vim ~/.bash_profile\n# \u5728\u6700\u540e\u4e00\u884c\u52a0\u4e0a\nexport PATH=$PATH:/home/uusama/mysql/bin\n</code></pre> <p>\u4f60\u770b\u5982\u679c\u5e26\u547d\u4ee4\u884c\u5de5\u5177\u7684\u5e93\uff0c\u5b89\u88c5\u7684\u65f6\u5019\u6ca1\u6709\u52a0 <code>sudo</code> \u4f60\u8981\u591a\u505a\u591a\u5c11\u4e8b\u60c5\uff1b</p> <p>\u6240\u4ee5\u8bf7\u8bb0\u4f4f\uff0c\u5e26\u6709\u547d\u4ee4\u884c\u5de5\u5177\u7684\u4e09\u65b9\u5e93\uff0c\u5b89\u88c5\u7684\u65f6\u5019\u4f7f\u7528 <code>sudo pip3 install</code>\u3002</p>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E7%94%A8pip3%E8%BF%98%E6%98%AFsudopip3/#2pip3","title":"\uff082\uff09pip3","text":"<p>\u5982\u679c\u8fd9\u4e2a\u5e93\u6ca1\u6709\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u6216\u8005\u8bf4\u5b83\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4e0d\u9700\u8981\u5199\u5165\u7cfb\u7edf\u76ee\u5f55\uff0c\u4f60\u4f7f\u7528 pip3 \u6216 sudo pip3 \u5b89\u88c5\u90fd\u53ef\u4ee5\uff1b</p> <p>\u4f46\u662f\uff0c\u6211\u4e2a\u4eba\u63a8\u8350\u4e0d\u8981\u52a0 <code>sudo</code>\uff1b</p> <p>\u539f\u56e0\u5c31\u9700\u8981\u4ecb\u7ecd\u4e00\u70b9\u70b9\u80cc\u666f\u77e5\u8bc6\uff1a</p> <p>\u5728 Linux \u4e0a\uff0cPython \u4e09\u65b9\u5305\u901a\u5e38\u88ab\u5b89\u88c5\u5728\u4ee5\u4e0b\u4e09\u4e2a\u8def\u5f84\u4e2d\uff1a</p> <ol> <li><code>/usr/lib/pythonX.X/site-packages</code></li> </ol> <p>\u8fd9\u4e2a\u8def\u5f84\u4e2d\u5b89\u88c5\u7684\u662f\u7cfb\u7edf\u9ed8\u8ba4\u7684 Python \u89e3\u91ca\u5668\u7684\u4e09\u65b9\u5305\uff0cX.X \u4ee3\u8868 Python \u7248\u672c\u53f7\uff0c\u5982 2.7\u30013.6;</p> <ol> <li><code>/usr/local/lib/pythonX.X/site-packages</code></li> </ol> <p>\u8fd9\u4e2a\u8def\u5f84\u4e2d\u5b89\u88c5\u7684\u662f\u7528\u6237\u81ea\u5df1\u5b89\u88c5\u7684 Python \u89e3\u91ca\u5668\u7684\u4e09\u65b9\u5305\uff0cX.X \u4ee3\u8868 Python \u7248\u672c\u53f7\uff0c\u5982 2.7\u30013.6;</p> <ol> <li><code>$HOME/.local/lib/pythonX.X/site-packages</code></li> </ol> <p>\u8fd9\u4e2a\u8def\u5f84\u4e2d\u5b89\u88c5\u7684\u662f\u5f53\u524d\u7528\u6237\u7684 Python \u89e3\u91ca\u5668\u7684\u4e09\u65b9\u5305\uff0cX.X\u4ee3\u8868 Python \u7248\u672c\u53f7\uff0c\u5982 2.7\u30013.6;</p> <p>\u5728\u52a0\u8f7dPython\u4e09\u65b9\u5305\u65f6\uff0c\u7cfb\u7edf\u4f1a\u6309\u7167\u4ee5\u4e0b\u987a\u5e8f\u67e5\u627e\u4e09\u65b9\u5305\u7684\u8def\u5f84\uff1a</p> <ol> <li>\u5148\u67e5\u627e\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u662f\u5426\u6709\u9700\u8981\u7684\u5305;\u60f3</li> <li>\u67e5\u627e <code>$HOME/.local/lib/pythonX.X/site-packages</code>;</li> <li>\u67e5\u627e <code>/usr/local/lib/pythonX.X/site-packages</code></li> <li>\u67e5\u627e <code>/usr/lib/pythonX.X/site-packages</code></li> </ol> <p>\u5982\u679c\u5728\u4ee5\u4e0a\u8def\u5f84\u4e2d\u627e\u5230\u4e86\u9700\u8981\u7684\u5305\uff0c\u5c31\u4f1a\u52a0\u8f7d\u5b83\u4eec\uff1b</p> <p>\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5219\u4f1a\u629b\u51faImportError\u5f02\u5e38\uff1b</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u76f8\u540c\u7684\u5305\u5b58\u5728\u4e8e\u591a\u4e2a\u8def\u5f84\u4e2d\uff0c\u7cfb\u7edf\u4f1a\u52a0\u8f7d\u6700\u5148\u627e\u5230\u7684\u90a3\u4e2a\u5305\uff0c\u800c\u4e0d\u662f\u540e\u9762\u627e\u5230\u7684\u90a3\u4e2a\u5305\uff1b</p> <p>\u56e0\u6b64\uff0c\u5982\u679c\u6709\u591a\u4e2aPython\u89e3\u91ca\u5668\u6216\u7248\u672c\uff0c\u5e76\u4e14\u4f7f\u7528\u4e86\u4e0d\u540c\u7684\u8def\u5f84\u5b89\u88c5\u4e09\u65b9\u5305\uff0c\u5c31\u9700\u8981\u786e\u8ba4\u52a0\u8f7d\u7684\u5305\u662f\u5426\u6b63\u786e\u3002</p> <p>\u4f7f\u7528 <code>pip3</code> \u5b89\u88c5\u7684\u65f6\u5019\u662f\u5b89\u88c5\u5230 <code>$HOME/.local/lib/pythonX.X/site-packages</code> \u8def\u5f84\u4e0b\uff1b</p> <p>\u800c\u4f7f\u7528 <code>sudo pip3</code> \u5b89\u88c5\u7684\u65f6\u5019\u662f\u5b89\u88c5\u5230 <code>/usr/local/lib/pythonX.X/site-packages</code> \u8def\u5f84\u4e0b</p> <p>\u57fa\u4e8e\u524d\u9762\u7684\u80cc\u666f\u77e5\u8bc6\uff0c\u8fd9\u4e2a\u8def\u5f84\u662f\u6392\u5728\u524d\u9762\u7684\uff0c\u662f\u4f1a\u88ab\u4f18\u5148\u52a0\u8f7d\u5230\uff1b</p> <p>\u56e0\u6b64\uff0c\u7ed3\u8bba\uff1a\u6211\u59cb\u7ec8\u63a8\u8350\u4f18\u5148\u8003\u8651\u4f7f\u7528 <code>pip3</code> \u5b89\u88c5\uff08\u4e0d\u52a0<code>sudo</code> \uff09\uff1b</p> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u51ed\u5565\u4f18\u5148\u52a0\u8f7d\u5230\uff0c\u6211\u5c31\u8981\u7528\u5b83\u5462\uff1f\u4f60\u7684\u9886\u5bfc\u505a\u5565\u90fd\u5148\u60f3\u5230\u4f60\uff0c\u4f60\u89c9\u5f97\u662f\u4e0d\u662f\u597d\u4e8b\uff0c\u4f60\u7ec6\u54c1\uff5e\uff5e</p>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E5%AE%89%E8%A3%85Node.js/","title":"Linux \u4e0a\u5b89\u88c5 Node.js","text":"<p>\u3010\u65b9\u6cd5\u4e00\u3011</p> <p>\u5728\u5b98\u7f51\u4e0b\u8f7d\uff1ahttps://nodejs.cn/download/current/</p> <p>\u5efa\u8bae\u9009\u62e9\u6700\u65b0\u7684 <code>LTS</code> \u7248\u672c\uff1b</p> <p>\u4e0b\u8f7d\u4e0b\u6765\u52a0\u538b\u5230 <code>/opt</code> \u76ee\u5f55\u4e0b\uff1a</p> <pre><code>sudo ln -s /opt/node/bin/npm   /usr/bin/npm\nsudo ln -s /opt/node/bin/node   /usr/bin/node\n</code></pre> <p>\u3010\u65b9\u6cd5\u4e8c\u3011</p> <p>Node.js v20.x</p> <pre><code>curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -\nsudo apt install -y nodejs\n</code></pre> <p>Node.js v19.x</p> <pre><code>curl -fsSL https://deb.nodesource.com/setup_19.x | sudo -E bash -\nsudo apt install -y nodejs\n</code></pre> <p>Node.js v18.x</p> <pre><code>curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -\nsudo apt install -y nodejs\n</code></pre> <p>Node.js v16.x</p> <pre><code>curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -\nsudo apt install -y nodejs\n</code></pre> <p>Node.js LTS (v18.x)</p> <pre><code># \u4e0b\u8f7ddeb\u6e90\uff0c\u5e76\u5237\u65b0\ncurl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -\n# apt \u5b89\u88c5nodejs npm\nsudo apt install -y nodejs\n</code></pre> <p>Node.js Current (v20.x)</p> <pre><code>curl -fsSL https://deb.nodesource.com/setup_current.x | sudo -E bash -\nsudo apt install -y nodejs\n</code></pre> <p>\u6211\u4e2a\u4eba\u63a8\u8350\u3010\u65b9\u6cd5\u4e00\u3011</p> <p>\u5b89\u88c5\u5b8c\u4e4b\u540e\u67e5\u770b\u7248\u672c\uff0c\u6ca1\u62a5\u9519\u5c31\u8bf4\u660e\u5b89\u88c5\u597d\u4e86\uff1b</p> <pre><code>mikigo@mikigo-PC:~$ node -v\nv10.24.0\nmikigo@mikigo-PC:~$ npm -v\n5.8.0\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E5%AE%89%E8%A3%85Python3.9.9/","title":"Linux \u4e0a\u5b89\u88c5 Python 3.9.9","text":"<p>\u5728 deepin \u4e0a\u9ed8\u8ba4\u662f Python \u7248\u672c\u662f 3.7.3 \uff0c\u5728\u505a\u4e00\u4e9b Django \u9879\u76ee\u7684\u65f6\u5019\u9700\u8981\u7528\u5230 3.9 \u7248\u672c\uff1b</p> <p>\u6b64\u811a\u672c\u76f4\u63a5\u4e0b\u8f7d\u5e76\u5b89\u88c5 Python 3.9.9\uff0c\u590d\u5236\u4ee5\u4e0b\u811a\u672c\u6267\u884c\u5728\u672c\u5730\u6267\u884c\u5373\u53ef\uff1b</p> <pre><code>#!/bin/bash\n# \u5237\u65b0\u6e90\nsudo apt update\n# \u88c5\u4f9d\u8d56\nsudo apt install -y zlib1g-dev libbz2-dev libssl-dev libncurses5-dev libsqlite3-dev libreadline-dev tk-dev libgdbm-dev libdb-dev libpcap-dev xz-utils libexpat1-dev liblzma-dev libffi-dev libc6-dev\n# \u4e0b\u8f7d\u6e90\u7801\nwget https://cdn.npm.taobao.org/dist/python/3.9.9/Python-3.9.9.tgz\n# \u89e3\u538b\ntar -xzf Python-3.9.9.tgz\n# \u653e\u5728/usr/local/share/\u4e0b\nsudo mv  Python-3.9.9 /usr/local/share/\n# \u7f16\u8bd1\ncd  /usr/local/share/Python-3.9.9/\n./configure --prefix=/usr/local/python3.9\n# \u8bbe\u7f6e\u4f18\u5316\u9009\u9879--enable-optimizations\n# ./configure --prefix=/usr/local/python3.9 --enable-optimizations\nmake -j4\nsudo make install\n# \u8bbe\u7f6e\u8f6f\u8fde\u63a5\nsudo ln -s /usr/local/python3.9/bin/python3.9 /usr/bin/python3.9\nsudo ln -s /usr/local/python3.9/bin/python3.9-config /usr/bin/python3.9-config\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2VNC%E9%85%8D%E7%BD%AE/","title":"Linux \u4e0a\u8fdc\u7a0b\u684c\u9762 VNC \u670d\u52a1\u914d\u7f6e","text":""},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2VNC%E9%85%8D%E7%BD%AE/#_1","title":"\u670d\u52a1\u7aef","text":"<pre><code># \u5b89\u88c5vnc server\nsudo apt install x11vnc vnc4server -y;\n# \u914d\u7f6e\u670d\u52a1\u663e\u793a\u3001\u7aef\u53e3\u7b49\nsudo x11vnc -display :0 -auth /var/run/lightdm/root/:0 -forever -bg -o /var/log/x11vnc.log -rfbauth /etc/x11vnc.pass -shared -noxdamage -xrandr \"resize\" -rfbport 5900;\n# \u914d\u7f6e\u8bbf\u95ee\u5bc6\u7801\nsudo x11vnc -storepasswd 1 /etc/x11vnc.pass;\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/Linux%E4%B8%8A%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2VNC%E9%85%8D%E7%BD%AE/#_2","title":"\u5ba2\u6237\u7aef","text":"<pre><code>#\u5b89\u88c5tigervnc-viewer\nsudo apt install tigervnc-viewer\n</code></pre> <p>\u5ba2\u6237\u7aef\u6253\u5f00 <code>tigervnc-viewer</code>\uff0c\u914d\u7f6e\u8981\u8fdc\u7a0b\u8fde\u63a5\u670d\u52a1\u5668\u5730\u5740\uff0c\u70b9\u51fb <code>Connect</code>\uff0c\u8f93\u5165\u5bc6\u7801\u5373\u53ef\u3002</p>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/","title":"\u914d\u7f6e Python \u6e90\u7684\u51e0\u79cd\u65b9\u6cd5","text":""},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#1","title":"\uff081\uff09\u4e34\u65f6\u6dfb\u52a0\u4e09\u65b9\u6e90","text":"<pre><code>pip3 install funnylog -i https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> <p>\u5982\u679c\u4e0d\u5c0f\u5fc3\u6dfb\u52a0\u4e86\u591a\u4e2a\uff0c\u5c31\u50cf\u8fd9\u6837\uff1a</p> <pre><code>pip3 install xxx -i yyyy -i zzzz\n</code></pre> <p>\u53ea\u6709\u6700\u540e\u4e00\u4e2a -i \u6307\u5b9a\u7684\u4e09\u65b9\u6e90\u751f\u6548\uff1b</p>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#2requirementstxt","title":"\uff082\uff09requirements.txt \u4e34\u65f6\u6dfb\u52a0\u4e09\u65b9\u6e90","text":"<pre><code># requirements.txt\n-i https://pypi.tuna.tsinghua.edu.cn/simple\n\nfunnylog\n...\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#3","title":"\uff083\uff09\u547d\u4ee4\u884c\u6c38\u4e45\u914d\u7f6e","text":"<ul> <li>\u9002\u7528\u4e8e <code>pip3 install</code> \u7684\u5b89\u88c5\u65b9\u5f0f\uff08\u666e\u901a\u7528\u6237\uff09\uff1a</li> </ul> <pre><code>pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> <ul> <li>\u9002\u7528\u4e8e <code>sudo pip3 install</code> \u7684\u5b89\u88c5\u65b9\u5f0f\uff08root\u7528\u6237\uff09\uff1a</li> </ul> <pre><code>sudo pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> <p>\u53ef\u4ee5\u518d\u6b21\u6267\u884c\u518d\u6dfb\u52a0\u4e00\u4e2a:</p> <pre><code>pip3 config set global.extra-index-url https://pypi.douban.com/simple/\n</code></pre> <p>\u6ce8\u610f <code>global.extra-index-url</code> \u91cc\u9762\u548c\u4e0a\u9762\u4e0d\u540c\uff1b</p>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#4","title":"\uff084\uff09\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u6c38\u4e45\u914d\u7f6e","text":"<ul> <li>\u9002\u7528\u4e8e <code>pip3 install</code> \u7684\u5b89\u88c5\u65b9\u5f0f\uff08\u666e\u901a\u7528\u6237\uff09\uff1a</li> </ul> <pre><code>vi ~/.config/pip/pip.conf\n</code></pre> <p>\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>[global]\nindex-url = https://pypi.douban.com/simple/\nextra-index-url = https://pypi.tuna.tsinghua.edu.cn/simple\nextra-index-url = https://mirrors.aliyun.com/pypi/simple/\n</code></pre> <ul> <li>\u9002\u7528\u4e8e <code>sudo pip3 install</code> \u7684\u5b89\u88c5\u65b9\u5f0f\uff08root\u7528\u6237\uff09\uff1a</li> </ul> <pre><code>sudo vi /root/.config/pip/pip.conf\n</code></pre> <p>\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>[global]\nindex-url = https://pypi.douban.com/simple/\nextra-index-url = https://pypi.tuna.tsinghua.edu.cn/simple\nextra-index-url = https://mirrors.aliyun.com/pypi/simple/\n</code></pre> <ul> <li>\u5168\u5c40\u914d\u7f6e</li> </ul> <pre><code>vi /etc/pip.conf\n</code></pre> <p>\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>[global]\nindex-url = https://pypi.douban.com/simple/\nextra-index-url = https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#5","title":"\uff085\uff09\u4f5c\u7528\u57df","text":"<ul> <li>\u4e34\u65f6\u6dfb\u52a0\u7684\u65b9\u5f0f\uff0c\u53ea\u5728\u672c\u6b21\u64cd\u4f5c\u6709\u6548\uff08\u4e0d\u533a\u5206\u666e\u901a\u7528\u6237\u3001root\u7528\u6237\u3001\u5168\u5c40\u914d\u7f6e\uff09\uff1b</li> <li>\u666e\u901a\u7528\u6237\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u53ea\u5728\u666e\u901a\u7528\u6237\u6743\u9650\u4e0b\u751f\u6548\uff0c\u5c31\u662f\u53ea\u6709\u4f7f\u7528 <code>pip3 install</code> \u751f\u6548\uff1b</li> <li>root\u7528\u6237\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u53ea\u5728root\u7528\u6237\u6743\u9650\u4e0b\u751f\u6548\uff0c\u5c31\u662f\u53ea\u6709\u4f7f\u7528 <code>sudo pip3 install</code> \u751f\u6548\uff1b</li> <li>\u5168\u5c40\u914d\u7f6e\u65b9\u5f0f\uff0c\u6240\u6709\u60c5\u51b5\u4e0b\u5747\u751f\u6548\uff1b</li> </ul>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E9%85%8D%E7%BD%AEPython%E6%BA%90%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/#6","title":"\uff086\uff09\u5e38\u7528\u7684\u51e0\u4e2a\u4e09\u65b9\u6e90","text":"<pre><code># \u6e05\u534e\nhttps://pypi.tuna.tsinghua.edu.cn/simple/\n# \u963f\u91cc\nhttps://mirrors.aliyun.com/pypi/simple/\n# \u4e2d\u56fd\u79d1\u6280\u5927\u5b66\nhttps://pypi.mirrors.ustc.edu.cn/simple/\n# \u534e\u4e2d\u79d1\u6280\u5927\u5b66\nhttps://pypi.hustunique.com/simple/\n# \u4e0a\u6d77\u4ea4\u901a\u5927\u5b66\nhttps://mirror.sjtu.edu.cn/pypi/web/simple/\n# \u8c46\u74e3\nhttps://pypi.douban.com/simple/\n</code></pre> <p>\u8865\u5145\u5c0f\u77e5\u8bc6\uff0cpip \u4e0b\u8f7d\u5b89\u88c5\u8d85\u65f6\u8bbe\u7f6e\uff1a</p> <pre><code>pip3 config set global.timeout 10000\n</code></pre> <p>\u5410\u69fd\u4e00\u4e0b\u963f\u91cc\u7684\u955c\u50cf\uff0c\u66f4\u65b0\u76f8\u5f53\u4e0d\u53ca\u65f6\uff0c\u6211\u4e2a\u4eba\u4e0d\u5efa\u8bae\u4f7f\u7528\u54c8\u3002</p>"},{"location":"%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E6%96%B9%E6%A1%88/%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E6%9C%8D%E5%8A%A1/","title":"\u914d\u7f6e\u5f00\u673a\u81ea\u542f\u670d\u52a1","text":"<p>\u5199\u5f00\u673a\u81ea\u542f\u670d\u52a1\u6587\u4ef6\uff1a</p> <pre><code>sudo vim /lib/systemd/system/test.service\n</code></pre> <p>\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>[Unit]\nDescription=Test Service\nAfter=multi-user.target\n\n[Service]\nUser=uos\nGroup=uos\nType=idle\nWorkingDirectory=/home/uos/ocr_env\nExecStart=$do you shell scripts$\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>\u6ce8\u610f\uff0c\u5728 <code>ExecStart=$do you shell scripts$</code> \u91cc\u9762\u914d\u7f6e\u4f60\u7684\u8981\u6267\u884c\u7684\u547d\u4ee4\uff0c\u6bd4\u5982\uff1a<code>ExecStart=bash test.sh</code></p> <p>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u7684\u6743\u9650\uff1a</p> <pre><code>sudo chmod 644 /lib/systemd/system/test.service\n</code></pre> <p>\u81ea\u542f\u670d\u52a1\u751f\u6548\uff1a</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable test.service\n</code></pre> <p>\u67e5\u770b\u670d\u52a1\u72b6\u6001\uff1a</p> <pre><code>sudo systemctl status test.service\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/","title":"Httpx","text":"<pre><code># =============================\n# Author : mikigo\n# Time   : 2023/3/17\n# =============================\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#1","title":"1\u3001\u7b80\u4ecb","text":"<p>\u867d\u7136 Requests \u57fa\u672c\u5df2\u7ecf\u53ef\u4ee5\u89e3\u51b3\u5927\u90e8\u5206\u95ee\u9898\uff0c\u4f46\u4ecd\u7136\u6709\u5c11\u90e8\u5206\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\uff0c\u6bd4\u5982\uff1aHTTP/2\uff08Requests \u53ea\u652f\u6301HTTP/1.1\uff09\u3001\u5f02\u6b65\u8bf7\u6c42\u7b49\uff0c\u8fd9\u5c31\u9700\u8981\u7528\u5230 httpx\uff1b</p> <p>httpx \u53f7\u79f0\u4e0b\u4e00\u4ee3 HTTP \u5ba2\u6237\u7aef\uff0c\u6700\u5f00\u59cb\u662f\u4e3a\u4e86\u89e3\u51b3 Requests \u4e0d\u652f\u6301\u5f02\u6b65\u8bf7\u6c42\u7684\u95ee\u9898\uff0c\u5de5\u7a0b\u540d\u79f0\u5c31\u53eb\uff1arequests-async\uff0c\u540e\u9762\u6574\u4f53\u8fc1\u79fb\u5230 httpx \u4ed3\u5e93\u4e2d\u3002</p> <p>\u7531\u4e8e httpx \u4ece\u4e00\u5f00\u59cb\u5c31\u662f\u57fa\u4e8e Requests \u6765\u641e\u7684\uff0c\u6240\u4ee5\u5b83\u63d0\u4f9b\u7684\u63a5\u53e3\u51e0\u4e4e\u548c Requests \u4fdd\u6301\u4e00\u81f4\uff0c\u8fd9\u5bf9\u4e8e\u6211\u4eec\u4f7f\u7528\u6765\u8bf4\u5c31\u7b80\u5355\u591a\u4e86\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#2","title":"2\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1adeepin</p> <pre><code>pip3 install httpx\n</code></pre> <p>\u5b83\u8fd8\u63d0\u4f9b\u547d\u4ee4\u884c\u5de5\u5177\uff1a</p> <pre><code>pip3 install 'httpx[cli]'\n</code></pre> <p>\u6211\u4e00\u822c\u4e0d\u548b\u4e60\u60ef\u7528\u547d\u4ee4\u884c\u505a\u63a5\u53e3\u8bf7\u6c42\uff0c\u6240\u4ee5\u57fa\u672c\u90fd\u4e0d\u88c5\u8fd9\u73a9\u610f\u513f\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#3","title":"3\u3001\u7b80\u5355\u7684\u4f8b\u5b50","text":"<p>\u524d\u9762\u8bf4\u4e86 httpx \u548c Requests \u63d0\u4f9b\u7684\u63a5\u53e3\u51e0\u4e4e\u4e00\u81f4\uff0c\u54b1\u4eec\u5c31\u7528 Requests \u6559\u7a0b\u91cc\u9762\u7684\u4f8b\u5b50\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#31get","title":"3.1\u3001GET\u8bf7\u6c42","text":"<pre><code>import httpx\nr = httpx.get(\"https://www.baidu.com\")\nprint(r.status_code)\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>200\n&lt;html&gt;\n&lt;head&gt;\n        &lt;script&gt;\n                location.replace(location.href.replace(\"https://\",\"http://\"));\n        &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n        &lt;noscript&gt;&lt;meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\"&gt;&lt;/noscript&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#32post","title":"3.2\u3001POST\u8bf7\u6c42","text":"<pre><code>import httpx\nr = httpx.post('https://httpbin.org/post', data={'key': 'value'})\nprint(r.status_code)\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>200\n{\n  \"args\": {}, \n  \"data\": \"\", \n  \"files\": {}, \n  \"form\": {\n    \"key\": \"value\"\n  }, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Content-Length\": \"9\", \n    \"Content-Type\": \"application/x-www-form-urlencoded\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"python-httpx/0.23.3\", \n    \"X-Amzn-Trace-Id\": \"Root=1-642f820c-019ccf8938faee564386038e\"\n  }, \n  \"json\": null, \n  \"origin\": \"110.191.179.216\", \n  \"url\": \"https://httpbin.org/post\"\n}\n</code></pre> <p>\u4f60\u770b\uff0c\u7b80\u76f4\u662f\u4e00\u6bdb\u4e00\u6837\u3002</p> <p>\u884c\u5566\uff0c\u90fd\u4e00\u6837\u54b1\u4eec\u5c31\u4e0d\u804a\u4e86\uff0c\u540e\u9762\u91cd\u70b9\u8bb2\u8bb2\u4e0d\u4e00\u6837\u7684\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#4","title":"4\u3001\u5f02\u6b65\u8bf7\u6c42","text":"<p>\u5f02\u6b65\u662f\u4e00\u79cd\u5e76\u53d1\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u901a\u5e38\u8bf4\u7684\u201c\u534f\u7a0b\u201d\uff0c\u6bd4\u591a\u7ebf\u7a0b\u6548\u7387\u9ad8\u5f88\u591a\uff1b</p> <p>httpx \u7684\u5f02\u6b65\u8bf7\u6c42\u4e3b\u8981\u4f9d\u8d56\u4e8e\u6807\u51c6\u5e93 asyncio\uff0c\u4f7f\u7528 async \u548c await \u5173\u952e\u8bcd\uff1b</p> <pre><code>import asyncio\nimport httpx\nasync def my_get():\nasync with httpx.AsyncClient() as client:\nr = await client.get(\"https://www.baidu.com\")\nprint(r.text)\nif __name__ == '__main__':\nasyncio.run(my_get())\n</code></pre> <p>client \u5bf9\u8c61\u4f60\u53ef\u4ee5\u7406\u89e3\u4e3a Requests \u91cc\u9762\u7684 Session \u5bf9\u8c61\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Httpx/#5http2","title":"5\u3001HTTP/2","text":"<p>\u8001\u5b9e\u8bb2 HTTP/2 \u7684\u7f51\u7ad9\u6211\u8fd8\u6ca1\u673a\u4f1a\u722c\u8fc7\uff0c\u6240\u4ee5\u6211\u8fd9\u91cc\u8fd8\u4e0d\u592a\u597d\u627e\u4f8b\u5b50\uff1b</p> <p>\u5982\u679c\u4f60\u5728\u4e0d\u5c0f\u5fc3\u9047\u5230\u4e86\u4e5f\u522b\u614c\uff0c\u53ea\u9700\u8981\u52a0\u4e00\u4e2a\u53c2\u6570\u5c31\u597d\u4e86\uff1b</p> <pre><code>import asyncio\nimport httpx\nasync def my_get():\nasync with httpx.AsyncClient(http2=True) as client:\nr = await client.get(\"https://www.xxxxxx.com\")\nprint(r.text)\nif __name__ == '__main__':\nasyncio.run(my_get())\n</code></pre> <p>\u5728 <code>httpx.AsyncClient()</code> \u91cc\u9762\uff0c\u9ed8\u8ba4\u53c2\u6570: </p> <pre><code>class AsyncClient:\ndef __init__(\nself,\n...\nhttp1: bool = True,\nhttp2: bool = False,\n...\n):\npass  # \u7701\u7565\u5176\u4ed6\u6e90\u7801\n</code></pre> <p>\u4e5f\u5c31\u662f\u8bf4\u9ed8\u8ba4\u662f\u5f00\u542f\u7684 http1\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u5728\u5b9e\u4f8b\u5316 client \u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u4f20\u5165\u53c2\u6570 <code>http2=True</code> \u5373\u53ef\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/","title":"Requests","text":"<pre><code># =============================\n# Author : mikigo\n# Time   : 2023/3/17\n# =============================\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#1","title":"1\u3001\u7b80\u4ecb","text":"<p>Requests \u662f Python \u6700\u4e45\u8d1f\u76db\u540d\u7684 HTTP \u5e93\uff0c\u6ca1\u6709\u4e4b\u4e00\uff1bK \u795e\uff08Kenneth Reitz\uff09\u7684 for humans \u7cfb\u5217\u4e2d\u6700\u6709\u540d\u7684\u4e00\u4e2a\uff1b</p> <p></p> <p>\u505a\u722c\u866b\u3001\u6570\u636e\u5206\u6790\u3001\u63a5\u53e3\u81ea\u52a8\u5316\u4f1a\u7ecf\u5e38\u7528\u5230\u5b83\uff0c\u975e\u5e38\u591a\u6709\u540d\u7684 Python \u5e93\u4f9d\u8d56\u4e8e Requests \u63d0\u4f9b\u57fa\u7840\u80fd\u529b\uff0c\u6bd4\u5982\uff1ahttpx\uff08\u652f\u6301\u5f02\u6b65\u7684 HTTP \u5e93\uff09\u3001locust\uff08\u6027\u80fd[\u8d1f\u8f7d]\u6d4b\u8bd5\u6846\u67b6\uff09\u3001HttpRunner\uff08\u63a5\u53e3\u81ea\u52a8\u5316\u6846\u67b6\uff09\u7b49\u7b49\uff0c\u90fd\u662f\u57fa\u4e8e Requests \u6784\u5efa\u8d77\u6765\u7684\u3002</p> <p>\u6709\u4eba\u751a\u81f3\u5efa\u8bae\u5c06 Requests \u5e93\u5408\u5165 Python \u6807\u51c6\u5e93\u53d1\u5e03\u3002\u53ea\u8981\u4f60\u60f3\u505a HTTP \u8bf7\u6c42\uff0c\u4f60\u80af\u5b9a\u4f1a\u60f3\u5230 Requests\u3002</p> <p>Requests \u7279\u70b9\uff1a\u7b80\u5355\u3001\u7b80\u6d01\u3001\u4f18\u96c5\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#2","title":"2\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1adeepin</p> <pre><code>pip3 install requests\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#3","title":"3\u3001\u8bf7\u6c42","text":""},{"location":"%E7%88%AC%E8%99%AB/Requests/#31","title":"3.1\u3001\u5bfc\u5165","text":"<pre><code>import requests\n</code></pre> <p>\u6240\u6709\u7684\u529f\u80fd\u90fd\u5728 requests \u8fd9\u4e2a\u540d\u79f0\u7a7a\u95f4\u4e0b\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#32get","title":"3.2\u3001GET \u8bf7\u6c42","text":"<pre><code>r = requests.get(\"https://www.baidu.com\")\nprint(r.status_code)\nprint(r.text)\n</code></pre> <p>\u7ec8\u7aef\u6253\u5370\uff1a</p> <pre><code>200\n&lt;!DOCTYPE html&gt;\n&lt;!--STATUS OK--&gt;&lt;html&gt; &lt;head&gt;&lt;meta http-equ ...... # \u7701\u7565\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#33post","title":"3.3\u3001POST \u8bf7\u6c42","text":"<p><code>https://httpbin.org</code> \u662f K \u795e\u7684\u4e00\u4e2a\u7b80\u5355\u7684 HTTP \u670d\u52a1\uff0c\u4e3b\u8981\u7528\u4e8e\u8bd5\u7528 requests \u91cc\u9762\u7684\u4e00\u4e9b\u529f\u80fd\uff0c\u65b9\u4fbf\u7406\u89e3\uff1b </p> <pre><code>r = requests.post('https://httpbin.org/post', data={'key': 'value'})\nprint(r.status_code)\nprint(r.text)\n</code></pre> <p>\u7ec8\u7aef\u6253\u5370\uff1a</p> <pre><code>200\n{\n\"args\": {}, \n\"data\": \"\", \n\"files\": {}, \n\"form\": {\n\"key\": \"value\"\n}, \n\"headers\": {\n\"Accept\": \"*/*\", \n\"Accept-Encoding\": \"gzip, deflate\", \n\"Content-Length\": \"9\", \n\"Content-Type\": \"application/x-www-form-urlencoded\", \n\"Host\": \"httpbin.org\", \n\"User-Agent\": \"python-requests/2.28.1\", \n\"X-Amzn-Trace-Id\": \"Root=1-642aa9b9-259b189c1acb1e114a5d6bc7\"\n}, \n\"json\": null, \n\"origin\": \"110.191.179.216\", \n\"url\": \"https://httpbin.org/post\"\n}\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#34","title":"3.4\u3001\u5176\u4ed6\u8bf7\u6c42","text":"<p>\u5176\u4ed6\u8bf7\u6c42\u65b9\u5f0f\u4e0d\u5e38\u7528\uff0c\u5982\u4e0b\uff1a</p> <pre><code>r = requests.put('https://httpbin.org/put', data={'key': 'value'})\nr = requests.delete('https://httpbin.org/delete')\nr = requests.head('https://httpbin.org/get')\nr = requests.options('https://httpbin.org/get')\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#35headers","title":"3.5\u3001\u8bf7\u6c42\u5934\uff08headers\uff09","text":"<p>\u8bf7\u6c42\u5934\u901a\u5e38\u4f1a\u52a0 UA\uff08user agent\uff09\uff0c\u8fd9\u4e2a\u4e3b\u8981\u662f\u6a21\u4eff\u6d4f\u89c8\u5668\u7684\u884c\u4e3a\uff0c\u6bd4\u5982\u6a21\u4eff\u4f7f\u7528 Firefox \u6d4f\u89c8\u5668\uff1a</p> <pre><code>headers = {\n\"User-Agent\": \"Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/109.0\"\n}\nrequests.get(url, headers=headers)\nrequests.post(url, headers=headers)\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#36","title":"3.6\u3001\u53c2\u6570","text":"<p>(1) get \u8bf7\u6c42\u53c2\u6570</p> <p>get \u8bf7\u6c42\u7684\u53c2\u6570\u53ef\u4ee5\u76f4\u63a5\u5728url\u540e\u9762\u52a0\u53c2\u6570\uff0c<code>url?key1=value1&amp;key2=value2</code>\uff0c\u5373 url \u540e\u9762\u52a0\u95ee\u53f7\uff0c\u7136\u540e\u7d27\u63a5\u7740\u591a\u4e2a\u53c2\u6570\u7684\u952e\u548c\u503c\uff0c\u591a\u4e2a\u952e\u503c\u4e4b\u95f4\u7528 &amp; \u7b26\u53f7\u94fe\u63a5\uff1b</p> <p>\u8fd9\u79cd\u65b9\u5f0f\u7b80\u5355\u662f\u7b80\u5355\uff0c\u4f46\u662f\u53c2\u6570\u591a\u4e86\u4e4b\u540e\uff0curl \u4f1a\u53d8\u5f97\u5f88\u957f\uff0c\u770b\u8d77\u6765\u80c0\u773c\u775b\uff0c\u4e3a\u4e86\u66f4\u597d\u7684\u53ef\u8bfb\u6027\uff0crequests \u652f\u6301\u8fd9\u6837\u4f20\u9012 get \u8bf7\u6c42\u7684\u53c2\u6570\uff1a</p> <pre><code>params = {'key1': 'value1', 'key2': 'value2'}\nr = requests.get('https://httpbin.org/get', params=params)\n</code></pre> <p>\u901a\u8fc7\u6253\u5370 r.url \u4f60\u4f1a\u53d1\u73b0\uff0c\u5b9e\u9645\u4e0a\u4e5f\u662f\u7ed9\u4f60\u8f6c\u6362\u6210\u4e86\u524d\u9762\u90a3\u79cd &amp; \u8fde\u63a5\u7684\u65b9\u5f0f\uff1b</p> <p>\uff082\uff09post \u8bf7\u6c42\u53c2\u6570</p> <p>post \u8bf7\u6c42\u53c2\u6570\u4e00\u822c\u662f\u901a\u8fc7data\u53c2\u6570\u4f20\u9012\uff0c\u901a\u5e38 data \u662f\u4e00\u4e2a\u5b57\u5178\u5f62\u5f0f\uff1a</p> <pre><code>data = {'key1': 'value1', 'key2': 'value2'}\nr = requests.post('https://httpbin.org/post', data=data)\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>{\n  \"args\": {}, \n  \"data\": \"\", \n  \"files\": {}, \n  \"form\": {\n    \"key1\": \"value1\", \n    \"key2\": \"value2\"\n  }, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Content-Length\": \"23\", \n    \"Content-Type\": \"application/x-www-form-urlencoded\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"python-requests/2.28.1\", \n    \"X-Amzn-Trace-Id\": \"Root=1-642e7884-7f20428d523e7fda1da61f1a\"\n  }, \n  \"json\": null, \n  \"origin\": \"110.191.179.216\", \n  \"url\": \"https://httpbin.org/post\"\n}\n</code></pre> <p>\u5982\u679c\u4f60\u62ff\u5230\u7684\u53c2\u6570\uff0c\u662f\u4e00\u4e2a json \u683c\u5f0f\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f20\u9012\u7ed9 json \u53c2\u6570\uff1a</p> <pre><code>jsons = '{\"key1\": \"value1\", \"key2\": \"value2\"}'\nr = requests.post('https://httpbin.org/post', json=jsons)\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>{\n  \"args\": {}, \n  \"data\": \"\\\"{\\\\\\\"key1\\\\\\\": \\\\\\\"value1\\\\\\\", \\\\\\\"key2\\\\\\\": \\\\\\\"value2\\\\\\\"}\\\"\", \n  \"files\": {}, \n  \"form\": {}, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Content-Length\": \"46\", \n    \"Content-Type\": \"application/json\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"python-requests/2.28.1\", \n    \"X-Amzn-Trace-Id\": \"Root=1-642e79d4-1f0aeb1370ea94cf2c858f9d\"\n  }, \n  \"json\": \"{\\\"key1\\\": \\\"value1\\\", \\\"key2\\\": \\\"value2\\\"}\", \n  \"origin\": \"110.191.179.216\", \n  \"url\": \"https://httpbin.org/post\"\n}\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#4","title":"4\u3001\u54cd\u5e94","text":"<p>\u5176\u5b9e\u524d\u9762\u7684\u4f8b\u5b50\u5df2\u7ecf\u6709\u4f53\u73b0\u4e00\u70b9\u54cd\u5e94\u4e86\uff1b</p> <pre><code>r = requests.post('https://httpbin.org/post', data={'key': 'value'})\n</code></pre> <p>r \u4e3a\u8fd4\u56de\u503c\u7684\u5bf9\u8c61\uff08Response\uff09\uff0c\u901a\u5e38\u5728\u9879\u76ee\u4e2d\u6211\u4e00\u822c\u7528 <code>rsp</code> \u6765\u8868\u793a\uff08\u540e\u9762\u7684 <code>rsp</code> \u548c r \u662f\u4e00\u4e2a\u610f\u601d\uff0c\u90fd\u662f\u8868\u793a\u8fd4\u56de\u503c\u7684\u5bf9\u8c61\uff09\uff1b</p> <p>rsp \u65e2\u7136\u662f\u5bf9\u8c61\uff0c\u90a3\u6765\u770b\u4e0b\u5bf9\u8c61\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u54b1\u4eec Debug \u8dd1\u4e00\u4e0b\u5c31\u5f88\u6e05\u695a\uff1a</p> <p></p> <p>\u63a5\u4e0b\u6765\u8bb2\u51e0\u4e2a\u6bd4\u8f83\u5e38\u7528\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#41","title":"4.1\u3001\u54cd\u5e94\u5185\u5bb9","text":"<pre><code>r.text\n</code></pre> <p>\u524d\u9762\u4f8b\u5b50\u5df2\u7ecf\u6253\u5370\u8fc7\uff0c\u8fd9\u91cc\u5c31\u4e0d\u6253\u5370\u4e86\uff1b</p> <p><code>text</code> \u7684\u89e3\u7801\u662f\u81ea\u52a8\u7684\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u80fd\u6b63\u5e38\u89e3\u7801\uff1b</p> <p>\u53ef\u4ee5\u901a\u8fc7 <code>encoding</code> \u6765\u67e5\u770b\u6216\u4fee\u6539\u7f16\u7801\u65b9\u5f0f\uff1a</p> <pre><code>print(r.encoding)\nr.encoding = 'ISO-8859-1'\n</code></pre> <p>\u4fee\u6539\u7f16\u7801\u65b9\u5f0f\u4e4b\u540e\uff0c\u518d\u4f7f\u7528 <code>r.text</code> \u5c31\u4f1a\u4ee5\u65b0\u7684\u7f16\u7801\u65b9\u5f0f\u89e3\u7801\u3002</p> <p>\u5982\u679c\u4f60\u53d1\u73b0\u8fd4\u56de\u7684\u5185\u5bb9\u7f16\u7801\u4e0d\u5bf9\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4fee\u6539\u4e0d\u540c\u7684\u7f16\u7801\uff0c\u8fd9\u662f\u4e2a\u7ecf\u9a8c\u79ef\u7d2f\u7684\u8fc7\u7a0b\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#42","title":"4.2\u3001\u4e8c\u8fdb\u5236\u54cd\u5e94\u5185\u5bb9","text":"<p>\u975e\u6587\u672c\u7c7b\u8bf7\u6c42\uff0c\u4e00\u822c\u8fd4\u56de\u7684\u662f\u4e8c\u8fdb\u5236\u5185\u5bb9\uff0c\u6b64\u65f6\u6211\u4eec\u5e94\u8be5\u4f7f\u7528 <code>content</code> \u65b9\u6cd5\uff1a</p> <pre><code>r.content\n</code></pre> <p>\u5c06\u4e8c\u8fdb\u5236\u6587\u4ef6\u4fdd\u5b58\u4e0b\u6765\uff0c\u6bd4\u5982\u8bf7\u6c42\u8fd4\u56de\u4e00\u4e2a mp3 \u6587\u4ef6\uff1a</p> <pre><code>with open(\"my.mp3\", \"wb\") as f\uff1a\nf.write(r.content)\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#43json","title":"4.3\u3001JSON\u54cd\u5e94\u5185\u5bb9","text":"<p>\u4e00\u4e9b RESTful API \u8fd4\u56de\u901a\u5e38\u662f json \u5185\u5bb9\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff1a</p> <pre><code>r.json()\n</code></pre> <p>\u83b7\u53d6\u7684\u7c7b\u578b\u4e3a Python \u7684\u5b57\u5178\u7c7b\u578b\uff1b</p> <p>\u5982\u679c\u54cd\u5e94\u5305\u542b\u65e0\u6548JSON\uff0c\u4f1a\u629b <code>requests.exceptions.JSONDecodeError</code> \u5f02\u5e38\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#5","title":"5\u3001\u9ad8\u9636\u7528\u6cd5","text":""},{"location":"%E7%88%AC%E8%99%AB/Requests/#51session","title":"5.1\u3001Session","text":"<p>Session \u5bf9\u8c61\u53ef\u4ee5\u5728\u4e00\u6b21\u4f1a\u8bdd\u4e2d\u53ef\u4ee5\u6709\u6548\u7684\u5904\u7406 cookie \u6301\u4e45\u5316\u7684\u95ee\u9898\uff1b</p> <pre><code>s = requests.Session()\n# \u8bbe\u7f6e\u4e00\u4e2acookie\u4e3a123456789\ns.get('https://httpbin.org/cookies/set/sessioncookie/123456789')\n# \u8bf7\u6c42\u4e00\u4e0b\nr = s.get('https://httpbin.org/cookies')\nprint(r.text)\n</code></pre> <p>\u6267\u884c\u540e\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>{\n  \"cookies\": {\n    \"sessioncookie\": \"123456789\"\n  }\n}\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Requests/#52request","title":"5.2\u3001Request","text":"<p>\u65e0\u8bba\u662f\u524d\u9762\u8bb2\u5230\u7684 GET \u3001 POST \u7b49\u8bf7\u6c42\u65b9\u6cd5\uff1a</p> <pre><code>requests.get()\nrequests.post()\n</code></pre> <p>\u5176\u5e95\u5c42\u90fd\u662f\u901a\u8fc7\u8c03\u7528 Request \u8fd9\u4e2a\u7c7b\u6765\u5b9e\u73b0\u7684\uff1a</p> <pre><code>class Request():\ndef __init__(\nself,\nmethod=None,\nurl=None,\nheaders=None,\nfiles=None,\ndata=None,\nparams=None,\nauth=None,\ncookies=None,\nhooks=None,\njson=None,\n):\npass\n</code></pre> <p>\u56e0\u6b64\u6211\u4eec\u5f53\u7136\u53ef\u4ee5\u76f4\u63a5\u8de8\u8fc7\u8fd9\u4e00\u6b65\uff0c\u4e0d\u8ba9\u4e2d\u95f4\u5546\u8d5a\u5dee\u4ef7\uff0c\u76f4\u63a5\u7528 Request\uff1a</p> <pre><code>frome requests import Request\nr = Request(\"GET\", url, headers=headers)\nr = Request(\"POST\", url, headers=headers)\n</code></pre> <p>\u8fd8\u6ca1\u5b8c\uff0c\u8bb0\u5f97\u8c03\u7528\u4e00\u4e0b <code>prepare()</code> \u65b9\u6cd5\uff0c\u7136\u540e\u4f7f\u7528 Session \u91cc\u9762\u7684 send \u65b9\u6cd5\uff1a</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>from  requests import Session, Request\ns = Session()\nr = Request(\"GET\", 'https://httpbin.org/get')\nprepped = r.prepare()\nresp = s.send(prepped)\nprint(resp.text)\n</code></pre> <p>\u6267\u884c\u7ec8\u7aef\u8f93\u51fa\uff1a</p> <pre><code>{\n  \"args\": {}, \n  \"headers\": {\n    \"Accept-Encoding\": \"identity\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"python-urllib3/1.26.13\", \n    \"X-Amzn-Trace-Id\": \"Root=1-642e84e2-1328a0210e2252741f20c648\"\n  }, \n  \"origin\": \"110.191.179.216\", \n  \"url\": \"https://httpbin.org/get\"\n}\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/","title":"Scrapy","text":"<pre><code># =============================\n# Author : mikigo\n# Time   : 2023/3/17\n# =============================\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#1","title":"1\u3001\u7b80\u4ecb","text":"<p>Scrapy \u662f\u73b0\u9636\u6bb5 Python \u793e\u533a\u6700\u6d41\u884c\u7684\u722c\u866b\u6846\u67b6\uff0c\u5b83\u80fd\u591f\u6781\u5927\u7684\u7b80\u5316\u722c\u866b\u7684\u7f16\u5199\u96be\u5ea6\uff0c\u7b80\u5316\u4ee3\u7801\u3002</p> <p>\u5f53\u7136\u5b83\u4e0d\u662f Python \u793e\u533a\u552f\u4e00\u7684\u722c\u866b\u6846\u67b6\uff0c\u4f46\u6211\u8ba4\u4e3a\u662f\u73b0\u9636\u6bb5\u6700\u597d\u7528\u7684\u722c\u866b\u6846\u67b6\u3002</p> <p>\u7ecf\u5e38\u7528\u540c\u5b66\u95ee\uff0c\u4e3a\u5565\u8981\u7528 Scrapy\uff0c\u6211\u7528 requests \u4e0d\u53ef\u4ee5\u5417\uff1f</p> <p>\u6211\u89c9\u5f97\u8fd9\u6837\u89e3\u91ca\uff1a</p> <ul> <li>\u4e0d\u662f\u4e00\u4e2a\u7c7b\u578b</li> </ul> <p>requests \u6700\u591a\u7b97\u662f\u722c\u866b\u5de5\u5177\uff0c\u4e0d\u540c\u7684\u4eba\u5199\u51fa\u6765\u7684\u722c\u866b\u4ee3\u7801\u90fd\u4e0d\u540c\uff0c\u91cd\u590d\u4ee3\u7801\u8fd8\u591a\uff0c\u800c\u4e14\u5bf9\u4e8e\u4e00\u4e9b\u9ad8\u7ea7\u7684\u5e94\u7528\u573a\u666f\uff0c\u5982\uff1a\u591a\u7ebf\u7a0b\u5904\u7406\u3001\u5f02\u6b65\u5904\u7406\u3001\u6301\u4e45\u5316\u7b49\uff0c\u4f30\u8ba1\u6ca1\u51e0\u4e2a\u4eba\u80fd\u5904\u7406\u7684\u5f88\u5b8c\u7f8e\uff0c\u6700\u540e\u722c\u4e0b\u6765\u7684\u6570\u636e\u8fd8\u8981\u627e\u4e00\u5806\u5de5\u5177\u6765\u89e3\u6790\u5904\u7406\uff0c\u6bd4\u5982\uff1are\u3001BeautifulSoup\u3001lxml\u7b49\uff0c\u5c5e\u5b9e\u8ba9\u4eba\u6320\u5934\uff1b</p> <p>\u800c\u722c\u866b\u6846\u67b6\u901a\u5e38\u63d0\u4f9b\u4e86\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u4f7f\u7528\u5f88\u5c11\u7684\u4ee3\u7801\u5c31\u80fd\u5b9e\u73b0\u590d\u6742\u7684\u529f\u80fd\uff0c\u4ee3\u7801\u91cf\u5c11\u4e86\uff0c\u800c\u4e14\u5e95\u5c42\u4e5f\u4e3a\u4f60\u5904\u7406\u4e86\u5f88\u5bf9\u95ee\u9898\uff0c\u6846\u67b6\u5728\u89e3\u6790\u6570\u636e\u4e5f\u6709\u81ea\u5e26\u7684\u65b9\u6848\uff0c\u6240\u4ee5\u4f60\u53ea\u9700\u8981\u6309\u7167\u6846\u67b6\u6240\u5b9a\u4e49\u597d\u7684\u89c4\u8303\uff0c\u5c31\u53ef\u4ee5\u8f7b\u677e\u5b8c\u6210\u5404\u79cd\u4efb\u52a1\uff1b</p> <ul> <li>\u4e0d\u662f\u4e00\u4e2a\u5708\u5b50</li> </ul> <p>Scrapy \u4e3b\u8981\u7528\u4e8e\u6570\u636e\u722c\u53d6\uff0c\u6240\u4ee5\u8bf4\u5b83\u662f\u722c\u866b\u6846\u67b6\uff0c\u4f60\u8bf4\u7528\u5b83\u6765\u505a\u4e00\u4e9b POST \u8bf7\u6c42\u53d1\u4e2a\u6570\u636e\u5565\u7684\uff0c\u54b1\u4eec\u8c8c\u4f3c\u6ca1\u8fd9\u4e48\u7528\u8fc7\uff1b</p> <p>\u800c requests \u53ea\u8981\u662f\u7f51\u7edc\u63a5\u53e3\u8bf7\u6c42\u90fd\u80fd\u7528\uff0c\u722c\u6570\u636e\u4e5f\u53ef\u4ee5\uff0c\u4f46\u4f60\u8981\u8bf4\u722c\u6570\u636e\u6709\u591a\u5f3a\u5462\uff0c\u5c31\u8981\u770b\u4f7f\u7528\u7684\u4eba\u6709\u591a\u5f3a\u4e86\uff1b</p> <p>\u603b\u7ed3\uff1a</p> <ul> <li>\u65b0\u624b\u3001\u8001\u53f8\u673a\u505a\u5c0f\u4efb\u52a1\uff0c\u7528\u54ea\u4e2a\u90fd\u65e0\u6240\u8c13\uff0c\u7528\u6846\u67b6\u7684\u8bdd\u4f1a\u8f7b\u677e\u5f88\u591a\uff1b</li> <li>\u65b0\u624b\u505a\u5927\u4efb\u52a1\uff0c\u7528\u6846\u67b6\uff0c\u4e0d\u8981\u60f3\uff0c\u7701\u65f6\u7701\u529b\uff1b</li> <li>\u8001\u53f8\u673a\u505a\u5927\u4efb\u52a1\uff0c\u7528\u5de5\u5177\u53ef\u4ee5\u505a\uff0c\u5c31\u662f\u6709\u70b9\u9ebb\u70e6\uff1b\u7528\u6846\u67b6\u4e5f\u80fd\u641e\uff0c\u4f46\u662f\u4e0d\u80fd\u79c0\u51fa\u4f60\u7684\u5b9e\u529b\uff1b</li> </ul>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#2","title":"2\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1adeepin</p> <pre><code>sudo pip3 install Scrapy\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#3","title":"3\u3001\u521b\u5efa\u9879\u76ee","text":"<p>\u54b1\u4eec\u5c31\u722c\u53d6 deepin \u8bba\u575b\u7684\u8d34\u5b50\uff0c\u627e\u627e\u611f\u89c9\uff1b</p> <p>\u521b\u5efa\u4e00\u4e2a\u722c\u866b\u9879\u76ee\u540d\u4e3a\uff1adeepin_bbs_spider</p> <pre><code>cd ~\nscrapy startproject deepin_bbs_spider\n</code></pre> <p>\u5de5\u7a0b\u76ee\u5f55\u7ed3\u6784\uff1a</p> <pre><code>deepin_bbs_spider\n\u251c\u2500\u2500 deepin_bbs_spider\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 items.py  # \u6570\u636e\u7c7b\u578b\u5b9a\u4e49\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 middlewares.py  # \u4e2d\u95f4\u4ef6\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 pipelines.py  # \u6570\u636e\u7ba1\u9053\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 settings.py  # \u914d\u7f6e\u9879\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 spiders  # \u653e\u722c\u866b\u811a\u672c\u7684\u76ee\u5f55\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 __init__.py\n\u2514\u2500\u2500 scrapy.cfg  # \u90e8\u7f72\u914d\u7f6e\u6587\u4ef6\n</code></pre>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#4","title":"4\u3001\u5f00\u59cb\u5199\u722c\u866b","text":"<p>\u5728 <code>~/deepin_bbs_spider/deepin_bbs_spider/spiders</code> \u76ee\u5f55\u4e0b\u5199\u6211\u4eec\u7684\u722c\u866b\u811a\u672c\u6587\u4ef6\uff0c\u521b\u5efa\u4e00\u4e2a\u722c\u866b\uff0c\u76ee\u6807\u662f\u722c\u53d6\u8bba\u575b\u91cc\u9762\u5e16\u5b50\u5185\u5bb9\uff1a</p> <pre><code># bbs_spider.py\nimport scrapy\nclass BbsSpiderSpider(scrapy.Spider):\nname = \"bbs_spider\"\nallowed_domains = [\"bbs.deepin.org\"]\nstart_urls = [\"https://bbs.deepin.org/?offset=0&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\"]\ndef parse(self, response):\npost_items = response.css(\"app-main-pc &gt; div &gt; div:nth-child(3) &gt; app-post-pc\")\nfor post_item in post_items:\nurl = post_item.css(\"a.post_lin_pc::attr(href)\").get()\ntitle = post_item.css(\"span.ng-star-inserted::text\").getall()\nprint(\"url:\", url)\nprint(\"title\", title)\n</code></pre> <p>\u5565\u4e5f\u4e0d\u8bf4\uff0c\u5148\u8dd1\u8d77\u6765\u8bd5\u8bd5\uff1a</p> <pre><code>cd ~/deepin_bbs_spider\nscrapy crawl bbs_spider\n</code></pre> <p>\u8dd1\u5b8c\u4e4b\u540e\uff0c\u7ec8\u7aef\u5c31\u4f1a\u6709\u8f93\u51fa\u722c\u53d6\u5230\u7684\u5e16\u5b50\u4fe1\u606f\uff1a</p> <p></p> <p>\u4f60\u5148\u522b\u7ba1\u5176\u4ed6\u7684\uff0c\u81f3\u5c11\u54b1\u4eec\u80fd\u722c\u5230\u6570\u636e\u4e86\uff0c\u63a5\u4e0b\u6765\u54b1\u4eec\u6162\u6162\u4ecb\u7ecd\u4e0a\u9762\u8fd9\u4e9b\u4ee3\u7801\u662f\u600e\u4e48\u6765\u7684~\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#5","title":"5\u3001\u903b\u8f91\u8bb2\u89e3","text":""},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#51","title":"5.1\u3001\u751f\u6210\u722c\u866b\u6a21\u677f","text":"<p>\u770b\u4e86\u4e0a\u9762\u7684\u793a\u4f8b\uff0c\u6709\u540c\u5b66\u80af\u5b9a\u8981\u95ee\uff0c\u4f60\u548b\u77e5\u9053\u8981\u5199\u4e2a\u7c7b\u5462\uff0c\u4f60\u548b\u77e5\u9053\u8981\u5199\u4e2a <code>parse</code> \u51fd\u6570\u5462\uff1f</p> <p>\u6211\u786e\u5b9e\u4e0d\u77e5\u9053\uff0c<code>scrapy</code> \u4e5f\u77e5\u9053\u54b1\u4eec\u4e0d\u77e5\u9053\uff0c\u6240\u4ee5\u505a\u4e86\u4e2a\u5de5\u5177\u81ea\u52a8\u751f\u6210\uff1a</p> <pre><code>scrapy genspider &lt;spider name&gt; &lt;spider url&gt;\n</code></pre> <p>\u7528\u5b50\u547d\u4ee4 <code>genspider</code>\uff0c\u540e\u9762\u52a0\u722c\u866b\u7684\u540d\u79f0\uff08spider name\uff09\uff0c\u518d\u52a0\u8981\u722c\u53d6\u5730\u5740\uff08url\uff09\uff0c\u5c31\u53ef\u4ee5\u5728 <code>spiders</code> \u76ee\u5f55\u4e0b\u81ea\u52a8\u751f\u6210\u4e00\u4e2a <code>py</code> \u6587\u4ef6\uff1b</p> <p>\u6bd4\u5982\uff0c\u54b1\u4eec\u50cf\u8fd9\u6837\uff1a</p> <pre><code>scrapy genspider bbs_spider \"https://bbs.deepin.org\"\n</code></pre> <p>\u6267\u884c\u4e4b\u540e\u5c31\u4f1a\u81ea\u52a8\u751f\u6210 <code>py</code> \u6587\u4ef6\uff1a</p> <pre><code>import scrapy\nclass BbsSpiderSpider(scrapy.Spider):\nname = \"bbs_spider\"\nallowed_domains = [\"bbs.deepin.org\"]\nstart_urls = [\"https://bbs.deepin.org\"]\ndef parse(self, response):\npass\n</code></pre> <p>\u7b80\u5355\u8bb2\u89e3\u4e00\u4e0b\uff1a</p> <ul> <li>\u722c\u866b\u7c7b\u662f\u8981\u7ee7\u627f <code>scrapy.Spider</code> \u7684\uff0c\u8fd9\u4e2a\u4e0d\u8981\u53bb\u52a8\uff0c\u77e5\u9053\u7ee7\u627f\u5c31\u5bf9\u4e86\uff1b</li> <li>\u7c7b\u53d8\u91cf <code>name</code> \u662f\u722c\u866b\u7684\u540d\u79f0\uff0c\u8fd9\u73a9\u610f\u513f\u5c31\u662f\u4e2a\u4ee3\u53f7\uff0c\u4f60\u60f3\u6539\u6210\u738b\u5927\u9524\u90fd\u884c\uff0c\u4e00\u822c\u8d56\u5f97\u53bb\u7ba1\uff1b</li> <li>\u7c7b\u53d8\u91cf <code>allowed_domains</code> \u722c\u866b\u57df\u540d\uff1b</li> <li>\u7c7b\u53d8\u91cf <code>start_urls</code> \u722c\u866b\u76ee\u6807\u5730\u5740\uff0c\u53ef\u4ee5\u7ed9\u591a\u4e2a\uff1b</li> <li>\u5b9e\u4f8b\u65b9\u6cd5 <code>parse(self, response)</code> \u4e5f\u662f\u56fa\u5b9a\u5199\u6cd5\uff0c\u51fd\u6570\u540d\u79f0\u6700\u597d\u4e0d\u52a8\uff0c\u53c2\u6570\u540d\u79f0\u4e0d\u80fd\u6539\uff0c\u56e0\u4e3a\u662f scrapy \u8fd4\u56de\u7684\u4e00\u4e2a Selector \u5bf9\u8c61\uff1b</li> </ul> <p>\u8fd9\u91cc\u9762\u6838\u5fc3\u903b\u8f91\u5c31\u662f\u5728 <code>parse</code> \u51fd\u6570\u91cc\u9762\u53bb\u5199\uff0c\u4f60\u53ef\u4ee5\u7406\u89e3\u6210 <code>response</code> \u5c31\u662f\u8fd4\u56de\u7684\u9875\u9762\u4fe1\u606f\uff0c\u4f60\u53ea\u9700\u8981\u5728\u8fd9\u91cc\u9762\u53bb\u63d0\u53d6\u60f3\u8981\u7684\u6570\u636e\u5c31\u597d\u4e86\uff1b</p> <p><code>response</code> \u63d0\u4f9b\u4e00\u4e9b\u65b9\u6cd5\uff0c\u80fd\u591f\u5f88\u65b9\u4fbf\u7684\u8fdb\u884c\u9875\u9762\u4fe1\u606f\u63d0\u53d6\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#52","title":"5.2\u3001\u722c\u866b\u7f16\u5199\u65b9\u6cd5","text":"<p>\u524d\u9762\u8bf4\u5230\u722c\u866b\u811a\u672c\u91cc\u9762 <code>response</code>\uff0c\u5b83\u662f\u6211\u4eec\u7f16\u5199\u4ee3\u7801\u7684\u6838\u5fc3\uff0c\u6240\u6709\u7684\u6570\u636e\u63d0\u53d6\u90fd\u4ece\u8fd9\u91cc\u6765\uff1b</p> <p>\u4e0b\u9762\u6211\u4eec\u8bb2\u8bb2\u6570\u636e\u7684\u63d0\u53d6\u65b9\u6cd5\uff0c\u8fd9\u91cc\u591a\u5634\u4e00\u53e5\uff0c\u6211\u9ed8\u8ba4\u5927\u5bb6\u90fd\u662f\u6709\u4e00\u70b9\u524d\u7aef\u57fa\u7840\u7684\uff0c\u4e0d\u7136\u4e0b\u9762\u90e8\u5206\u5185\u5bb9\u53ef\u80fd\u9700\u8981\u53bb\u5b66\u4e60\u4e0b html\u3001css\u76f8\u5173\u77e5\u8bc6\uff1b</p> <p>\u9996\u5148\u6765\u8bb2 css \u63d0\u53d6\u65b9\u6cd5\uff0ccss \u7684\u89e3\u6790\u662f\u975e\u5e38\u7075\u6d3b\u7684\uff0c\u5148\u7528 F12 \u770b\u4e0b html \u6e90\u7801\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u6240\u6709\u7684\u5e16\u5b50\u90fd\u5728 <code>app-post-pc</code> \u6807\u7b7e\u4e0b\u9762\uff0c\u54b1\u4eec\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>def parse(self, response):\npost_items = response.css(\"app-post-pc\")\n</code></pre> <p>\u5982\u679c\u4f60\u662f\u4f7f\u7528\u53f3\u952e\u590d\u5236\u7684\u9009\u62e9\u5668\uff0c\u53ef\u80fd\u662f\u4e00\u4e2a\u5f88\u957f\u7684\u8868\u8fbe\u5f0f\uff0c\u4e0d\u592a\u4f18\u96c5\u4e5f\u4e0d\u5229\u4e8e\u7ef4\u62a4\uff0c\u6211\u4e2a\u4eba\u4e0d\u592a\u5efa\u8bae\u4f7f\u7528\u76f4\u63a5\u590d\u5236\u8868\u8fbe\u5f0f\uff0c\u800c\u5e94\u8be5\u901a\u8fc7\u89c2\u5bdf\u81ea\u5df1\u5199\uff1b</p> <p>\u8fd9\u6837\u7684\u8bdd\uff0c<code>post_items</code> \u5c31\u83b7\u53d6\u5230\u4e86\u6240\u6709\u5e16\u5b50\u7684 <code>app-post-pc</code> \u6807\u7b7e\uff0c\u518d\u770b\u4e0b <code>app-post-pc</code> \u6807\u7b7e\u4e0b\u90fd\u6709\u5565\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u5728 <code>app-post-pc</code> \u6807\u7b7e\u4e0b\u8fd8\u6709 a \u6807\u7b7e\uff0c\u4fdd\u5b58\u4e86\u5e16\u5b50\u7684\u8be6\u60c5\u5730\u5740(<code>post_url</code>)\uff0c\u7136\u540e\u5728 a \u6807\u7b7e\u4e0b\u7684 span \u6807\u7b7e\u4fdd\u5b58\u4e86\u5e16\u5b50\u7684\u7c7b\u578b\u548c\u6807\u9898(<code>title</code>)\uff0c\u56e0\u6b64\u54b1\u4eec\u60f3\u529e\u6cd5\u628a\u8fd9\u4e24\u4e2a\u62ff\u5230\uff1a</p> <pre><code>def parse(self, response):\npost_items = response.css(\"app-post-pc\")\nfor post_item in post_items:\nurl = post_item.css(\"a.post_lin_pc::attr(href)\").get()\ntitle = post_item.css(\"span.ng-star-inserted::text\").getall()\nprint(\"url:\", url)\nprint(\"title\", title)\n</code></pre> <p>\u5148\u7528 for \u5faa\u73af\u628a <code>post_items</code> \u91cc\u9762\u6bcf\u4e2a <code>Selector</code> \u5bf9\u8c61\u91cc\u9762\u7684 <code>url</code> \u548c <code>title</code> \u62ff\u5230\uff1b</p> <p><code>post_item</code> \u5c31\u662f\u5355\u4e2a\u7684 <code>Selector</code> \u5bf9\u8c61\uff0c\u6211\u4eec\u5728\u5b83\u7684\u57fa\u7840\u4e0a\u518d\u901a\u8fc7 css \u65b9\u6cd5\u83b7\u53d6\u5230\u6211\u4eec\u60f3\u8981\u7684\u6570\u636e\uff1b\uff08\u4e5f\u53ef\u4ee5\u4f7f\u7528 Xpath \u6280\u672f\u83b7\u53d6\uff09</p> <ul> <li><code>url</code> \u662f\u5728 a \u6807\u7b7e\u91cc\u9762\u7684 href \u5c5e\u6027\u91cc\u9762\uff0c\u56e0\u6b64\uff1a</li> </ul> <pre><code>post_item.css(\"a.post_lin_pc::attr(href)\").get()\n</code></pre> <p>\u8868\u8fbe\u5f0f\u91cc\u9762\u7684 <code>::attr(href)</code> \u8fd9\u90e8\u5206\u662f Scrapy \u7279\u6709\u7684\uff0c<code>::</code> \u8868\u793a\u53d6\u503c\uff0c<code>attr(href)</code> \u8868\u793a\u901a\u8fc7 <code>href</code> \u5c5e\u6027\u53d6\u503c\uff1b</p> <p><code>get()</code> \u65b9\u6cd5\u8868\u793a\u53d6\u7b2c\u4e00\u4e2a\u503c\uff0c<code>getall()</code> \u65b9\u6cd5\u8868\u793a\u53d6\u6240\u6709\u7684\u503c\uff1b\uff08\u4e5f\u517c\u5bb9\u8001\u7248\u672c\u7684 <code>extract_first()</code> \u548c <code>extract()</code> \u65b9\u6cd5\uff0c\u610f\u601d\u662f\u5bf9\u5e94\u4e00\u6837\u7684\uff0c\u4e0d\u8fc7\u660e\u663e<code>get()</code> \u8fd9\u79cd\u53ef\u8bfb\u6027\u66f4\u597d\u66f4\u6613\u4e8e\u7406\u89e3\u3002\uff09</p> <ul> <li><code>title</code> \u5728 span \u6807\u7b7e\u91cc\u9762\uff1a</li> </ul> <pre><code>post_item.css(\"span.ng-star-inserted::text\").getall()\n</code></pre> <p><code>text</code> \u4e5f\u662f Scrapy \u7279\u6709\u7684\uff0c\u8868\u793a\u628a\u6807\u7b7e\u7684\u6587\u672c\u53d6\u51fa\u6765\uff1b</p> <p>\u975e\u5e38\u597d\u7406\u89e3\u5bf9\u5427\uff0c\u53ea\u8981\u4f60\u7a0d\u5fae\u6709\u70b9\u524d\u7aef\u77e5\u8bc6\uff0c\u5c31\u80fd\u591f\u8f7b\u677e\u628a\u8868\u8fbe\u5f0f\u5199\u51fa\u6765\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#53","title":"5.3\u3001\u83b7\u53d6\u6570\u636e","text":"<p>\u524d\u9762\u4f8b\u5b50\u662f\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u6253\u5370\u51fa\u6765\uff0c\u5b9e\u9645\u4e1a\u52a1\u91cc\u9762\u6211\u4eec\u80af\u5b9a\u662f\u9700\u8981\u5c06\u6570\u636e\u4fdd\u5b58\u4e0b\u6765\u7684\uff1b</p> <p>\u9996\u5148\u6211\u4eec\u5728 <code>items.py</code> \u91cc\u9762\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\uff1a</p> <pre><code># items.py\nimport scrapy\nclass DeepinBbsSpiderItem(scrapy.Item):\n# define the fields for your item here like:\nurl = scrapy.Field()\ntitle = scrapy.Field()\n</code></pre> <p>\u5199\u6cd5\u975e\u5e38\u7b80\u5355\uff0c\u7edf\u4e00\u4f7f\u7528 <code>scrapy.Field()</code> \u6765\u5b9a\u4e49\u5c31\u884c\u4e86\uff1b</p> <p>\u7136\u540e\uff0c\u56de\u5230\u722c\u866b\u811a\u672c\u91cc\u9762\uff1a</p> <pre><code>import scrapy\nfrom deepin_bbs_spider.items import DeepinBbsSpiderItem\nclass BbsSpiderSpider(scrapy.Spider):\n... # \u7701\u7565\u90e8\u5206\u4ee3\u7801\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get()\nitem[\"title\"] = post_item.css(\"span.ng-star-inserted::text\").getall()\nyield item\n</code></pre> <p>\u5c06 <code>items.py</code> \u91cc\u9762\u7684 <code>DeepinBbsSpiderItem</code> \u5bfc\u8fdb\u6765\uff0c\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u590d\u5236\u7ed9\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u4f7f\u7528 <code>item[\"url\"]</code> \u8fd9\u79cd\u7ed9\u5b57\u5178\u6dfb\u52a0\u7684\u65b9\u5f0f\uff0c\u6ce8\u610f\u8981\u548c <code>items.py</code> \u91cc\u9762\u5b9a\u4e49\u7684\u5b57\u6bb5\u540d\u79f0\u4fdd\u6301\u4e00\u81f4\uff1b</p> <p>\u6700\u540e\uff0c\u4f7f\u7528 <code>yield</code> \u5c06\u6570\u636e\u8fd4\u56de\u51fa\u6765\u5c31\u884c\u4e86\uff1b</p> <p>\u5c06\u6570\u636e\u5199\u5165\u5230 csv \u6587\u4ef6\u91cc\u9762\uff1a</p> <pre><code>scrapy crawl bbs_spider -o bbs.csv\n</code></pre> <p><code>-o</code> \u8868\u793a\u5bfc\u51fa\u6570\u636e\uff0c\u6267\u884c\u540e\uff0c\u67e5\u770b bbs.csv \u6587\u4ef6\uff1a</p> <p></p> <p>\u8fd9\u6837\u5c31\u5c06\u722c\u53d6\u5230\u7684\u6570\u636e\u4fdd\u5b58\u5230\u4e86\u4e00\u4e2a csv \u6587\u4ef6\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#54","title":"5.4\u3001\u5904\u7406\u6570\u636e","text":"<p>\u5728\u722c\u866b\u811a\u672c\u91cc\u9762\u83b7\u53d6\u5230\u539f\u59cb\u6570\u636e\u4e4b\u540e\uff0c\u6211\u4eec\u8fd8\u6709\u53ef\u80fd\u4f1a\u62ff\u6570\u636e\u505a\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u6bd4\u5982\u8fd8\u60f3\u5199\u5165\u6570\u636e\u5e93\u3001\u5199\u5165 Excel\u7b49\u7b49\uff1b</p> <p>\u8fd9\u4e9b\u8fdb\u4e00\u6b65\u7684\u64cd\u4f5c\uff0c\u6211\u4eec\u901a\u5e38\u662f\u5728\u6570\u636e\u7ba1\u9053 <code>pipelines.py</code> \u91cc\u9762\u6765\u5904\u7406\uff1a</p> <pre><code>class DeepinBbsSpiderPipeline:\ndef process_item(self, item, spider):\nreturn item\n</code></pre> <p>\u8fd9\u91cc\u7684 <code>item</code> \u5c31\u662f\u6bcf\u4e00\u6761\u6570\u636e\uff1b</p> <p>\u6bd4\u5982\uff0c\u4f60\u60f3\u5199\u5165 <code>MySQL</code>\u6570\u636e\u5e93\uff08\u9996\u5148\u8981\u786e\u4fdd\u6570\u636e\u5e93\u8868\u3001\u5b57\u6bb5\u7b49\u6b63\u5e38\uff09\uff1a</p> <pre><code>import pymysql\nclass DeepinBbsSpiderPipeline:\ndef __init__(self):\n# \u5728\u6784\u9020\u51fd\u6570\u91cc\u9762\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u548c\u6e38\u6807\ndef open_spider(self, spider):\n# open_spider \u662f\u8fd9\u4e2a\u7ba1\u9053\u5f00\u59cb\u65f6\u8981\u6267\u884c\u7684\uff1b\u8fd9\u91cc\u53ef\u4ee5\u4e0d\u8981\ndef close_spider(self, spider):\n# close_spider \u5199\u5165\u5173\u95ed\u6570\u636e\u5e93\u7684\u4ee3\u7801\ndef process_item(self, item, spider):\n# \u5728\u8fd9\u91cc\u505a\u5199\u5165\u6570\u636e\u5e93\u7684\u52a8\u4f5c\nreturn item \n</code></pre> <p>\u5728\u4e0a\u9762\u6ce8\u91ca\u91cc\u9762\u5199\u4e86\u5199\u5165\u6570\u636e\u5e93\u7684\u7f16\u5199\u903b\u8f91\uff0c\u7531\u4e8e\u6211\u4eec\u4e3b\u8981\u60f3\u8bb2\u89e3\u6570\u636e\u7ba1\u9053\u7684\u64cd\u4f5c\u903b\u8f91\uff0c\u6570\u636e\u5e93\u7684\u4ee3\u7801\u6570\u636e\u57fa\u672c\u64cd\u4f5c\uff0c\u5c31\u4e0d\u505a\u8be6\u7ec6\u4ee3\u7801\u793a\u4f8b\u4e86\uff0c\u5f80\u4e0a\u641c <code>pymysql</code> \u7684\u4f7f\u7528\u5f88\u591a\uff0c\u6309\u7167\u6ce8\u91ca\u7684\u903b\u8f91\uff0c\u5bf9\u53f7\u5165\u5ea7\u5c31\u884c\u4e86\uff1b</p> <p>\u5982\u679c\u60f3\u5199\u5165 Excel \u8868\u683c\u903b\u8f91\u662f\u4e00\u6837\u7684\uff0c\u4e5f\u53ef\u4ee5\u8868\u683c\u548c\u6570\u636e\u5e93\u540c\u65f6\u5199\u5165\uff0c\u5728 <code>pipelines.py</code> \u91cc\u9762\u518d\u5b9a\u4e49\u4e00\u4e2a\u7ba1\u9053\u7c7b\u5c31\u884c\u4e86\uff1b</p> <p>\u6ce8\u610f\uff0c\u6570\u636e\u7ba1\u9053\u903b\u8f91\u5199\u5b8c\u4e4b\u540e\uff0c\u8981\u5728 <code>settings.py</code> \u91cc\u9762\u4fee\u6539\u914d\u7f6e\uff1a</p> <pre><code>ITEM_PIPELINES = {\n\"deepin_bbs_spider.pipelines.DeepinBbsSpiderPipeline\": 300,\n# \"deepin_bbs_spider.pipelines.XxxxPipeline\": 2,\n}\n</code></pre> <p><code>ITEM_PIPELINES</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0ckey \u662f\u6570\u636e\u7ba1\u9053\uff0cvalue \u662f\u4e00\u4e2a\u6570\u5b57\uff1b</p> <p>value \u4e3b\u8981\u7528\u4e8e\u591a\u4e2a\u7ba1\u9053\u6392\u5e8f\u7684\uff0c\u56e0\u4e3a\u5728 <code>pipelines.py</code> \u91cc\u9762\u53ef\u4ee5\u5b9a\u4e49\u591a\u4e2a\u6570\u636e\u7ba1\u9053\u7c7b\uff0c\u5b83\u4eec\u6267\u884c\u7684\u5148\u540e\u987a\u5e8f\u7531 value \u6765\u63a7\u5236\uff0c\u6570\u5b57\u8d8a\u5c0f\u8d8a\u5148\u6267\u884c\uff1b</p> <p>\u5982\u679c\u4f60\u5c31\u4e00\u4e2a\u6570\u636e\u7ba1\u9053\u7c7b\uff0c\u8fd9\u4e2a value \u7ed9\u591a\u5c11\u90fd\u65e0\u6240\u8c13\uff1b</p> <p>\u53e6\u5916\u63d0\u9192\uff0c\u5728 <code>process_item()</code> \u6700\u540e\u4e00\u5b9a\u8981 <code>return item</code>\uff0c\u4e0d\u7136\u5b58\u5728\u591a\u4e2a\u6570\u636e\u7ba1\u9053\u7684\u65f6\u5019\uff0c\u540e\u6267\u884c\u7684\u6570\u636e\u7ba1\u9053\u5c31\u62ff\u4e0d\u5230\u6570\u636e\u4e86\uff1b</p> <p>\u597d\uff0c\u914d\u7f6e\u5b8c\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u518d\u6b21\u6267\u884c\u4e86\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#55","title":"5.5\u3001\u4ece\u4e0b\u5c42\u9875\u9762\u89e3\u6790\u6570\u636e","text":"<p>\u8fd9\u90e8\u5206\u5185\u5bb9\u76f8\u5bf9\u6765\u8bb2\u662f\u96be\u70b9\uff0c\u641e\u61c2\u4e86\u8fd9\u90e8\u5206\uff0c\u5c31\u51e0\u4e4e\u80fd\u5904\u7406\u5bf9\u5927\u90e8\u5206\u6570\u636e\u722c\u53d6\u4e86\uff1b</p> <p>\u6765\uff0c\u5f00\u59cb\u71e5\u8d77\u6765~~</p> <p>\u524d\u9762\u6211\u4eec\u83b7\u53d6\u5230\u4e86\u5e16\u5b50\u7684 <code>url</code> \u548c <code>title</code>\uff0c\u6709\u540c\u5b66\u53ef\u80fd\u8981\u95ee\u4e86\uff0c\u8fd9\u4e2a\u5e16\u5b50\u7684\u6b63\u6587\u5185\u5bb9\u54ea\u91cc\uff1b</p> <p>\u6b63\u6587\u5185\u5bb9\u5728\u5e16\u5b50\u7684 <code>url</code> \u91cc\u9762\uff0c\u5982\u679c\u6211\u4eec\u8981\u540c\u65f6\u83b7\u53d6\u5e16\u5b50\u7684\u6b63\u6587\u5185\u5bb9\uff0c\u5c31\u9700\u8981\u505a\u4ee5\u4e0b\u5904\u7406\uff1b</p> <p></p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#551","title":"5.5.1\u3001\u56de\u8c03\u903b\u8f91","text":"<p>\u9996\u5148\uff0c\u524d\u9762\u83b7\u53d6\u7684 <code>url</code> \u4e0d\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u94fe\u63a5\uff0c\u54b1\u4eec\u9700\u8981\u7a0d\u5fae\u5904\u7406\u4ee5\u4e0b\uff1a</p> <pre><code>class BbsSpiderSpider(scrapy.Spider):\nbase_url = \"https://bbs.deepin.org\"\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get().replace(\"/en\", self.base_url)\n# \u7701\u7565\u90e8\u5206\u4ee3\u7801\n</code></pre> <p>\u6211\u4eec\u524d\u9762\u83b7\u53d6\u7684 <code>url</code> \u662f\u8fd9\u6837\u7684: <code>/en/post/254787</code> \uff0c\u56e0\u6b64\u505a\u4e00\u4e2a\u66ff\u6362\u5904\u7406\uff1b</p> <p>\u7136\u540e\uff0c\u54b1\u4eec\u62ff\u7740\u8fd9\u4e2a <code>url</code> \u7ee7\u7eed\u505a\u8bf7\u6c42\uff1a</p> <pre><code>class BbsSpiderSpider(scrapy.Spider):\nbase_url = \"https://bbs.deepin.org\"\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get().replace(\"/en\", self.base_url)\nyield scrapy.Request(\nurl=item[\"url\"], \ncallback=self.post_parse, \ncb_kwargs={\"item\": item}\n)\ndef post_parse(self, response, **kwargs):\nitem = kwargs.get(\"item\")\n</code></pre> <p>\u8fd9\u91cc\u9700\u8981\u7528 <code>yield</code> \u8fd4\u56de\u5e76\u6784\u9020 scrapy.Request \u5bf9\u8c61\uff0c\u4f20\u5165\u4e09\u4e2a\u53c2\u6570\uff1a</p> <ul> <li> <p>url \u5c31\u662f\u4e0b\u5c42\u9875\u9762\u7684\u5730\u5740\uff1b</p> </li> <li> <p>callback \u4f20\u5165\u56de\u8c03\u51fd\u6570\u5bf9\u8c61\uff0c\u56e0\u4e3a <code>parse()</code> \u8fd9\u4e2a\u51fd\u6570\u662f\u5904\u7406\u5f53\u524d\u9875\u9762\u7684\u903b\u8f91\uff0c\u4e0b\u5c42\u9875\u9762\u5c31\u4e0d\u80fd\u5728\u8fd9\u4e2a\u51fd\u6570\u91cc\u9762\u7ee7\u7eed\u5904\u7406\u4e86\uff0c\u800c\u662f\u8981\u65b0\u5199\u4e00\u4e2a\u51fd\u6570\u6765\u5904\u7406\uff1b</p> </li> </ul> <p>\u5199\u6cd5\u548c <code>parse()</code> \u7c7b\u4f3c\uff0c\u51fd\u6570\u540d\u53ef\u4ee5\u81ea\u5df1\u5b9a\uff0c \u53c2\u6570\u4ecd\u7136\u662f response \u5bf9\u8c61\uff1b</p> <p>\u6ce8\u610f\uff0c\u53c2\u6570\u4f20\u5165\u662f <code>callback=self.post_parse</code>\uff0c\u540e\u9762\u6ca1\u6709\u52a0\u62ec\u53f7\u54c8\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u662f\u5728\u8fd9\u91cc\u8c03\u7528\u51fd\u6570\uff0c\u662f\u4f20\u5165\u51fd\u6570\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u53ea\u8981\u51fd\u6570\u540d\uff1b</p> <ul> <li>cb_kwargs \u662f\u4e3a\u4e86\u7ed9 <code>post_parse()</code> \u51fd\u6570\u4f20\u9012 item \u53c2\u6570\uff0c\u662f\u4e00\u4e2a\u5b57\u5178\u7c7b\u578b\uff0c\u8fd9\u6837\u5728 <code>post_parse(self, response, **kwargs)</code> \u91cc\u9762\u7684 <code>kwargs</code> \u5c31\u80fd\u62ff\u5230 item \u7684\u503c\uff0c\u54b1\u4eec\u540e\u7eed\u62ff\u5230\u6b63\u6587\u4e4b\u540e\uff0c\u7ee7\u7eed\u7ec4\u88c5\u5230 item \u91cc\u9762\u5c31\u884c\u4e86\uff1b</li> </ul>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#552","title":"5.5.2\u3001\u4e0b\u5c42\u9875\u9762\u89e3\u6790","text":"<p>\u4e0b\u5c42\u9875\u9762\u7684\u89e3\u6790\uff0c\u903b\u8f91\u548c\u524d\u9762\u4e00\u6837\uff0c\u5148\u770b\u4e0b html \u6e90\u7801\uff1a</p> <p></p> <p>\u83b7\u53d6\u6b63\u6587\uff1a</p> <pre><code>    def post_parse(self, response, **kwargs):\nitem = kwargs.get(\"item\")\npost_info = response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall()\n</code></pre> <p><code>post_info</code> \u83b7\u53d6\u7684\u7ed3\u679c\u4e3a\uff1a</p> <pre><code>['1\u3001\u7cfb\u7edf\u76d8\u5206\u914d\u4e8640g,\u8fd9\u624d\u4e00\u4e2a\u6708\u5c31\u5feb\u6ee1\u4e86\uff0c\u600e\u4e48\u8c03\u5927\u70b9\uff0c\u540e\u9762\u8fd8\u6709100G\u7a7a\u95f4\u3002', '2\u3001\u5e94\u7528\u5546\u5e97\u5565\u65f6\u5019\u653e\u51faconky\uff1f']\n</code></pre> <p>\u505a\u4e00\u4e2a\u5b57\u7b26\u4e32\u7ec4\u88c5\uff1a</p> <pre><code>post_info = \"\".join(response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall())\n</code></pre> <p>\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u83b7\u53d6\u5230\u4e86\u6b63\u6587\u7684\u6570\u636e\uff0c\u6dfb\u52a0\u5230 item \u5bf9\u8c61\u4e2d\uff1a</p> <pre><code>def post_parse(self, response, **kwargs):\nitem = kwargs.get(\"item\")\npost_info = \"\".join(response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall())\nitem[\"post_info\"] = post_info\nyield item\n</code></pre> <p>\u6ce8\u610f\uff0c\u5728 <code>items.py</code> \u4e2d\u628a\u65b0\u7684\u5b57\u6bb5\u4e5f\u6dfb\u52a0\u4e0a\uff1a</p> <pre><code># items.py\nclass DeepinBbsSpiderItem(scrapy.Item):\n...\npost_info = scrapy.Field()\n</code></pre> <p>\u6700\u540e\uff0c\u8dd1\u4e00\u4e0b\u722c\u866b\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#553","title":"5.5.3\u3001\u591a\u5c42\u6570\u636e\u4f20\u9012\u95ee\u9898","text":"<p>\u5230\u76ee\u524d\u4f4d\u7f6e\uff0c\u5b8c\u6574\u7684\u722c\u866b\u811a\u672c\uff1a</p> <pre><code>import scrapy\nfrom deepin_bbs_spider.items import DeepinBbsSpiderItem\nclass BbsSpiderSpider(scrapy.Spider):\nname = \"bbs_spider\"\nallowed_domains = [\"bbs.deepin.org\"]\nstart_urls = [\"https://bbs.deepin.org/?offset=0&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\"]\nbase_url = \"https://bbs.deepin.org\"\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-main-pc &gt; div &gt; div:nth-child(3) &gt; app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get().replace(\"/en\", self.base_url)\nitem[\"title\"] = \"\".join(post_item.css(\"span.ng-star-inserted::text\").getall()[:2])\nyield scrapy.Request(\nurl=item[\"url\"],\ncallback=self.post_parse,\ncb_kwargs={\"item\": item}\n)\ndef post_parse(self, response, **kwargs):\nitem = kwargs.get(\"item\")\npost_info = \"\".join(response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall())\nitem[\"post_info\"] = post_info\nyield item\n</code></pre> <p>\u4f7f\u7528\u547d\u4ee4\u8dd1\u4e00\u4e0b\u722c\u866b\uff1a</p> <pre><code>scrapy crawl bbs_spider -o bbs.csv\n</code></pre> <p>\u4f60\u4f1a\u60ca\u5947\u7684\u53d1\u73b0\uff0c\u600e\u4e48\u6240\u6709\u7684 title \u548c url \u6570\u636e\u76f8\u540c\uff0c\u5f00\u59cb\u6000\u7591\u81ea\u5df1\u903b\u8f91\u662f\u4e0d\u662f\u5199\u9519\u4e86\uff1b</p> <p>\u5176\u5b9e\uff0c\u6211\u4eec\u4ee3\u7801\u903b\u8f91\u662f\u6ca1\u95ee\u9898\u7684\uff0c\u53ea\u4e0d\u8fc7\u5728\u591a\u5c42\u6570\u636e\u4f20\u9012\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u7279\u6b8a\u5904\u7406\u4e0b\uff0c\u5904\u7406\u65b9\u6cd5\u5f88\u7b80\u5355\uff1a</p> <ul> <li>\u5bfc\u5165<code>from copy import deepcopy</code>\u6a21\u5757\uff0c\u5c06<code>cb_kwargs={'item': item}</code> \u66f4\u6539\u4e3a <code>cb_kwargs={'item': deepcopy(item)</code>\uff1b</li> <li>\u6700\u540e\u4e00\u884c\u4ee3\u7801<code>yield item</code> \u4fee\u6539\u6210 <code>yield deepcopy(item)</code>\u5c31\u5b8c\u5168 <code>ok</code> \u4e86\uff1b</li> </ul> <p>\u6539\u5b8c\u4e4b\u540e\u518d\u8dd1\u4e00\u4e0b\uff0c\u7b80\u76f4\u5b8c\u7f8e\u3002</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#554","title":"5.5.4\u3001\u591a\u9875\u9762\u722c\u53d6","text":"<p>\u5230\u73b0\u5728\u6211\u4eec\u6015\u53bb\u4e86\u7b2c\u4e00\u9875\u7684\u6570\u636e\uff0c\u90a3\u8fd8\u60f3\u722c\u53d6\u540e\u9762\u7684\u9875\u600e\u4e48\u529e\uff1f</p> <p>\u6709\u540c\u5b66\u8bf4\uff0c\u597d\u529e\uff0c<code>start_urls</code> \u4e0d\u662f\u4e00\u4e2a\u5217\u8868\u5417\uff0c\u628a\u591a\u4e2a url \u653e\u8fdb\u53bb\u4e0d\u5c31\u5b8c\u4e86\uff1b</p> <p>\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u8fd9\u6837\u662f\u53ef\u4ee5\u7684\uff0c\u5c31\u662f\u4e0d\u591f\u4f18\u96c5\u3002</p> <p>\u901a\u8fc7\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e9b\u89c4\u5f8b\uff1a</p> <p></p> <p>\u5728\u5730\u5740\u4e2d\u53ea\u6709 <code>offset</code> \u53c2\u6570\u5728\u53d8\u5316\uff0c\u7b2c\u4e00\u9875\u662f 0\uff0c\u7b2c\u4e8c\u9875\u662f 1\uff0c\u975e\u5e38\u6709\u89c4\u5f8b\uff0c\u56e0\u6b64\u54b1\u4eec\u53ef\u4ee5\u52a8\u6001\u751f\u6210\uff1a</p> <pre><code>class BbsSpiderSpider(scrapy.Spider):\n# start_urls = [\"https://bbs.deepin.org/?offset=0&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\"]\ndef start_requests(self):\nfor i in range(5):\nyield scrapy.Request(url=f\"https://bbs.deepin.org/?offset={i}&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\")\n</code></pre> <p>\u4f7f\u7528 <code>start_requests()</code> \u51fd\u6570\u66ff\u4ee3 <code>start_urls</code>\uff1b</p> <p>\u5728\u91cc\u9762\u5199\u4e2a for \u5faa\u73af\uff0c\u8981\u722c\u53d6\u591a\u5c11\u9875\u586b\u5165 <code>range</code> \u51fd\u6570\u5c31\u884c\u4e86\uff0c\u52a8\u6001\u751f\u6210\u591a\u4e2a <code>scrapy.Request</code> \u5bf9\u8c61\uff0c\u6ce8\u610f\u8981\u7528 yield \u54e6~~</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#555","title":"5.5.5\u3001\u5b8c\u6574\u7684\u793a\u4f8b","text":"<p>\u722c\u866b\u811a\u672c <code>bbs_spider.py</code>\uff1a</p> <pre><code>from copy import deepcopy\nimport scrapy\nfrom deepin_bbs_spider.items import DeepinBbsSpiderItem\nclass BbsSpiderSpider(scrapy.Spider):\nname = \"bbs_spider\"\nallowed_domains = [\"bbs.deepin.org\"]\nbase_url = \"https://bbs.deepin.org\"\ndef start_requests(self):\nfor i in range(5):\nyield scrapy.Request(url=f\"https://bbs.deepin.org/?offset={i}&amp;limit=20&amp;order=updated_at&amp;where=&amp;languages=zh_CN#comment_title\")\ndef parse(self, response):\nitem = DeepinBbsSpiderItem()\npost_items = response.css(\"app-main-pc &gt; div &gt; div:nth-child(3) &gt; app-post-pc\")\nfor post_item in post_items:\nitem[\"url\"] = post_item.css(\"a.post_lin_pc::attr(href)\").get().replace(\"/en\", self.base_url)\nitem[\"title\"] = \"\".join(post_item.css(\"span.ng-star-inserted::text\").getall()[:2])\nyield scrapy.Request(\nurl=item[\"url\"],\ncallback=self.post_parse,\ncb_kwargs={\"item\": deepcopy(item)}\n)\ndef post_parse(self, response, **kwargs):\nitem = kwargs[\"item\"]\npost_info = \"\".join(\nresponse.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall()\n)\nitem[\"post_info\"] = post_info\nyield deepcopy(item)\n</code></pre> <p>\u6570\u636e\u7c7b\u578b <code>items.py</code>\uff1a</p> <pre><code>import scrapy\nclass DeepinBbsSpiderItem(scrapy.Item):\n# define the fields for your item here like:\n# name = scrapy.Field()\nurl = scrapy.Field()\ntitle = scrapy.Field()\npost_info = scrapy.Field()\n</code></pre> <p>\u914d\u7f6e <code>settings.py</code>\uff1a\uff08\u7701\u7565\u4e86\u6ca1\u6709\u542f\u7528\u7684\u914d\u7f6e\u9879\uff09</p> <pre><code>BOT_NAME = \"deepin_bbs_spider\"\nSPIDER_MODULES = [\"deepin_bbs_spider.spiders\"]\nNEWSPIDER_MODULE = \"deepin_bbs_spider.spiders\"\n# Crawl responsibly by identifying yourself (and your website) on the user-agent\nUSER_AGENT = \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36\"\n# Obey robots.txt rules\nROBOTSTXT_OBEY = True\n# Override the default request headers:\nDEFAULT_REQUEST_HEADERS = {\n\"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n\"Accept-Language\": \"en\",\n}\n# Set settings whose default value is deprecated to a future-proof value\nREQUEST_FINGERPRINTER_IMPLEMENTATION = \"2.7\"\nTWISTED_REACTOR = \"twisted.internet.asyncioreactor.AsyncioSelectorReactor\"\nFEED_EXPORT_ENCODING = \"utf-8\"\n</code></pre> <p>\u5982\u679c\u4f60\u81ea\u5df1\u73a9\u8d77\u6765\u6709\u70b9\u5c0f\u95ee\u9898\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u53c2\u8003\u6211\u7684\u4ee3\u7801\uff1ahttps://github.com/mikigo/deepin_bbs_spider</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#6","title":"6\u3001\u8c03\u8bd5","text":""},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#61","title":"6.1\u3001\u6570\u636e\u83b7\u53d6\u8c03\u8bd5","text":"<p>\u5728\u4f7f\u7528 <code>response.css()</code> \u8868\u8fbe\u5f0f\u65f6\uff0c\u901a\u5e38\u6211\u4eec\u9700\u8981\u8fdb\u884c\u8c03\u8bd5\uff0c\u770b\u8868\u8fbe\u5f0f\u5199\u5f97\u5bf9\u4e0d\u5bf9\uff0c\u5f53\u7136\u4f60\u53ef\u4ee5\u901a\u8fc7\u6267\u884c\u722c\u866b\u7136\u540e\u6253\u5370\u6570\u636e\uff0c\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\u6709\u70b9\u9ebb\u70e6\uff1b</p> <p>Scrapy \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5feb\u6377\u7684\u8c03\u8bd5\u65b9\u6cd5\uff0c\u5728\u7ec8\u7aef\u8f93\u5165\uff1a</p> <pre><code>scrapy shell &lt;scrapy url&gt;\n</code></pre> <p><code>&lt;scrapy url&gt;</code> \u662f\u4f60\u8981\u722c\u53d6\u7684\u5730\u5740\uff0c\u6bd4\u5982\u524d\u9762\u6211\u4eec\u60f3\u83b7\u53d6\u5e16\u5b50\u6b63\u6587\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u8fd9\u6837\u8c03\u8bd5\uff1a</p> <pre><code>scrapy shell https://bbs.deepin.org/post/254892\n</code></pre> <p>\u8fdb\u5165\u7ec8\u7aef\u4ea4\u4e92\u5f0f\uff0c\u8f93\u5165\uff1a</p> <pre><code>&gt;&gt;&gt; response.css(\"div.post_conten &gt; div.post_edit.ng-star-inserted &gt; div &gt; div &gt; p::text\").getall()\n['1\u3001\u7cfb\u7edf\u76d8\u5206\u914d\u4e8640g,\u8fd9\u624d\u4e00\u4e2a\u6708\u5c31\u5feb\u6ee1\u4e86\uff0c\u600e\u4e48\u8c03\u5927\u70b9\uff0c\u540e\u9762\u8fd8\u6709100G\u7a7a\u95f4\u3002', '2\u3001\u5e94\u7528\u5546\u5e97\u5565\u65f6\u5019\u653e\u51faconky\uff1f']\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u5982\u679c\u8fd4\u56de\u4e3a\u7a7a\uff0c\u5c31\u8bf4\u660e\u8868\u8fbe\u5f0f\u53ef\u80fd\u6709\u70b9\u95ee\u9898\uff1b</p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#62pycharm-debug","title":"6.2\u3001Pycharm Debug","text":"<p>Scrapy \u7531\u4e8e\u5c01\u88c5\u5f97\u6bd4\u8f83\u597d\uff0c\u542f\u52a8\u722c\u866b\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u542f\u52a8\uff0c\u4f46\u662f\u8fd9\u6709\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u4e0d\u652f\u6301\u5728\u7f16\u8f91\u5668\u91cc\u9762 Debug \u8fd0\u884c\uff0c\u5bfc\u81f4\u4f60\u8c03\u8bd5\u4ee3\u7801\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u4e0d\u505c\u7684\u5728\u7ec8\u7aef\u542f\u52a8\u722c\u866b\uff0c\u6709\u70b9\u8d39\u52b2\uff1b</p> <p>\u7ecf\u8fc7\u4e00\u756a\u6298\u817e\uff0c\u7ec8\u4e8e\u9053\u7834\u4e86\u5929\u673a~</p> <p>\uff081\uff09\u5148\u5728\u5de5\u7a0b\u4e0b\u968f\u4fbf\u627e\u4e00\u4e2a <code>py</code> \u6587\u4ef6\uff0c\u91cc\u9762\u5565\u4e5f\u4e0d\u5199\uff0c\u6267\u884c\u4e00\u4e0b\uff0c\u7136\u540e\u70b9\u8fd9\u91cc\uff1a</p> <p></p> <p>\uff082\uff09\u5728\u7cfb\u7edf\u4e2d\u627e\u5230 scrapy \u5305\u4e2d\u7684 cmdline.py \u6587\u4ef6\uff0c\u8fd9\u4e2a\u4f60\u5f97\u7a0d\u5fae\u77e5\u9053\u70b9 Python \u5305\u7ba1\u7406\u7684\u4e00\u4e9b\u77e5\u8bc6\uff0c\u6bd4\u5982\u6211\u7684\u5728\u8fd9\u91cc\uff1a</p> <pre><code>/home/mikigo/.local/lib/python3.7/site-packages/scrapy/cmdline.py\n</code></pre> <p>\uff084\uff09\u5728 <code>Name</code> \u91cc\u9762\u5199\u4e2a\u4f60\u559c\u6b22\u7684\u540d\u5b57\uff0c\u6bd4\u5982\u6211\u5199\uff1aScrapy</p> <p>\uff084\uff09\u5728 <code>Script path</code> \u91cc\u9762\u628a <code>cmdline.py</code> \u7684\u8def\u5f84\u586b\u8fdb\u53bb\uff1b</p> <p>\uff085\uff09\u5728 <code>Parameters</code> \u91cc\u9762\u586b\u5165 Scrapy \u7684\u53c2\u6570\uff1a<code>crawl bbs_spider -o bbs.csv</code>\uff1b</p> <p></p> <p>\uff086\uff09\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684 \u3010ok\u3011\uff0c\u5728\u4e3b\u754c\u9762\u70b9\u3010Debug\u3011\u5c31\u53ef\u4ee5\u8fdb\u884c\u8c03\u8bd5\u4e86\uff0c\u5999\u554a~~</p> <p></p>"},{"location":"%E7%88%AC%E8%99%AB/Scrapy/#7","title":"7\u3001\u7ed3\u675f\u8bed","text":"<p>\u5230\u8fd9\u91cc Scrapy \u7684\u57fa\u7840\u5165\u95e8\u5c31\u7ed3\u675f\u4e86\uff0c\u4e00\u822c\u7684\u5c0f\u7f51\u7ad9\u53ef\u4ee5\u8f7b\u677e\u5feb\u901f\u7684\u641e\u5b9a\uff0c\u7b80\u76f4 yyds~~</p> <p>\u4ece\u5b8c\u6574\u793a\u4f8b\u6211\u4eec\u4e0d\u96be\u770b\u51fa\uff0c\u722c\u866b\u811a\u672c\u7b80\u5355\u7684 30 \u6765\u884c\u4ee3\u7801\u52a0\u4e0a\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u722c\u53d6\u5927\u91cf\u7684\u6570\u636e\uff0c\u800c\u4e14\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u5bf9\u6bd4\u4f60\u7528 requests \u53bb\u88f8\u5199\u770b\u770b\uff0c\u4f60\u4f1a\u53d1\u73b0\u5dee\u8ddd\u4e0d\u662f\u4e00\u822c\u7684\u5927\uff1b</p> <p>\u5bf9\u4e8e\u5176\u4ed6\u7684\u4e00\u4e9b\u7ec6\u8282\u8fd8\u53ef\u4ee5\u5b8c\u5584\uff0c\u6bd4\u5982\uff1a\u4ee3\u7406\u3001\u5f02\u6b65\u3001\u4e2d\u95f4\u4ef6\u3001\u4e0e\u5176\u4ed6\u81ea\u52a8\u5316\u5de5\u5177\u6269\u5c55\uff08Selenium\uff09\uff0c\u540e\u7eed\u7cbe\u529b\u518d\u8865\u5145~~</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"HttpRunner\u20142\u5c0f\u65f6\u5165\u95e8\u7248","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>\u63a5\u53e3\u6d4b\u8bd5\u5f88\u591a\u540c\u5b66\u7528 <code>Postman</code>\u3001<code>Jmeter</code> \u6765\u505a\uff0c\u7528\u8d77\u6765\u4e5f\u633a\u7b80\u5355\u7684\uff0c\u4f46\u662f\u63a5\u53e3\u7528\u4f8b\u591a\u4e86\u4e4b\u540e\u5c31\u53d1\u73b0\u4e0d\u597d\u7ba1\u7406\u7ef4\u62a4\uff0c\u8981\u843d\u5730\u5230\u516c\u53f8\u7ea7 CI \u9879\u76ee\u5c31\u6709\u70b9\u96be\u641e\u4e86\uff1b</p> <p>\u7a0d\u5fae\u6709\u70b9\u6280\u672f\u80fd\u529b\u7684\u540c\u5b66\u66f4\u613f\u610f\u76f4\u63a5\u7528 <code>requests</code> \u6765\u505a\u63a5\u53e3\u81ea\u52a8\u5316\uff0c\u4f46\u662f\u5927\u591a\u7528 <code>requests</code> \u6765\u505a\u7684\u63a5\u53e3\u81ea\u52a8\u5316\u9879\u76ee\uff0c\u5728\u5de5\u7a0b\u5316\u65b9\u9762\u90fd\u505a\u5f97\u4e0d\u592a\u597d\uff0c\u4e0e\u5176\u8bf4\u662f\u63a5\u53e3\u81ea\u52a8\u5316\u9879\u76ee\uff0c\u4e0d\u5982\u8bf4\u662f\u63a5\u53e3\u811a\u672c\u7684\u96c6\u4e2d\u5b58\u653e\uff0c\u6ca1\u6709\u4f53\u7cfb\u5316\u7684\u6846\u67b6\u7ed3\u6784\u8bbe\u8ba1\uff0c\u56e0\u6b64\u5728\u5927\u578b CI \u9879\u76ee\u4e2d\u843d\u5730\u4e5f\u663e\u5f97\u4e0d\u592a\u591f\u7528\uff0c\u7ef4\u62a4\u4eba\u5458\u9664\u4e86\u5fd9\u4e8e\u63a5\u53e3\u811a\u672c\u7684\u7ef4\u62a4\uff0c\u8fd8\u8981\u6295\u5165\u5927\u91cf\u65f6\u95f4\u505a\u65b0\u529f\u80fd\u548c\u4fee\u590d\u4ee3\u7801\u4e2d\u7684 Bug\u3002</p> <p>\u60f3\u8981\u8f7b\u677e\u5feb\u901f\u7684\u843d\u5730\u63a5\u53e3\u81ea\u52a8\u5316\uff0c\u53c8\u4e0d\u60f3\u81ea\u5df1\u53bb\u6298\u817e\uff0c\u6211\u4e2a\u4eba\u8fd8\u662f\u63a8\u8350 <code>HttpRunner</code>\uff0c\u53ea\u9700\u8981\u5199\u5199\u914d\u7f6e\u6587\u4ef6\u5c31\u628a\u6d3b\u5e72\u5b8c\u4e86\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1a<code>deepin</code> / <code>UOS</code></p> <pre><code>sudo bash -c \"$(curl -ksSL https://httprunner.com/script/install.sh)\"\n</code></pre> <p>\u6ce8\u610f\uff0c\u4f7f\u7528 <code>sudo</code> \u5b89\u88c5\uff0c\u4e0d\u7136\u547d\u4ee4\u884c\u5de5\u5177\u65e0\u6cd5\u5199\u5165\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u3002</p> <p>\u88c5\u5b8c\u4e4b\u540e\u4f1a\u6709\u4e00\u4e9b\u7248\u672c\u3001\u547d\u4ee4\u884c\u53c2\u6570\u7684\u8f93\u51fa\uff0c\u8bf4\u660e\u5b89\u88c5\u6210\u529f\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u521b\u5efa\u9879\u76ee","text":"<pre><code>hrp startproject funny-api-autotest\n</code></pre> <p>\u8fd9\u91cc\u4f1a\u4f7f\u7528 <code>venv</code> \u521b\u5efa\u4e00\u4e2a\u865a\u62df\uff0c\u6709\u53ef\u80fd\u62a5\u9519\u9700\u8981\u5b89\u88c5 <code>python3-venv</code>\uff1b</p> <p>\u4e0d\u8981\u614c\uff0c\u6211\u4eec\u6765\u4fee\u590d\u4e00\u4e0b\u73af\u5883\uff1a</p> <pre><code># \u5b89\u88c5\u4f9d\u8d56\nsudo apt install python3-pip\n# \u5b89\u88c5venv\nsudo apt install python3-venv\n# \u628a\u4e4b\u524d\u521b\u5efa\u5931\u8d25\u7684\u865a\u62df\u73af\u5883\u5220\u6389\ncd ~/.hrp/\nrm -rf venv\n# \u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\npython3 -m venv venv\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource ~/.hrp/venv/bin/activate\n# \u628apip\u66f4\u65b0\u4e00\u4e0b\npip install --upgrade pip setuptools wheel\n# \u5b89\u88c5\u4f9d\u8d56funppy\npip install funppy\n</code></pre> <p>\u5982\u679c\u4e0d\u51fa\u610f\u5916\uff0c\u73af\u5883\u5c31\u5b89\u88c5\u597d\u4e86\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u56db\u3001\u76ee\u5f55\u7ed3\u6784","text":"<pre><code>.\n\u251c\u2500\u2500 debugtalk.py # \u5b9a\u4e49\u4e00\u4e9b\u51fd\u6570\u5e76\u8fd4\u56de\u4e00\u4e9b\u503c\uff0c\u51fd\u6570\u540d\u548c\u53c2\u6570\u53ef\u4ee5\u4f20\u5165\u5230yml\u6587\u4ef6\u53c2\u6570\u91cc\u9762\uff1b\n\u251c\u2500\u2500 .env # \u5b9a\u4e49\u5168\u5c40\u7684\u73af\u5883\u53d8\u91cf\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 har # \u5bfc\u51fa\u7684har\u6587\u4ef6\n\u251c\u2500\u2500 proj.json # \u5de5\u7a0b\u4fe1\u606f\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 results # \u6d4b\u8bd5\u62a5\u544a\n\u2514\u2500\u2500 testcases # \u6d4b\u8bd5\u7528\u4f8b\n</code></pre> <p><code>testcases</code> </p> <p>\u8fd9\u91cc\u9762\u7528\u4f8b\u662f <code>yaml</code> \u6216 <code>json</code> \u6587\u4ef6\uff0c\u7528 <code>yaml</code> \u6587\u4ef6\u5199\u63a5\u53e3\u81ea\u52a8\u5316\u7684\u7528\u4f8b\u4e5f\u662f\u5e38\u89c4\u64cd\u4f5c\uff0c\u56e0\u4e3a\u63a5\u53e3\u51e0\u4e4e\u90fd\u662f\u4ee5\u5b57\u5178\uff08\u6216 <code>json</code>\uff09\u7684\u5f62\u5f0f\u63d0\u4f9b\u53c2\u6570\uff0c\u800c <code>yaml</code> \u6587\u4ef6\u8bfb\u51fa\u6765\u521a\u597d\u5c31\u662f\uff0c\u6240\u4ee5\u5927\u5bb6\u5c31\u559c\u6b22\u7528\u8fd9\u79cd\u683c\u5f0f\u3002</p> <p>\u524d\u9762\u6211\u8bf4\u8fd9\u4e2a\u6846\u67b6\u7b80\u5355\u5c31\u662f\u56e0\u4e3a\u628a\u63a5\u53e3\u7684\u4fe1\u606f\u5c31\u76f4\u63a5\u5728 <code>yaml</code> \u6587\u4ef6\u91cc\u9762\u4e00\u914d\u7f6e\uff0c\u6d3b\u5c31\u5e72\u5b8c\u4e86\uff0c\u6839\u672c\u90fd\u4e0d\u9700\u8981\u5199\u4ee3\u7801\uff1b</p> <p>\u5bf9\u65b0\u624b\u6765\u8bf4\u7b80\u76f4\u4e86\uff0c\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b <code>yaml</code> \u6587\u4ef6\u7684\u5b57\u6bb5\uff1a</p> <pre><code>config:\nname: \"request methods testcase with functions\"\nvariables:\nfoo1: config_bar1\nfoo2: config_bar2\nexpect_foo1: config_bar1\nexpect_foo2: config_bar2\nbase_url: \"https://postman-echo.com\"\nverify: False\nexport: [\"foo3\"]\nteststeps:\n-\nname: get with params\nvariables:\nfoo1: bar11\nfoo2: bar21\nsum_v: \"${sum_two(1, 2)}\"\nrequest:\nmethod: GET\nurl: /get\nparams:\nfoo1: $foo1\nfoo2: $foo2\nsum_v: $sum_v\nheaders:\nUser-Agent: HttpRunner/${get_httprunner_version()}\nextract:\nfoo3: \"body.args.foo2\"\nvalidate:\n- eq: [\"status_code\", 200]\n- eq: [\"body.args.foo1\", \"bar11\"]\n- eq: [\"body.args.sum_v\", \"3\"]\n- eq: [\"body.args.foo2\", \"bar21\"]\n-\nname: post form data\nvariables:\nfoo2: bar23\nrequest:\nmethod: POST\nurl: /post\nheaders:\nUser-Agent: HttpRunner/${get_httprunner_version()}\nContent-Type: \"application/x-www-form-urlencoded\"\ndata: \"foo1=$foo1&amp;foo2=$foo2&amp;foo3=$foo3\"\nvalidate:\n- eq: [\"status_code\", 200]\n- eq: [\"body.form.foo1\", \"$expect_foo1\"]\n- eq: [\"body.form.foo2\", \"bar23\"]\n- eq: [\"body.form.foo3\", \"bar21\"]\n</code></pre> <ul> <li>config\uff1a\u6d4b\u8bd5\u7528\u4f8b\u7684\u516c\u5171\u914d\u7f6e\u90e8\u5206\uff0c\u5305\u62ec\u7528\u4f8b\u540d\u79f0\u3001base_url\u3001\u53c2\u6570\u5316\u6570\u636e\u6e90\u3001\u662f\u5426\u5f00\u542f SSL \u6821\u9a8c\u7b49\uff0c\u4e3e\u4f8b\uff1a</li> </ul> <pre><code>config:\nname: \"demo with complex mechanisms\"\nverify: False\nbase_url: \"https://postman-echo.com\"\nheaders:\nX-Request-Timestamp: \"165460624942\"\nparameters:\nuser_agent: [ \"iOS/10.1\", \"iOS/10.2\" ]\nusername-password: ${parameterize($file)}\nparameters_setting:\nstrategies:\nuser_agent:\nname: \"user-identity\"\npick_order: \"sequential\"\nusername-password:\nname: \"user-info\"\npick_order: \"random\"\nlimit: 6\nthink_time:\nstrategy: random_percentage\nsetting:\nmax_percentage: 1.5\nmin_percentage: 1\nlimit: 4\nvariables:\napp_version: v1\nuser_agent: iOS/10.3\nfile: examples/hrp/account.csv\nwebsocket:\nreconnection_times: 5\nreconnection_interval: 2000\nexport: [\"app_version\"]\nweight: 10\n</code></pre> <ul> <li>teststeps\uff1a\u6709\u5e8f\u6b65\u9aa4\u7684\u96c6\u5408\uff1b</li> </ul> \u6d4b\u8bd5\u6b65\u9aa4\u7c7b\u578b \u542b\u4e49 request \u7528\u4e8e\u53d1\u8d77 HTTP \u8bf7\u6c42\u7684\u6b65\u9aa4\u7c7b\u578b api \u7528\u4e8e\u5f15\u7528 API \u7684\u6b65\u9aa4\u7c7b\u578b testcase \u7528\u4e8e\u5f15\u7528\u5176\u4ed6\u6d4b\u8bd5\u7528\u4f8b\u7684\u6b65\u9aa4\u7c7b\u578b transaction \u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u4e8b\u52a1 rendezvous \u96c6\u5408\u70b9 think_time \u601d\u8003\u65f6\u95f4 websocket \u7528\u4e8e\u53d1\u8d77 WebSocket \u8bf7\u6c42\u7684\u6b65\u9aa4\u7c7b\u578b <p>\u9664\u4e86\u57fa\u672c\u7684\u6d4b\u8bd5\u6b65\u9aa4\u4e4b\u5916\uff0c\u90e8\u5206\u6d4b\u8bd5\u6b65\u9aa4\u8fd8\u53ef\u4ee5\u8fdb\u884c\u589e\u5f3a\uff1b</p> \u589e\u5f3a\u64cd\u4f5c\u7c7b\u578b \u542b\u4e49 \u9002\u7528\u7684\u6d4b\u8bd5\u6b65\u9aa4 variables \u5c40\u90e8\u53d8\u91cf \u901a\u7528 setup_hooks \u524d\u7f6e\u51fd\u6570 request/api/websocket teardown_hooks \u540e\u7f6e\u51fd\u6570 request/api/websocket extract \u53c2\u6570\u63d0\u53d6 request/api/websocket validate \u7ed3\u679c\u6821\u9a8c request/api/websocket export \u5bfc\u51fa\u53d8\u91cf testcase <p>\u4e3e\u4f8b\uff1a</p> <pre><code>teststeps:\n-\nname: get with params\nvariables:\nfoo1: ${ENV(USERNAME)}\nfoo2: bar21\nsum_v: \"${sum_two_int(1, 2)}\"\nrequest:\nmethod: GET\nurl: $base_url/get\nparams:\nfoo1: $foo1\nfoo2: $foo2\nsum_v: $sum_v\nextract:\nfoo3: \"body.args.foo2\"\nvalidate:\n- eq: [\"status_code\", 200]\n- eq: [\"body.args.foo1\", \"debugtalk\"]\n- eq: [\"body.args.sum_v\", \"3\"]\n- eq: [\"body.args.foo2\", \"bar21\"]\n-\nname: post form data\nvariables:\nfoo2: bar23\nrequest:\nmethod: POST\nurl: $base_url/post\nheaders:\nContent-Type: \"application/x-www-form-urlencoded\"\nbody: \"foo1=$foo1&amp;foo2=$foo2&amp;foo3=$foo3\"\nvalidate:\n- eq: [\"status_code\", 200]\n- eq: [\"body.form.foo1\", \"$expect_foo1\"]\n- eq: [\"body.form.foo2\", \"bar23\"]\n- eq: [\"body.form.foo3\", \"bar21\"]\n</code></pre> <p>\u7279\u6b8a\u503c\u7684\u89c4\u5219\uff1a</p> <ul> <li> <p>\u53d8\u91cf\u5f15\u7528\uff1a\u7ea6\u5b9a\u901a\u8fc7 <code>${}</code> \u6216 <code>$</code> \u7684\u5f62\u5f0f\u6765\u5f15\u7528\u53d8\u91cf\uff0c\u4f8b\u5982 <code>$foo1</code> \u6216 <code>${foo1}</code></p> </li> <li> <p>\u51fd\u6570\u8c03\u7528\uff1a\u7ea6\u5b9a\u901a\u8fc7 <code>${}</code> \u7684\u5f62\u5f0f\u6765\u8c03\u7528\u63d2\u4ef6\u51fd\u6570\uff0c\u4f8b\u5982 <code>${sum_two(1, 2)}</code> \uff1b</p> </li> </ul> <p>\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0cyaml \u6587\u4ef6\u91cc\u9762\u5199 <code>${sum_two(1, 2)}</code>\uff0c\u4ece\u54ea\u91cc\u6765\u7684\uff1b</p> <p>\u5176\u5b9e\uff0c<code>sum_two</code> \u5728<code>debugtalk.py</code> \u91cc\u9762\u5b9a\u4e49;</p> <pre><code># debugtalk.py\nimport funppy\ndef sum_two_int(a: int, b: int) -&gt; int:\nreturn a + b\nif __name__ == '__main__':\nfunppy.register(\"sum_two\", sum_two_int)\nfunppy.serve()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/HttpRunner-2%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u4e94\u3001\u6267\u884c\u7528\u4f8b","text":"<pre><code>hrp run testcases/demo_requests.yml --gen-html-report\n</code></pre> <p>\u6267\u884c\u5b8c\u6210\u4e4b\u540e\uff0c\u5728 <code>result</code> \u76ee\u5f55\u4e0b\u751f\u6210 <code>html</code> \u6d4b\u8bd5\u62a5\u544a\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"Playwright\u20148\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================\n# Author : mikigo\n# Time   : 2023/3/2\n# =============================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>Playwright \u662f\u4e00\u4e2a Web UI \u81ea\u52a8\u5316\u6d4b\u8bd5\u7684\u6846\u67b6\uff0c\u5176\u5404\u65b9\u9762\u529f\u80fd\u548c\u4f7f\u7528\u4f53\u9a8c\u5168\u9762\u78be\u538b Selenium\u3002</p> <p>\u4e00\u5165 Playwright \u6df1\u4f3c\u6d77\uff0c\u4ece\u6b64 Selenium \u662f\u8def\u4eba\u3002</p> <p>\u66fe\u7ecf\uff0c\u5728 Web UI \u81ea\u52a8\u5316\u6d4b\u8bd5\u9886\u57df\uff0cSelenium  \u5982\u65e5\u4e2d\u5929\uff0c\u51e0\u4e4e\u53ea\u8981\u63d0\u5230 UI \u81ea\u52a8\u5316\u5c31\u4f1a\u60f3\u5230 Selenium\uff0cSelenium \u5c31\u662f Web UI\u81ea\u52a8\u5316\u7684\u4ee3\u540d\u8bcd\uff1b</p> <p>\u540e\u6765\uff0cPlaywright \u51fa\u73b0\u4e86\uff0c\u6162\u6162\u7684\u5927\u5bb6\u5bf9 Selenium \u5f00\u59cb\u51b7\u843d\u4e86\uff1b\u4e3a\u5565\u5462\uff1f</p> <p>\u7b80\u5355\u8bb2\uff0c\u56e0\u4e3a\u5728 Selenium \u65f6\u4ee3\uff0c\u5176\u5b9e\u5927\u5bb6\u9047\u5230\u5f88\u591a\u95ee\u9898\uff0c\u4f46\u4e00\u76f4\u5f97\u4e0d\u5230\u89e3\u51b3\uff1bSelenium 2.0 \u7248\u672c\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u98de\u8dc3\uff0c\u56e0\u4e3a\u5f15\u5165\u4e86 WebDriver\uff0c\u540e\u9762 3.0\u3001\u5230\u73b0\u5728 4.0 \u529f\u80fd\u4e0a\u6ca1\u6709\u4ec0\u4e48\u4eae\u70b9\uff0c\u800c\u4e14\u4ee5\u524d\u7684\u95ee\u9898\u8fd8\u5728\uff0c\u5927\u5bb6\u5bf9\u8fd9\u4e2a\u73a9\u610f\u513f\u5c31\u63d0\u4e0d\u8d77\u5174\u8da3\u53bb\u7814\u7a76\u4e86\u3002</p> <p>Selenium \u4e4b\u540e\u4e0d\u662f\u6ca1\u6709\u5176\u4ed6 UI \u6846\u67b6\uff0c\u786e\u5b9e\u4e5f\u51fa\u73b0\u8fc7\u51e0\u4e2a\u5c0f\u6709\u540d\u6c14\u7684\u6846\u67b6\uff0c\u6bd4\u5982\uff1acypress\u3001puppeteer\u3001testcafe\uff0c\u8fd9\u4e9b\u4e2a\u73a9\u610f\u513f\u7f3a\u70b9\u5c31\u662f\u4e0d\u652f\u6301 Python\uff0c\u592a\u62c9\u80ef\uff0c\u800c\u4e14\u50cf puppeteer \u53ea\u652f\u6301\u8c37\u6b4c\u6d4f\u89c8\u5668\uff0c\u56e0\u4e3a\u5b83\u5c31\u662f\u8c37\u6b4c\u5bb6\u7684\u5b83\u4e0d\u9700\u8981\u652f\u6301\u5176\u4ed6\u6d4f\u89c8\u5668\uff0c\u5c31\u8fd9\uff0c\u5e7f\u5927\u7684 Firefox \u548c\u5c0a\u8d35\u7684 Safari \u7528\u6237\u80fd\u5fcd\u4f60\u5417\uff0c\u7ed9\u8001\u5b50\u6eda\u3002\u4e8e\u662f\uff0cPlaywright \u96c6\u5404\u5bb6\u4e4b\u6240\u957f\uff0c\u8865\u5404\u5bb6\u4e4b\u7f29\u77ed\uff0c\u201c\u5929\u7a7a\u4e00\u58f0\u5de8\u54cd\uff0c\u8001\u5b50\u95ea\u4eae\u767b\u573a\u201d\u3002</p> <p>\u574a\u95f4\u4f20\u8a00\uff0cPlaywright \u6709\u51e0\u4e2a\u6838\u5fc3\u5f00\u53d1\u8005\u5c31\u662f\u4ece puppeteer \u8fc7\u6765\u7684\uff0c\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u8001\u5916\u662f\u771f\u4f1a\u6574\u6d3b\u3002</p> <p>\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u4f7f\u7528 Playwright\uff0c\u6211\u4ec5\u4ec5\u53ea\u5199\u4e86\u4e00\u4e2a\u5c0f\u811a\u672c\uff0c\u4f46\u6709\u4e24\u4e2a\u70b9\u5370\u8c61\u6df1\u523b\uff1a</p> <p>1\u3001\u73af\u5883\u5b89\u88c5\u597d\u7b80\u5355\uff1b</p> <p>\u8981\u77e5\u9053 Selenium \u7684\u73af\u5883\u5b89\u88c5\u662f\u5f88\u70e6\u4eba\u7684\uff0c\u8981\u5355\u72ec\u88c5 WebDriver \u7684\u9a71\u52a8\uff0c\u800c\u4e14\u9a71\u52a8\u7248\u672c\u8981\u548c\u6d4f\u89c8\u5668\u7248\u672c\u4e00\u81f4\uff0c\u4e0d\u7136\u4f1a\u62a5\u4e00\u4e9b\u83ab\u540d\u5176\u5999\u7684\u9519\uff0c\u591a\u5c11\u4eba\u5728 Selenium \u7684\u73af\u5883\u4e0a\u5361\u4f4f\u800c\u65e0\u6cd5\u5165\u95e8\uff1b</p> <p>2\u3001\u6267\u884c\u901f\u5ea6\u597d\u5feb\uff1b</p> <p>\u7528\u8fc7 Selenium \u5e94\u8be5\u77e5\u9053\uff0c\u8dd1\u8d77\u6765\u633a\u6162\u7684\uff0cPlaywright \u7684\u6267\u884c\u901f\u5ea6\u771f\u7684\u201c\u8d77\u98de\u201d\u3002</p> <p>\u5728\u540e\u9762\u5bf9 Playwright \u4f7f\u7528\u548c\u4e86\u89e3\u8d8a\u6765\u8d8a\u591a\u4e4b\u540e\u53d1\u73b0\uff0c\u5b83\u786e\u5b9e\u5168\u9762\u78be\u538b Selenium\u3002\u5fae\u8f6f\u51fa\u54c1\uff0c\u5fc5\u5c5e\u7cbe\u54c1\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<p>\u7cfb\u7edf\u73af\u5883\uff1a<code>deepin-20.8</code></p> <pre><code>pip3 install playwright\n# \u5b89\u88c5\u6d4f\u89c8\u5668\nplaywright install\n</code></pre> <p>\u5b8c\u4e8b\u513f\u4e86\uff0c\u8fd9\u6837\u73af\u5883\u5c31\u88c5\u597d\u4e86\uff0c\u662f\u4e0d\u662f\u5f88\u7b80\u5355\uff0c\u4e0d\u7528\u53bb\u5173\u5fc3\u7528\u4ec0\u4e48\u6d4f\u89c8\u5668\uff0c\u7528\u4ec0\u4e48 WebDriver \u9a71\u52a8\uff0c\u4f60\u7684\u7535\u8111\u4e0a\u751a\u81f3\u4e0d\u7528\u88c5\u6d4f\u89c8\u5668\uff0c<code>playwright install</code> \u5df2\u7ecf\u628a\u6d4b\u8bd5\u7528\u7684\u6d4f\u89c8\u5668\u90fd\u88c5\u597d\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u811a\u672c\u751f\u6210\u5668","text":"<p>Selenium IDE \u662f\u7528\u6765\u5f55\u5236\u811a\u672c\u7684\uff0c\u597d\u591a\u521a\u5f00\u59cb\u5165\u95e8\u7684\u540c\u5b66\u5e94\u8be5\u90fd\u7528\u8fc7\uff0c\u5c31\u662f\u5728\u6d4f\u89c8\u5668\u91cc\u9762\u88c5\u4e2a\u63d2\u4ef6\uff0c\u7136\u540e\u76d1\u63a7\u6d4f\u89c8\u5668\u7684\u4e8b\u4ef6\uff0c\u751f\u6210\u811a\u672c\uff1b\u6211\u4e2a\u4eba\u5012\u662f\u6781\u5c11\u7528\uff0c\u56e0\u4e3a\u4f1a\u5199\u4ee3\u7801\u7528\u90a3\u73a9\u610f\u513f\u5e72\u5565\u3002\uff08\u6210\u529f\u88c5\u5230\uff09</p> <p>Playwright \u5f53\u7136\u4e5f\u6709\u5f55\u5236\u7684\u529f\u80fd\uff0c\u5728\u7ec8\u7aef\u6267\u884c\uff1a</p> <pre><code>playwright codegen\n</code></pre> <p>\u4f1a\u542f\u52a8\u4e00\u4e2a\u201c\u6d4f\u89c8\u5668\u201d\u7a97\u53e3\u548c\u4e00\u4e2a\u201c\u811a\u672c\u751f\u6210\u5668\u201d\u7a97\u53e3</p> <p></p> <p>\u811a\u672c\u751f\u6210\u5668\u521d\u59cb\u72b6\u6001\u4f1a\u6709\u6a21\u677f\u4ee3\u7801\uff0c\u4f60\u901a\u8fc7\u6d4f\u89c8\u5668\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u6bcf\u4e00\u6b65\u7684\u64cd\u4f5c\uff0c\u90fd\u4f1a\u5bf9\u5e94\u5728\u811a\u672c\u751f\u6210\u5668\u81ea\u52a8\u751f\u6210\u4e00\u884c\u4ee3\u7801\uff0c\u6bd4\u5982\uff0c\u6211\u8f93\u5165\u767e\u5ea6\u7684\u7f51\u5740\uff1a</p> <p></p> <p>\u5728\u767e\u5ea6\u9996\u9875\uff0c\u70b9\u51fb\u8f93\u5165\u6846\uff0c\u8f93\u5165\u4e00\u4e2a\u5185\u5bb9\uff0c\u70b9\u51fb\u201c\u767e\u5ea6\u4e00\u4e0b\u201d\uff0c\u4e00\u987f\u64cd\u4f5c\u4e0b\u6765\uff0c\u4ee3\u7801\u81ea\u52a8\u751f\u6210\u5982\u4e0b\uff1a</p> <pre><code>from playwright.sync_api import Playwright, sync_playwright, expect\ndef run(playwright: Playwright) -&gt; None:\nbrowser = playwright.chromium.launch(headless=False)\ncontext = browser.new_context()\npage = context.new_page()\npage.goto(\"https://www.baidu.com/\")\npage.locator(\"#kw\").click()\npage.locator(\"#kw\").fill(\"youqu\")\npage.get_by_role(\"button\", name=\"\u767e\u5ea6\u4e00\u4e0b\").click()\n# ---------------------\ncontext.close()\nbrowser.close()\nwith sync_playwright() as playwright:\nrun(playwright)\n</code></pre> <p>\u8fd9\u6837\u5c31\u81ea\u52a8\u751f\u6210\u4e86\u4e00\u6bb5\u5b8c\u6574\u7684\u4ee3\u7801\uff0c\u7b80\u76f4\u4e0d\u8981\u592a\u8f7b\u677e\u3002</p> <p>\u6709\u540c\u5b66\u8bf4\uff0c\u80fd\u4e0d\u80fd\u76f4\u63a5\u751f\u6210\u6d4b\u8bd5\u7528\u4f8b\u7684\u4ee3\u7801\uff0c\u5f53\u7136\u662f\u53ef\u4ee5\u7684\uff0c\u5728\u811a\u672c\u751f\u6210\u5668\u53f3\u4e0a\u89d2 Target \u9009\u62e9 <code>pytest</code>\uff0c\u4e00\u987f\u64cd\u4f5c\u4e0b\u6765\uff0c\u751f\u6210\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>from playwright.sync_api import Page, expect\ndef test_example(page: Page) -&gt; None:\npage.goto(\"https://www.baidu.com/\")\npage.locator(\"#kw\").click()\npage.locator(\"#kw\").fill(\"youqu\")\npage.get_by_role(\"button\", name=\"\u767e\u5ea6\u4e00\u4e0b\").click()\n</code></pre> <p>\u8fd9\u4e2a\u811a\u672c\u662f\u53ef\u4ee5\u76f4\u63a5\u7528 <code>pytest</code> \u6765\u6267\u884c\u7684\uff0c\u4f60\u9700\u8981\u5b89\u88c5 <code>pytest-playwright</code> \u63d2\u4ef6\uff1a</p> <pre><code>pip3 install pytest-playwright\n</code></pre> <p><code>pytest-playwright</code>  \u63d2\u4ef6\u662f\u7531 Playwright \u5b98\u65b9\u7ef4\u62a4\u7684\u3002</p> <p>\u76f8\u4fe1\u6709\u4e0a\u9762 <code>pytest</code> \u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5bf9\u4e8e\u6d4b\u8bd5\u540c\u5b66\u6765\u8bb2\uff0c\u5199\u4e00\u4e9b\u7b80\u5355\u7684\u7528\u4f8b\u662f\u6ca1\u4ec0\u4e48\u95ee\u9898\u4e86\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u56db\u3001\u5143\u7d20\u5b9a\u4f4d\u65b9\u6cd5","text":"<p>\u5bf9\u4e8e\u6240\u6709\u7684 UI \u81ea\u52a8\u5316\u6765\u8bb2\uff0c\u65e0\u975e\u5c31\u662f\u5143\u7d20\u5b9a\u4f4d\u548c\u5143\u7d20\u64cd\u4f5c\uff0cPlaywright \u6700\u5e38\u7528\u7684\u5143\u7d20\u7684\u5b9a\u4f4d\u65b9\u6cd5\u5c31\u662f XPath \u548c CSS\uff0c\u5176\u6b21\u5c31\u662f\u5b83\u7279\u6709\u7684\u5b9a\u4f4d\u65b9\u6cd5\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1xpath","title":"1\u3001XPath","text":"<p>XPath \u662f\u4e00\u79cd\u901a\u7528\u3001\u6807\u51c6\u7684\u5143\u7d20\u5b9a\u4f4d\u65b9\u6848\uff0c\u5b83\u7684\u8bed\u6cd5\u4e5f\u662f\u6807\u51c6\u7684\uff0c\u5728\u5f88\u591a\u6846\u67b6\u91cc\u9762\u90fd\u6709\u4f7f\u7528\u5230\uff0c\u57fa\u672c\u80fd\u6ee1\u8db3 90% \u7684\u5143\u7d20\u5b9a\u4f4d\u9700\u6c42\uff1b</p> <p>\u7ecf\u5e38\u6709\u540c\u5b66\u8bf4 XPath \u5b9a\u4f4d\u4e0d\u7a33\u5b9a\uff0c\u9875\u9762\u4e0a\u4e00\u70b9\u70b9\u53d8\u5316\u5c31\u627e\u4e0d\u5230\u5143\u7d20\u4e86\uff0c\u8bf4\u8fd9\u8bdd\u7684\u4e00\u822c\u662f\u559c\u6b22\u4f7f\u7528\u6d4f\u89c8\u5668\u81ea\u5e26\u7684\u590d\u5236 XPath \u7684\u529f\u80fd\uff0c\u56e0\u4e3a\u590d\u5236\u51fa\u6765\u7684 XPath \u8def\u5f84\u662f\u7edd\u5bf9\u8def\u5f84\uff0c\u5f53\u7136\u4e0d\u7a33\u5b9a\uff0c\u6211\u4eec\u901a\u8fc7\u89c2\u5bdf\uff0c\u81ea\u5df1\u5199\u76f8\u5bf9\u8def\u5f84\u7684XPath \u8868\u8fbe\u5f0f\uff1b</p> <p>\u7b80\u5355\u4ecb\u7ecd\u4e0b XPath \u8bed\u6cd5\uff1a</p> <p>\uff081\uff09\u8282\u70b9\u9009\u53d6</p> \u8868\u8fbe\u5f0f \u63cf\u8ff0 nodename \u9009\u53d6\u6b64\u8282\u70b9\u7684\u6240\u6709\u5b50\u8282\u70b9 / \u4ece\u6839\u8282\u70b9\u9009\u53d6 // \u4ece\u5339\u914d\u9009\u62e9\u7684\u5f53\u524d\u8282\u70b9\u9009\u62e9\u6587\u6863\u4e2d\u7684\u8282\u70b9\uff0c\u800c\u4e0d\u8003\u8651\u5b83\u4eec\u7684\u4f4d\u7f6e . \u9009\u53d6\u5f53\u524d\u8282\u70b9 .. \u9009\u53d6\u5f53\u524d\u8282\u70b9\u7684\u7236\u8282\u70b9 @ \u9009\u53d6\u5c5e\u6027 <p>\uff082\uff09\u5c5e\u6027\u9009\u53d6</p> \u8def\u5f84\u8868\u8fbe\u5f0f \u7ed3\u679c /bookstore/book[1] \u9009\u53d6\u5c5e\u4e8e bookstore \u5b50\u5143\u7d20\u7684\u7b2c\u4e00\u4e2a book \u5143\u7d20\u3002 /bookstore/book[last()] \u9009\u53d6\u5c5e\u4e8e bookstore \u5b50\u5143\u7d20\u7684\u6700\u540e\u4e00\u4e2a book \u5143\u7d20\u3002 /bookstore/book[last()-1] \u9009\u53d6\u5c5e\u4e8e bookstore \u5b50\u5143\u7d20\u7684\u5012\u6570\u7b2c\u4e8c\u4e2a book \u5143\u7d20\u3002 /bookstore/book[position()&lt;3] \u9009\u53d6\u6700\u524d\u9762\u7684\u4e24\u4e2a\u5c5e\u4e8e bookstore \u5143\u7d20\u7684\u5b50\u5143\u7d20\u7684 book \u5143\u7d20\u3002 //title[@lang] \u9009\u53d6\u6240\u6709\u62e5\u6709\u540d\u4e3a lang \u7684\u5c5e\u6027\u7684 title \u5143\u7d20\u3002 //title[@lang='eng'] \u9009\u53d6\u6240\u6709 title \u5143\u7d20\uff0c\u4e14\u8fd9\u4e9b\u5143\u7d20\u62e5\u6709\u503c\u4e3a eng \u7684 lang \u5c5e\u6027\u3002 /bookstore/book[price&gt;35.00] \u9009\u53d6 bookstore \u5143\u7d20\u7684\u6240\u6709 book \u5143\u7d20\uff0c\u4e14\u5176\u4e2d\u7684 price \u5143\u7d20\u7684\u503c\u987b\u5927\u4e8e 35.00\u3002 /bookstore/book[price&gt;35.00]/title \u9009\u53d6 bookstore \u5143\u7d20\u4e2d\u7684 book \u5143\u7d20\u7684\u6240\u6709 title \u5143\u7d20\uff0c\u4e14\u5176\u4e2d\u7684 price \u5143\u7d20\u7684\u503c\u987b\u5927\u4e8e 35.00\u3002 <p>\u5728\u6d4f\u89c8\u5668\u4e2d\u8c03\u8bd5 XPath\uff1a</p> <p>\u6309 F12 \u6253\u5f00\u8c03\u8bd5\u9875\u9762\u2014&gt;\u9009\u62e9 console\uff0cXPath \u5b9a\u4f4d\u7684\u8bed\u6cd5\u662f \uff1a$x() </p> <p>\u4e3e\u4f8b\uff1a</p> <p></p> <pre><code>$x(\"//input[@type='submit']\")\n</code></pre> <p>\u8bf4\u660e\u901a\u8fc7\u8fd9\u4e2a XPath \u8868\u8fbe\u5f0f\u53ef\u4ee5\u5b9a\u4f4d\u5230\u3010\u767e\u5ea6\u4e00\u4e0b\u3011\u6309\u94ae\uff1b</p> <p>\u5728 Playwright \u91cc\u9762\u662f\u901a\u8fc7 page \u5bf9\u8c61\u63d0\u4f9b\u7684 locator \u65b9\u6cd5\u5b9e\u73b0 CSS \u6216 XPath \u5b9a\u4f4d\u7684\uff1a</p> <pre><code>page.locater(\"//input[@type='submit']\").click()\n</code></pre> <p>Playwright \u4f1a\u81ea\u52a8\u68c0\u6d4b\u8f93\u5165\u7684\u662f CSS \u6216 XPath\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2css","title":"2\u3001CSS","text":"<p>\u4e86\u89e3\u524d\u7aef\u7684\u5e94\u8be5\u90fd\u77e5\u9053 CSS\uff0c\u8fd9\u91cc\u4e0d\u591a\u4ecb\u7ecd\uff1b</p> <p>\u5728\u6d4f\u89c8\u5668\u4e2d\u8c03\u8bd5 CSS \u5b9a\u4f4d\uff1a</p> <p></p> <pre><code>$(\"#su\")\n</code></pre> <p>\u8bf4\u660e\u901a\u8fc7\u6b64 CSS \u8868\u8fbe\u5f0f\u53ef\u4ee5\u5b9a\u4f4d\u5230\u3010\u767e\u5ea6\u4e00\u4e0b\u3011\u6309\u94ae\uff1b</p> <p>\u5728 Playwright \u91cc\u9762\uff1a</p> <pre><code>page.locater(\"#su\").click()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u7279\u6709\u7684","text":"<p>Playwright \u5185\u7f6e\u51e0\u4e2a\u5b9a\u4f4d\u5668\uff1a</p> <ul> <li>get_by_role \u901a\u8fc7\u89d2\u8272\u5b9a\u4f4d</li> </ul> <p>\u8fd8\u662f\u4e0a\u9762\u7684\u4f8b\u5b50\u3010\u767e\u5ea6\u4e00\u4e0b\u3011\uff1a</p> <p>html \u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>&lt;input type=\"submit\" id=\"su\" value=\"\u767e\u5ea6\u4e00\u4e0b\" class=\"bg s_btn\"&gt;\n</code></pre> <p>\u5b9a\u4f4d\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>page.get_by_role(\"button\", name=\"\u767e\u5ea6\u4e00\u4e0b\")\n</code></pre> <ul> <li>get_by_text \u901a\u8fc7\u6587\u672c\u5b9a\u4f4d</li> </ul> <p>\u8fd8\u662f\u5728\u767e\u5ea6\u9996\u9875\u627e\u4e2a\u6587\u672c html \uff1a</p> <pre><code>&lt;span class=\"hot-refresh-text\"&gt;\u6362\u4e00\u6362&lt;/span&gt;\n</code></pre> <p>\u5b9a\u4f4d\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>page.get_by_text(\"\u6362\u4e00\u6362\")\n</code></pre> <ul> <li>get_by_label \u901a\u8fc7\u6807\u7b7e\u5b9a\u4f4d</li> </ul> <p>html \u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>&lt;label&gt;Password &lt;input type=\"password\" /&gt;&lt;/label&gt;\n</code></pre> <p>\u5b9a\u4f4d\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>page.get_by_label(\"Password\")\n</code></pre> <p>\u8fd8\u6709\u5176\u4ed6\u7684\u5185\u7f6e\u5b9a\u4f4d\u65b9\u6cd5\uff1a</p> <pre><code>get_by_placeholder \u5360\u4f4d\u7b26\u5b9a\u4f4d\nget_by_alt_text \u66ff\u6362\u6587\u672c\u5b9a\u4f4d\nget_by_title \u6807\u9898\u5b9a\u4f4d\nget_by_test_id \u6d4b\u8bd5ID\u5b9a\u4f4d\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u4e94\u3001\u5176\u4ed6","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1\u3001\u622a\u56fe","text":"<p>\u6355\u83b7\u5c4f\u5e55\u622a\u56fe\u5e76\u5c06\u5176\u4fdd\u5b58\u5230\u6587\u4ef6\u4e2d\uff1a</p> <pre><code>page.screenshot(path=\"screenshot.png\")\n</code></pre> <p>\u5b8c\u6574\u9875\u9762\u622a\u56fe\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u53ef\u6eda\u52a8\u9875\u9762\u7684\u622a\u56fe\uff1a</p> <pre><code>page.screenshot(path=\"screenshot.png\", full_page=True)\n</code></pre> <p>\u5355\u4e2a\u5143\u7d20\u8fdb\u884c\u5c4f\u5e55\u622a\u56fe\uff1a</p> <pre><code>page.locator(\".header\").screenshot(path=\"screenshot.png\")\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u5f55\u5c4f","text":"<p>\u6d4b\u8bd5\u8fc7\u7a0b\u5f55\u5c4f\uff0c\u4fdd\u5b58\u7684\u89c6\u9891\u6587\u4ef6\u5c06\u51fa\u73b0\u5728\u6307\u5b9a\u7684\u6587\u4ef6\u5939\u4e2d\uff0c\u751f\u6210\u4e86\u552f\u4e00\u7684\u540d\u79f0\uff0c\u89c6\u9891\u4fdd\u5b58\u5728\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\u5728\u6d4b\u8bd5\u7ed3\u675f\u65f6\u5173\u95ed\uff1a</p> <pre><code>context = browser.new_context(record_video_dir=\"videos/\")\ncontext.close()\n</code></pre> <p>\u8fd8\u53ef\u4ee5\u6307\u5b9a\u89c6\u9891\u5927\u5c0f</p> <pre><code>context = browser.new_context(\nrecord_video_dir=\"videos/\",\nrecord_video_size={\"width\": 800, \"height\": 800}\n)\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3po","title":"3\u3001PO","text":"<p>PO\uff08Page Object\uff09 \u662f\u4e00\u79cd\u5206\u5c42\u8bbe\u8ba1\u7684\u601d\u60f3\uff0c\u6700\u65e9\u662f Selenium \u63d0\u51fa\u6765\u7684\uff0c\u4f46\u5b83\u672c\u8eab\u548c\u4f7f\u7528\u4ec0\u4e48\u6846\u67b6\u6ca1\u6709\u5173\u7cfb\uff0c\u6211\u4eec\u5728\u81ea\u52a8\u5316\u6d4b\u8bd5\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\uff0c\u5e94\u8be5\u59cb\u7ec8\u4f7f\u7528 PO \u7684\u8bbe\u8ba1\uff1b</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4\u3001\u81ea\u52a8\u7b49\u5f85","text":"<p>Playwright \u5728\u5143\u7d20\u5b9a\u4f4d\u7684\u65f6\u5019\u662f\u81ea\u52a8\u7b49\u5f85\u7684\uff0c\u4e0d\u7528\u518d\u50cf\u4f7f\u7528 Selenium \u4e00\u6837\u8bbe\u7f6e\u5404\u79cd\u7c7b\u578b\u7684\u7b49\u5f85\uff08\u9690\u5f0f\u7b49\u5f85\u3001\u663e\u793a\u7b49\u5f85\u3001\u5f3a\u5236\u7b49\u5f85\uff09\uff0c\u8fd9\u624d\u662f\u6846\u67b6\u8be5\u6709\u7684\u6837\u5b50\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Playwright%E2%80%948%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#5","title":"5\u3001\u65ad\u8a00","text":"<p>Playwright \u6709\u81ea\u5df1\u7684\u65ad\u8a00\u8bed\u53e5\uff1a</p> <pre><code>locator = page.locator(\"input[type=number]\")\nexpect(locator).to_have_value(re.compile(r\"[0-9]\"))\n</code></pre> <p>\u4f7f\u7528 expect \u8bed\u53e5\uff0c\u540e\u9762\u8ddf\u65ad\u8a00\u7684\u7c7b\u578b\uff0c\u65ad\u8a00\u7684\u7c7b\u578b\u5c31\u6709\u70b9\u591a\u4e86\uff0c\u5927\u6982\u770b\u4e86\u4e0b\u6709\u597d\u51e0\u5341\u4e2a\uff0c\u5217\u51e0\u4e2a\u5e38\u7528\u7684\uff1a</p> <p>to_have_value</p> <p>to_contain_text</p> <p>to_be_empty</p> <p>\u53cd\u5411\u65ad\u8a00\uff0c\u524d\u9762\u52a0 not\uff0c\u5982\uff1anot_to_contain_text</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/","title":"Pytest \u4ece\u5165\u95e8\u5230\u8d77\u98de","text":"<pre><code># ==================================\n# Author : Mikigo\n# Time   : 2021/3/23\n# ==================================\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_1","title":"\u4e00\u3001\u7b80\u4ecb","text":"<p>Pytest \u662f\u4e00\u4e2a\u6d41\u884c\u7684\u57fa\u4e8e Python \u7684\u81ea\u52a8\u5316\u6d4b\u8bd5\u6846\u67b6\uff0c\u4ee5\u5176\u7075\u6d3b\u6027\u3001\u53ef\u6269\u5c55\u6027\u3001\u6613\u7528\u6027\u4fd8\u83b7\u4e86\u5927\u6279 Python \u7a0b\u5e8f\u5458\u7684\u5fc3\u3002\u7f51\u4e0a\u5173\u4e8e pytest \u7684\u6559\u7a0b\u4e0d\u5c11\uff0c\u4f46\u662f\u90fd\u662f\u96f6\u6563\u7684\u77e5\u8bc6\u70b9\uff0c\u51e0\u4e4e\u6ca1\u6709\u5f88\u5168\u9762\u7684\u6559\u7a0b\uff0c\u5f53\u521d\u5b66\u4e60\u5b83\u7684\u65f6\u5019\u5c31\u82e6\u4e8e\u6ca1\u6709\u5168\u9762\u7684\u6559\u7a0b\u800c\u4e0d\u5f97\u4e0d\u53bb\u7814\u8bfb\u5b83\u7684\u5b98\u65b9\u6587\u6863\uff0c\u770b\u5b8c\u4e00\u904d\u5b98\u65b9\u6587\u6863\u4e4b\u540e\u611f\u89c9\u8fd8\u6709\u4e9b\u6ca1\u5f04\u660e\u767d\uff0c\u5230\u4eac\u4e1c\u4e0a\u4e70\u4e86\u4e00\u672c\u300apytest\u6d4b\u8bd5\u5b9e\u6218(Brian.Okken\u300b\uff0c\u5982\u83b7\u81f3\u5b9d\uff0c\u5e94\u8be5\u8bf4\u662f\u5f53\u65f6\u552f\u4e00\u7684\u4e00\u4e2a\u8bb2\u89e3 Pytest \u7684\u4e66\u7c4d\u4e86\uff0c\u770b\u5b8c\u4e4b\u540e\u6211\u6709\u70b9\u5931\u671b\uff0c\u5199\u5f97\u4e5f\u592a\u7b80\u5355\u4e86\uff0c2\u5929\u5c31\u770b\u5b8c\u4e86\uff0c\u8fd8\u4e0d\u5982\u770b\u5b98\u65b9\u6587\u6863\u5462\uff0c\u5c31\u8fd9\u90fd\u80fd\u51fa\u4e66\uff0c\u6211\u90fd\u80fd\u5199\u4e66\u4e86\uff0c\u540e\u9762\u53c8\u56de\u8fc7\u5934\u6765\u770b Pytest \u5b98\u65b9\u6587\u6863\u3002</p> <p>\u5927\u5bb6\u77e5\u9053\u5b98\u65b9\u6587\u6863\u786e\u5b9e\u662f\u6700\u5168\u7684\uff0c\u80fd\u591f\u8ba9\u4f60\u5168\u65b9\u4f4d\u7684\u638c\u63e1\uff0c\u4f46\u662f\uff0c\u5c31\u662f\u56e0\u4e3a\u592a\u8be6\u7ec6\u4e86\uff0c\u6709\u4e9b\u4e1c\u897f\u5bf9\u4e8e99.9%\u7684\u4f7f\u7528\u8005\u6765\u8bf4\uff0c\u5176\u5b9e\u6ca1\u5fc5\u8981\u638c\u63e1\u3002\u7ecf\u8fc7\u957f\u671f\u6478\u7d22\uff0c\u6211\u5c06\u6211\u4eec\u7ecf\u5e38\u4f7f\u7528\u5230\u7684\u3001\u6838\u5fc3\u7684\u5185\u5bb9\u603b\u7ed3\u6210\u8fd9\u7bc7\u6559\u7a0b\uff0c\u5e0c\u671b\u80fd\u4ee5\u4e00\u79cd\u8f7b\u677e\u3001\u7b80\u5355\u3001\u4ee4\u4eba\u6109\u60a6\u7684\u65b9\u5f0f\uff0c\u5c06\u8fd9\u4e9b\u5185\u5bb9\u8bb2\u6e05\u695a\u3002</p> <p>\u4e5f\u5e0c\u671b\u901a\u8fc7\u8bb2\u89e3\u5404\u4e2a\u6a21\u5757\u7684\u77e5\u8bc6\uff0c\u6f5c\u79fb\u9ed8\u5316\u7684\u8ba9\u4f60\u7406\u89e3 Pytest \u7684 Plugin \u8bbe\u8ba1\u54f2\u5b66\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<pre><code>pip3 install pytest\n</code></pre> <p>\u53ea\u9700\u8981\u8fd9\u6837\u5b89\u88c5\u4e00\u4e0b\u5c31\u884c\u4e86\uff0c\u591f\u7b80\u5355\u6613\u7528\u5427\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_3","title":"\u4e09\u3001\u7528\u4f8b\u7f16\u5199","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1","title":"1\u3001\u51fd\u6570\u5f0f","text":"<pre><code>def test_001():\n...\ndef test_002():\n...\n</code></pre> <p>\u8fd9\u79cd\u662f\u51fd\u6570\u5f0f\u7684\u7528\u4f8b\u5199\u6cd5\uff0c\u5c31\u662f\u76f4\u63a5\u5728 py \u6587\u4ef6\u91cc\u9762\u5b9a\u4e49\u51fd\u6570\uff0c\u51fd\u6570\u91cc\u9762\u5199\u6d4b\u8bd5\u7528\u4f8b\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2","title":"2\u3001\u7c7b\u5f0f","text":"<pre><code>class TestMikigo:\ndef test_001(self):\n...\ndef test_002(self):\n...\n</code></pre> <p>\u8fd9\u79cd\u5199\u6cd5\u662f\u57fa\u4e8e\u7c7b\u7684\u7528\u4f8b\u5199\u6cd5\uff0c\u5728\u51fd\u6570\u91cc\u9762\u5199\u6d4b\u8bd5\u7528\u4f8b\u5373\u53ef\u3002</p> <p>\u4e24\u79cd\u5199\u6cd5\u90fd\u662f\u53ef\u4ee5\u7684\uff0c\u5728\u6267\u884c\u7684\u65f6\u5019\u90fd\u80fd\u88ab pytest \u8bc6\u522b\u4e3a\u7528\u4f8b\u3002</p> <p>\u4ece\u5de5\u7a0b\u7684\u89d2\u5ea6\uff0c\u6211\u66f4\u63a8\u8350\u4f7f\u7528\u57fa\u4e8e\u7c7b\u7684\u7528\u4f8b\u5199\u6cd5\uff0c\u56e0\u4e3a\u51fd\u6570\u5f0f\u7684\u5199\u6cd5\u4e0d\u80fd\u4f7f\u7528\u7c7b\u7ea7\u522b\u7684 fixture\uff0c\u56e0\u4e3a\u5b83\u6ca1\u6709\u7c7b\u3002\u57fa\u4e8e\u7c7b\u7684\u7528\u4f8b\u5199\u6cd5\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u66f4\u52a0\u7075\u6d3b\u7684 fixture \u7684\u5904\u7406\uff0c\u8ba9\u4f60\u5728\u5e94\u5bf9\u590d\u6742\u6d4b\u8bd5\u573a\u666f\u7684\u65f6\u5019\uff0c\u6e38\u5203\u6709\u4f59\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#fixture","title":"\u56db\u3001fixture","text":"<p>fixture \u7ffb\u8bd1\u8fc7\u6765\u662f \u201c\u5939\u5177\u201d\uff0c\u7b80\u5355\u8bb2\u5c31\u662f\u7528\u4f8b\u6267\u884c\u524d\u540e\u8981\u505a\u7684\u64cd\u4f5c\uff0c\u6211\u4eec\u79f0\u4e3a\u524d\u7f6e\uff08setup\uff09\u548c\u540e\u7f6e\uff08teardown\uff09\u64cd\u4f5c\u3002\u7528\u4f8b\u5c31\u50cf\u5939\u5fc3\u997c\u5e72\u4e00\u6837\u88ab\u5939\u5728\u4e2d\u95f4\u3002</p> <p>Pytest \u7075\u6d3b\u6027\u5f88\u91cd\u8981\u7684\u4e00\u65b9\u9762\u5c31\u662f\u4f53\u73b0\u5728\u5b83\u7684 fixture\uff0c\u90a3\u662f\u76f8\u5f53\u7684\u7075\u6d3b\u3002\u4e0d\u4ec5\u652f\u6301\u591a\u4e2a\u7ea7\u522b\uff0c\u5404\u4e2a\u7ea7\u522b\u7684\u5199\u6cd5\u8fd8\u652f\u6301\u591a\u6837\uff0c\u8fd8\u53ef\u4ee5\u5171\u4eab\u3001\u9ed8\u8ba4\u8c03\u7528\u3001\u6307\u5b9a\u8c03\u7528\uff0c\u5f88\u591a\u9a9a\u64cd\u4f5c\uff0c\u73b0\u5728\u4e0d\u77e5\u9053\u6ca1\u5173\u7cfb\uff0c\u770b\u5b8c\u8fd9\u4e00\u7ae0\u5e94\u8be5\u80fd\u6709\u6240\u6536\u83b7\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1_1","title":"1\u3001\u7ea7\u522b","text":"<p>\u603b\u5171\u6709\u56db\u4e2a\u7ea7\u522b\uff1a\u51fd\u6570\u7ea7\u522b\uff08funciton\uff09\u3001\u7c7b\u7ea7\u522b\uff08class\uff09\u3001\u6a21\u5757\u7ea7\u522b\uff08module\uff09\u3001\u4f1a\u8bdd\u7ea7\u522b\uff08session\uff09</p> <p>\u8fd9\u90e8\u5206\u53ea\u9700\u8981\u7406\u89e3\u6982\u5ff5\uff0c\u4e0d\u9700\u8981\u7ea0\u7ed3\u4e0e\u5177\u4f53\u7684\u5199\u6cd5\u3002</p> <ul> <li>\u51fd\u6570\u7ea7\u522b\uff08funciton\uff09</li> </ul> <p>\u51fd\u6570\u5c31\u662f\u7528\u4f8b\uff0c\u51fd\u6570\u7ea7\u522b\u7684fixture\u5c31\u662f\u5728\u6bcf\u4e2a\u7528\u4f8b\u6267\u884c\u524d\u540e\u7684\u64cd\u4f5c\uff0c\u5373\uff1a <code>function_setup</code> <code>test_case</code> <code>function_teardown</code> \u3002</p> <ul> <li>\u7c7b\u7ea7\u522b\uff08class\uff09</li> </ul> <p>\u7c7b\u7ea7\u522b\u5c31\u662f\u5728\u6bcf\u4e2a\u7528\u4f8b\u7c7b\u6267\u884c\u524d\u540e\u8981\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u6ce8\u610f\uff0c\u4e00\u4e2a\u7c7b\u53ea\u6267\u884c\u4e00\u6b21\u54e6\u3002</p> <ul> <li> <p>\u5982\u679c\u4e00\u4e2a\u7c7b\u91cc\u9762\u53ea\u6709\u4e00\u4e2a\u51fd\u6570\uff0c\u7c7b\u7ea7\u522b\u76f8\u5bf9\u4e8e\u51fd\u6570\u7ea7\u522b\uff0c\u5c31\u662f\u5728\u51fd\u6570\u7ea7\u522b\u524d\u540e\u6267\u884c\uff0c\u5373\uff1a<code>class_setup</code> <code>function_setup</code> <code>test_case</code> <code>function_teardown</code> <code>class_teardown</code> \u3002</p> <p>\u4f60\u770b\u5176\u5b9e\u5c31\u662f\u5728\u524d\u9762\u51fd\u6570\u7ea7\u522b\u7684\u57fa\u7840\u4e4b\u4e0a\u5916\u9762\u52a0\u4e86\u4e00\u5c42\uff0c\u5f88\u597d\u7406\u89e3\u662f\u5427\u3002</p> </li> <li> <p>\u5982\u679c\u4e00\u7c7b\u91cc\u9762\u6709\u591a\u4e2a\u51fd\u6570\uff0c\u6267\u884c\u7684\u987a\u5e8f\u662f\uff1a<code>class_setup</code> <code>function_setup</code> <code>test_case_001</code> <code>function_teardown</code> <code>function_setup</code> <code>test_case_001</code> <code>function_teardown</code> <code>class_teardown</code> \u3002</p> <p>\u4f60\u6ce8\u610f\u770b\u533a\u522b\uff0c\u4e2d\u95f4\u6709\u591a\u4e2a\u7528\u4f8b\u51fd\u6570\uff0c\u6bcf\u4e2a\u51fd\u6570\u5916\u90fd\u5939\u4e86\u4e00\u4e2a\u51fd\u6570\u7ea7\u522b\u7684fixture\uff0c\u7136\u540e\u7c7b\u7ea7\u522bfixture\u662f\u653e\u5728\u6700\u5916\u5c42\u7684\u3002</p> </li> <li> <p>\u6a21\u5757\u7ea7\u522b\uff08module\uff09</p> </li> </ul> <p>\u7406\u89e3\u4e86\u524d\u9762\u7c7b\u7ea7\u522b\u7684fixture\u4e4b\u540e\uff0c\u76f8\u4fe1\u4f60\u5df2\u7ecf\u80fd\u63a8\u7406\u51fa\u6765\u4e86\uff0c\u6a21\u5757\u5176\u5b9e\u53ef\u4ee5\u7406\u89e3\u6210\u4e00\u4e2a py \u6587\u4ef6\uff0c\u5728\u4e00\u4e2a py \u6587\u4ef6\u91cc\u9762\u53ef\u4ee5\u5199\u591a\u4e2a\u7c7b\uff0c\u6bcf\u4e2a\u7c7b\u91cc\u9762\u53ef\u4ee5\u5199\u591a\u4e2a\u51fd\u6570\u3002\u4e00\u5c42\u5939\u4e00\u5c42\u7684\u3002</p> <ul> <li>\u4f1a\u8bdd\u7ea7\u522b\uff08session\uff09</li> </ul> <p>\u8fd9\u4e2a\u76f8\u5bf9\u6765\u8bb2\u6709\u70b9\u62bd\u8c61\uff0c\u5176\u5b9e\u5c31\u662f\u4f60\u6267\u884c\u4e00\u6b21\u7528\u4f8b\u5c31\u662f\u4e00\u6b21\u4f1a\u8bdd\uff0c\u5f53\u7136\u4e00\u6b21\u4f1a\u8bdd\u91cc\u9762\u53ef\u80fd\u53ea\u6709\u4e00\u4e2a\u7528\u4f8b\uff0c\u4e5f\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u7528\u4f8b\u6a21\u5757\u3001\u591a\u4e2a\u7528\u4f8b\u7c7b\u3001\u591a\u4e2a\u7528\u4f8b\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2_1","title":"2\u3001\u4e0d\u540c\u7684\u5199\u6cd5","text":"<p>\u8fd9\u91cc\u9a9a\u64cd\u4f5c\u5c31\u6bd4\u8f83\u591a\u4e86\uff0c\u770b\u51c6\u4e86\u54c8\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#21xunit","title":"2.1\u3001XUnit \u7684\u5199\u6cd5","text":"<p>\u719f\u6089 <code>unittest</code> \u6846\u67b6\u7684\u4eba\u90fd\u77e5\u9053\uff0c<code>unittest</code> \u91cc\u9762 <code>fixture</code> \u7684\u5199\u6cd5\u662f <code>setUp</code> \u548c <code>tearDown</code>\uff0c<code>setUp_class</code> \u548c <code>tearDown_class</code>\uff0c\u53ea\u6709\u8fd9\u4e00\u79cd\u5199\u6cd5\uff0c\u800c\u4e14\u662f\u56fa\u5b9a\u7684\u5199\u6cd5\u54c8\u3002</p> <p><code>Pytest</code> \u662f\u517c\u5bb9 <code>unittest</code> \u7684\uff0c\u5f53\u7136\u4e5f\u652f\u6301\u8fd9\u6837\u5199\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nfrom unittest import TestCase\nclass TestMikigo(TestCase):\ndef setUp(self):\nprint(\"\u6211\u662f\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\ndef tearDown(self):\nprint(\"\u6211\u662f\u540e\u7f6e\", datetime.now())\n</code></pre> <p>\u6ce8\u610f\u662f\u7ee7\u627f\u4e86 <code>unittest.TestCase</code> \u7684\uff0c<code>Pytest</code> \u53ef\u4ee5\u517c\u5bb9\u8fd0\u884c\u7684\uff0c\u57fa\u672c\u64cd\u4f5c\u54c8\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\u8fd8\u6709\u4e00\u4e9b\u4f60\u6ca1\u89c1\u8fc7\u7684 <code>Xunit</code> \u5199\u6cd5\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nclass TestMikigo:\ndef setup(self):\nprint(\"\u6211\u662f\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\ndef teardown(self):\nprint(\"\u6211\u662f\u540e\u7f6e\", datetime.now())\n</code></pre> <pre><code>\u6211\u662f\u524d\u7f6e 2022-01-24 16:17:59.267900\n\u6211\u662f\u7528\u4f8b 2022-01-24 16:18:00.269282\n\u6211\u662f\u540e\u7f6e 2022-01-24 16:18:01.270688\n</code></pre> <p>\u4f60\u770b\uff0c<code>setup</code> \u548c <code>teardown</code> \u8fd9\u79cd\u5199\u6cd5\u4e5f\u662f\u4f1a\u88ab\u81ea\u52a8\u8bc6\u522b\u7684\u3002</p> <p>\u8fd8\u6709\u8fd9\u79cd\uff0c\u770b\u51c6\u4e86\u54c8\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nclass TestMikigo:\ndef setup_method(self):\nprint(\"\u6211\u662f\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\ndef teardown_method(self):\nprint(\"\u6211\u662f\u540e\u7f6e\", datetime.now())\n</code></pre> <pre><code>\u6211\u662f\u524d\u7f6e 2022-01-24 16:24:57.456212\n\u6211\u662f\u7528\u4f8b 2022-01-24 16:24:58.457273\n\u6211\u662f\u540e\u7f6e 2022-01-24 16:24:59.458097\n</code></pre> <p><code>setup_method</code> \u548c <code>teardown_method</code> \u4e5f\u53ef\u4ee5\u3002</p> <p>\u8fd9\u91cc\u8fd8\u8981\u8bb2\u4e00\u4e0b <code>setup_method</code> \u548c <code>setup_function</code> \u7684\u533a\u522b\uff0c<code>setup_function</code> \u662f\u5728\u57fa\u4e8e\u51fd\u6570\u7684\u7528\u4f8b\u5199\u6cd5\u65f6\u4f7f\u7528\u7684\uff0c<code>setup_method</code> \u662f\u57fa\u4e8e\u7c7b\u7684\u7528\u4f8b\u5199\u6cd5\u4f7f\u7528\u7684\uff0c\u6211\u9762\u8bd5\u522b\u4eba\u7684\u65f6\u5019\u559c\u6b22\u95ee\u8fd9\u4e24\u4e2a\u7684\u533a\u522b\uff0c\u5982\u679c\u77e5\u9053\u8fd9\u4e2a\u7684\uff0c\u57fa\u672c\u5bf9\u672c\u90e8\u5206\u5185\u5bb9\u662f\u4e86\u89e3\u7684\u3002</p> <p>\u4ee5\u4e0a\u53ea\u662f\u7528\u4f8b\u7ea7\u522b\u7684\uff0c\u4e0b\u9762\u8bf4\u4e0b\u7c7b\u7ea7\u522b\u7684\u5199\u6cd5\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nclass TestMikigo:\ndef setup_class(self):\nprint(\"\u6211\u662f\u7c7b\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef setup_method(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\ndef teardown_method(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\nsleep(1)\ndef teardown_class(self):\nprint(\"\u6211\u662f\u7c7b\u540e\u7f6e\", datetime.now())\n</code></pre> <pre><code>\u6211\u662f\u7c7b\u524d\u7f6e 2022-01-24 16:31:59.411548\n\u6211\u662f\u7528\u4f8b\u524d\u7f6e 2022-01-24 16:32:00.411892\n\u6211\u662f\u7528\u4f8b 2022-01-24 16:32:01.413373\n\u6211\u662f\u7528\u4f8b\u540e\u7f6e 2022-01-24 16:32:02.414377\n\u6211\u662f\u7c7b\u540e\u7f6e 2022-01-24 16:32:03.415521\n</code></pre> <p>\u76f4\u63a5\u5199\u6210 <code>setup_class</code> \u5c31\u53ef\u4ee5\u4e86\uff0c\u5728 <code>unitest</code> \u91cc\u9762\u7c7b\u7ea7\u522b\u7684\u662f\u9700\u8981\u52a0\u7c7b\u65b9\u6cd5\u88c5\u9970\u5668 <code>@classmethod</code> \u7684\uff0c<code>pytest</code> \u91cc\u9762\u53ef\u52a0\u53ef\u4e0d\u52a0\uff0c\u770b\u4f60\u559c\u6b22\u3002</p> <p>\u6a21\u5757\u7ea7\u522b\u7684\u5c31\u7528 <code>setup_module</code>\uff0c\u4f1a\u8bdd\u7ea7\u522b\u7684\u5c31\u7528 <code>setup_session</code>\uff0c\u8fd9\u90fd\u597d\u7406\u89e3\uff0c\u8fd9\u91cc\u5c31\u4e0d\u4e3e\u4f8b\u4e86\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#22fixture","title":"2.2\u3001fixture \u5199\u6cd5","text":"<p>\u524d\u9762 <code>Xunit</code> \u7684\u5199\u6cd5\u5df2\u7ecf\u5f88\u7075\u6d3b\u4e86\uff0c\u4f46\u662f <code>Pytest</code> \u771f\u6b63\u5389\u5bb3\u7684\u662f\u5b83\u81ea\u5df1\u7279\u6709\u7684 fixture \u5199\u6cd5\u3002</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\nclass TestMikigo:\n@pytest.fixture(scope=\"function\")\ndef do_something_before(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\ndef test_001(self, do_something_before):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\n</code></pre> <p>\u8fd9\u91cc\u6709\u51e0\u70b9\u8981\u6ce8\u610f\uff1a</p> <ul> <li> <p>fixture \u5fc5\u987b\u8981\u52a0<code>@pytest.fixture()</code> \u88c5\u9970\u5668\uff1b</p> </li> <li> <p>scope \u4e3a fixture \u7ea7\u522b\uff1b</p> </li> <li> <p>fixture \u7684\u51fd\u6570\u540d <code>do_something_before</code> \u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u4f46\u662f\u4e0d\u8981\u548c <code>Xunit</code> \u7684\u51fd\u6570\u540d\u4e00\u6837\uff0c\u4e0d\u7136\u5c31\u4e71\u6389\u4e86\u3002</p> </li> <li> <p>yield \u4e4b\u524d\u662f\u524d\u7f6e\uff0cyield \u4e4b\u540e\u662f\u540e\u7f6e\uff0c\u8fd9\u91cc\u5b9e\u9645\u4e0a\u662f\u5229\u7528\u4e86\u751f\u6210\u5668\u7684\u539f\u7406\uff1b</p> </li> <li> <p>\u51fd\u6570\u540d do_something_before \u9700\u8981\u663e\u5f0f\u7684\u4f20\u5165\u7528\u4f8b\u53c2\u6570\uff1a</p> </li> </ul> <pre><code>def test_001(self, do_something_before):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\n</code></pre> <p>\u6216\u8005\u4f7f\u7528 <code>@pytest.mark.usefixtures()</code> \uff0c\u5c31\u50cf\u8fd9\u6837\uff1a</p> <pre><code>@pytest.mark.usefixtures(\"do_something_before\")  # \u4e5f\u53ef\u4ee5\u653e\u5230\u7c7b\u540d\u524d\u9762\uff0c\u8868\u793a\u5bf9\u8fd9\u4e2a\u7c7b\u91cc\u9762\u6240\u6709\u7684\u7528\u4f8b\u90fd\u751f\u6548\u3002\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b\", datetime.now())\nsleep(1)\n</code></pre> <p>\u4e0d\u8fc7\u8fd9\u79cd\u5199\u6cd5\u6211\u4e2a\u4eba\u4e0d\u5efa\u8bae\u54c8\uff0c\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u5c5e\u4e8e\u786c\u7f16\u7801\uff0c\u4e0d\u597d\u7ef4\u62a4\u3002</p> <p>\u8fd9\u91cc\u8981\u597d\u597d\u7406\u89e3\u4e00\u4e0b\u54c8\uff0c\u77ed\u77ed\u7684\u51e0\u53e5\u8bdd\uff0c\u5176\u5b9e\u5305\u542b\u4e86\u5f88\u591a\u5185\u5bb9\u54e6\u3002\u8fd9\u79cd\u5199\u6cd5\u6ca1\u6709\u4e00\u4e2a\u4e25\u683c\u7684\u5b9a\u5f0f\uff0c\u66f4\u591a\u662f\u4e00\u79cd\u6a21\u5f0f\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#3","title":"3\u3001\u5171\u4eab","text":"<p>fixture \u5171\u4eab\u662f Pytest \u7684\u4e00\u5927\u7279\u70b9\uff0c\u4e5f\u662f\u5b83\u7075\u6d3b\u6027\u7684\u91cd\u8981\u4f53\u73b0\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#31","title":"3.1\u3001\u7528\u4f8b\u4e4b\u95f4\u5171\u4eab","text":"<p>\u6211\u4eec\u7ecf\u5e38\u9047\u5230\u591a\u4e2a\u7528\u4f8b\u9700\u8981\u7528\u5230\u540c\u4e00\u4e2a fixture \uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\nclass TestMikigo:\n@pytest.fixture(scope=\"function\")\ndef do_something_before(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\ndef test_001(self, do_something_before):\nprint(\"\u6211\u662f\u7528\u4f8b001\", datetime.now())\nsleep(1)\ndef test_002(self, do_something_before):\nprint(\"\u6211\u662f\u7528\u4f8b002\", datetime.now())\nsleep(1)\n</code></pre> <pre><code>\u6211\u662f\u7528\u4f8b\u524d\u7f6e 2022-01-24 18:36:52.039974\n\u6211\u662f\u7528\u4f8b001 2022-01-24 18:36:53.041396\n\u6211\u662f\u7528\u4f8b\u540e\u7f6e 2022-01-24 18:36:54.042808\n\u6211\u662f\u7528\u4f8b\u524d\u7f6e 2022-01-24 18:36:54.043354\n\u6211\u662f\u7528\u4f8b002 2022-01-24 18:36:55.044742\n\u6211\u662f\u7528\u4f8b\u540e\u7f6e 2022-01-24 18:36:56.046134\n</code></pre> <p>\u4f60\u770b\uff0c\u6211\u4eec\u53ea\u5b9a\u4e49\u4e86\u4e00\u4e2a fixture\uff0c\u7136\u540e\u5c06\u5b83\u7684\u51fd\u6570\u540d do_something_before \u5206\u522b\u90fd\u4f20\u7ed9\u4e86\u4e24\u4e2a\u7528\u4f8b\uff0c\u8fd9\u6837\u5b83\u5c31\u5bf9\u4e24\u4e2a\u7528\u4f8b\u90fd\u751f\u6548\u4e86\u3002</p> <p>\u90a3\u6709\u540c\u5b66\u8981\u95ee\u4e86\uff0c\u6211\u5982\u679c\u6709\u5f88\u591a\u7684\u7528\u4f8b\uff0c\u6bcf\u4e2a\u7528\u4f8b\u90fd\u8981\u4f20\u5165\u53c2\u6570\uff0c\u597d\u9ebb\u70e6\u561e\uff0c\u6709\u6ca1\u6709\u66f4\u5999\u7684\u5199\u6cd5\uff1f</p> <p>\u5f53\u7136\u6709\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\nclass TestMikigo:\n@pytest.fixture(scope=\"function\",autouse=True)\ndef do_something_before(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\ndef test_001(self):\nprint(\"\u6211\u662f\u7528\u4f8b001\", datetime.now())\nsleep(1)\ndef test_002(self):\nprint(\"\u6211\u662f\u7528\u4f8b002\", datetime.now())\nsleep(1)\n</code></pre> <p><code>@pytest.fixture</code> \u91cc\u9762\u6709\u4e2a\u53c2\u6570 <code>autouse</code> \uff0c\u5c31\u662f\u81ea\u52a8\u4f7f\u7528\uff0c\u9ed8\u8ba4\u662f <code>False</code>\uff0c\u6211\u4eec\u4f20 <code>True</code> \u5c31\u8868\u793a\u5bf9\u5f53\u524d\u4f5c\u7528\u57df\u4e0b\u7684\u6240\u6709\u7528\u4f8b\u90fd\u751f\u6548\u3002\u8fd9\u4e2a \u201c\u4f5c\u7528\u57df\u201d \u8981\u770b\u8fd9\u4e2a fixture \u505a\u5904\u7684\u4f4d\u7f6e\uff0c\u6bd4\u5982\u4f8b\u5b50\u4e2d\uff0cfixture \u662f\u5728\u7c7b\u91cc\u9762\uff0c\u5b83\u5c31\u5bf9\u8fd9\u4e2a\u7c7b\u4e2d\u7684\u6240\u6709\u7528\u4f8b\u90fd\u751f\u6548\uff0c\u5982\u679c\u4f60\u628a\u5b83\u653e\u5230\u6a21\u5757\u91cc\u9762\uff0c\u5b83\u5bf9\u8fd9\u4e2a\u6a21\u5757\u91cc\u7684\u6240\u6709\u7528\u4f8b\u90fd\u751f\u6548\u3002</p> <p><code>autouse</code> \u4e00\u5b9a\u8981\u614e\u7528\uff0c\u5904\u7406\u4e0d\u597d\u7684\u8bdd\u4f1a\u5f15\u8d77\u6267\u884c\u903b\u8f91\u7684\u6df7\u4e71\uff0c\u5c31\u662f\u4f60\u4f1a\u53d1\u73b0\u6709\u4e9b\u7528\u4f8b\u83ab\u540d\u5947\u5999\uff0c\u4e0d\u77e5\u9053\u5728\u6267\u884c\u4ec0\u4e48\uff0c\u53ef\u80fd\u5c31\u662f\u6709\u5176\u4ed6\u6ca1\u6ce8\u610f\u5230\u7684 fixture \u751f\u6548\u4e86\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#32","title":"3.2\u3001\u7528\u4f8b\u7c7b\u4e4b\u95f4\u5171\u4eab","text":"<p>\u524d\u9762\u7684\u4f8b\u5b50\u90fd\u662f\u5c06 fixture \u653e\u5728\u7c7b\u91cc\u9762\uff0c\u8fd9\u6837\u53ea\u80fd\u5bf9\u8fd9\u4e00\u4e2a\u7c7b\u91cc\u9762\u7684\u7528\u4f8b\u751f\u6548\uff0c\u8981\u5b9e\u73b0\u7528\u4f8b\u7c7b\u4e4b\u95f4\u5171\u4eab\uff0c\u5c31\u4e0d\u80fd\u5199\u5728\u67d0\u4e00\u4e2a\u7c7b\u7684\u91cc\u9762\u4e86\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_before():\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\nclass TestMikigo001:\ndef test_TestMikigo001_001(self):\nprint(\"\u6211\u662f\u7528\u4f8bTestMikigo002001\", datetime.now())\nsleep(1)\nclass TestMikigo002:\ndef test_TestMikigo001_001(self):\nprint(\"\u6211\u662fTestMikigo002\u7528\u4f8b001\", datetime.now())\nsleep(1)\n</code></pre> <p>\u6211\u4eec\u5c06 fixture \u5199\u5728module \u91cc\u9762\uff0c\u8fd9\u6837\u5c31\u5bf9\u6587\u4ef6\u91cc\u9762\u7684\u6240\u6709\u7528\u4f8b\u90fd\u751f\u6548\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#33","title":"3.3\u3001\u8d85\u7ea7\u5171\u4eab","text":"<p>conftest.py \u76f8\u5f53\u4e8e\u662f Pytest \u7684\u4e00\u4e2a\u672c\u5730\u63d2\u4ef6\u5e93\uff0c\u4f60\u53ef\u4ee5\u5728\u7528\u4f8b\u7684\u76ee\u5f55\u7ed3\u6784\u4e2d\u4efb\u610f\u4f4d\u7f6e\u65b0\u5efa\u4e00\u4e2a conftest.py \u6587\u4ef6\uff0c\u7136\u540e\u5728\u91cc\u9762\u5199\u5165 fixture\uff0c\u8fd9\u4e9b fixture \u53ef\u4ee5\u5bf9\u8fd9\u4e2a conftest.py \u6587\u4ef6\u5bf9\u5f53\u524d\u76ee\u5f55\u53ca\u5b50\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u7528\u4f8b\u751f\u6548\uff0c\u6240\u4ee5\u6211\u79f0\u4e4b\u4e3a\u201c\u8d85\u7ea7\u5171\u4eab\u201d\uff0c\u800c\u4e14\u5404\u4e2a\u76ee\u5f55\u90fd\u53ef\u4ee5\u6709\u81ea\u5df1\u7684 conftest.py\u3002</p> <p>\u201c\u8d85\u7ea7\u5171\u4eab\u201d \u4e0d\u662f\u5b98\u65b9\u672f\u8bed\uff0c\u662f\u6211\u81ea\u521b\u7684\u54c8\u3002</p> <p>\u54b1\u4eec\u6765\u65b0\u5efa\u4e00\u4e2a conftest.py \u6587\u4ef6\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 conftest.py\n\u2514\u2500\u2500 test_case_001.py\n</code></pre> <p>\u5728 conftest.py \u6587\u4ef6\u4e2d\u5199\u4e00\u4e2a fixture\uff1a</p> <pre><code>import pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something():\nprint(\"\u6211\u662f\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u540e\u7f6e\", datetime.now())\n</code></pre> <p>\u7528\u4f8b\uff1a</p> <pre><code>class TestMikigo:\ndef test_case_001(self):\nprint(\"test case 001\")\n</code></pre> <p>\u5728\u6839\u76ee\u5f55\u4f7f\u7528 <code>pytest -s -v</code> \u6267\u884c\u4e00\u4e0b\uff1a</p> <pre><code>\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 16:20:39.605921\ntest case 001\n\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 16:20:40.606656\n</code></pre> <p>\u8fd9\u6837\u5f53\u524d\u76ee\u5f55\u4e0b\u54ea\u6015\u6709\u591a\u4e2a\u7528\u4f8b\u6587\u4ef6\uff0c\u91cc\u9762\u6709\u6210\u5343\u4e0a\u4e07\u6761\u7528\u4f8b\uff0c\u6267\u884c\u65f6\u90fd\u4f1a\u52a0\u8f7d\u8fd9\u6761fixture\uff0c\u4f60\u8bf4\u662f\u4e0d\u662f\u8d85\u7ea7\u5171\u4eab\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#4","title":"4\u3001\u987a\u5e8f","text":"<p>\u524d\u9762\u8bb2\u201c\u8d85\u7ea7\u5171\u4eab\u201d\u63d0\u5230\uff0c\u6211\u4eec\u53ef\u4ee5\u628a fixture \u5199\u5728 conftest.py \u6587\u4ef6\u91cc\u9762\uff0cconftest.py \u6587\u4ef6\u5bf9\u5f53\u524d\u76ee\u5f55\u53ca\u5b50\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u7528\u4f8b\u751f\u6548\uff0c\u800c\u5404\u4e2a\u76ee\u5f55\u90fd\u53ef\u4ee5\u6709\u81ea\u5df1\u7684 conftest.py\uff0c\u7528\u4f8b\u6587\u4ef6\u91cc\u9762\u8fd8\u53ef\u4ee5\u5199 fixture\uff0c\u90a3\u5199\u4e86\u8fd9\u4e48\u591a fixture\uff0c\u5b83\u7684\u6267\u884c\u987a\u5e8f\u662f\u600e\u6837\u7684\uff0c\u600e\u4e48\u53bb\u89e3\u9664\u4e00\u4e9b\u4f5c\u7528\uff0c\u8fd9\u4e2a\u95ee\u9898\u975e\u5e38\u91cd\u8981\uff0c\u7406\u4e0d\u6e05\u695a\u7684\u8bdd\uff0c\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u4f60\u4f1a\u53d1\u73b0\u8fd9\u6761\u7528\u4f8b\u90fd\u5728\u5e72\u561b\uff0c\u5b83\u4e3a\u4ec0\u4e48\u6267\u884c\u8fd9\u4e2a\u3002</p> <p>\u8ddf\u4e0a\u601d\u8def\u54c8\u3002</p> <p>\u9996\u5148\uff0c\u4ece\u5c42\u7ea7\u4e0a\u6765\u8bb2\u4ecd\u7136\u662f\uff1a\u4f1a\u8bdd\u7ea7\u522b\uff08session\uff09\u2014&gt; \u6a21\u5757\u7ea7\u522b\uff08module\uff09\u2014&gt; \u7c7b\u7ea7\u522b\uff08class\uff09\u2014&gt; \u51fd\u6570\u7ea7\u522b\uff08funciton\uff09\u8fd9\u6837\u7684\u6267\u884c\u987a\u5e8f\u3002</p> <p>\u7136\u540e\uff0c\u76f8\u540c\u5c42\u7ea7\u7684\u60c5\u51b5\u4e0b\uff0c\u8981\u770b fixture \u7684\u4f4d\u7f6e\uff0c\u7b80\u5355\u8bb2\u5c31\u662f\uff1a\u5916\u5c42 fixture \u5148\u6267\u884c\u3002</p> <p>\u6211\u4eec\u4ee5 function \u7ea7\u522b\u7684 fixture \u4e3e\u4f8b\uff0c\u6784\u9020\u4e00\u4e2a\u591a\u5c42\u7ea7\u7684 fixture\uff0c\u5efa\u8bae\u4f60\u5728\u672c\u5730\u6309\u7167\u4e0b\u9762\u7684\u63cf\u8ff0\u81ea\u5df1\u5efa\u4e00\u4e2ademo\uff0c\u4e0d\u7136\u53ef\u80fd\u9700\u8981\u4f60\u6709\u6bd4\u8f83\u5f3a\u7684\u7ed3\u6784\u5316\u601d\u7ef4\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 cases_1\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cases_1_1\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 conftest.py   # cases_1_1 \u76ee\u5f55\u4e0b conftest\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test_cases_1_1.py  # \u7528\u4f8b\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 conftest.py  # cases_1 \u76ee\u5f55\u4e0b conftest\n\u2514\u2500\u2500 conftest.py  # \u6700\u5916\u5c42 conftest\n</code></pre> <p>\u6700\u5916\u5c42 conftest\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something():\nprint(\"\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u540e\u7f6e\", datetime.now())\n</code></pre> <p>cases_1 \u76ee\u5f55\u4e0b conftest\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_1():\nprint(\"\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u540e\u7f6e\", datetime.now())\n</code></pre> <p>cases_1_1 \u76ee\u5f55\u4e0b conftest\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_1_1():\nprint(\"\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u540e\u7f6e\", datetime.now())\n</code></pre> <p>\u7528\u4f8b\u91cc\u9762\uff1a</p> <pre><code>from datetime import datetime\nfrom time import sleep\nimport pytest\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_out():\nprint(\"\u6211\u662f\u7528\u4f8b\u7c7b\u5916\u9762\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u5916\u9762\u540e\u7f6e\", datetime.now())\nclass TestMikigo:\n@pytest.fixture(scope=\"function\", autouse=True)\ndef do_something_in(self):\nprint(\"\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u524d\u7f6e\", datetime.now())\nsleep(1)\nyield\nprint(\"\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u540e\u7f6e\", datetime.now())\ndef test_cases_1_1(self):\nprint(\"\u6211\u662f\u6d4b\u8bd5\u7528\u4f8b 1_1\")\n</code></pre> <p>\u8fd9\u6837\u6211\u4eec\u5c31\u5728\u4e0d\u540c\u5c42\u7ea7\u5199\u4e86\u4e00\u4e9b function \u7ea7\u522b\u7684 fixture\uff0c\u6267\u884c\u4e00\u4e0b\u5c31\u53ef\u4ee5\u6e05\u695a\u7684\u770b\u5230\u3002</p> <pre><code>\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:38:52.924602\n\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:38:53.925916\n\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:38:54.927332\n\u6211\u662f\u7528\u4f8b\u7c7b\u5916\u9762\u524d\u7f6e 2022-02-08 15:38:55.928774\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u524d\u7f6e 2022-02-08 15:38:56.930258\n\u6211\u662f\u6d4b\u8bd5\u7528\u4f8b 1_1\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u540e\u7f6e 2022-02-08 15:38:57.933010\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u5916\u9762\u540e\u7f6e 2022-02-08 15:38:57.933135\n\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:38:57.933211\n\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:38:57.933277\n\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:38:57.933338\n</code></pre> <p>\u4ece\u4e0a\u5230\u4e0b\uff0c\u4f60\u4ed4\u7ec6\u770b\u4e4b\u540e\uff0c\u7ed3\u8bba\u547c\u4e4b\u6b32\u51fa\uff1a\u5916\u5c42\u5148\u6267\u884c\u3002</p> <p>\u5916\u5c42 conftest \u5148\u4e8e\u5185\u5c42 conftest\uff0c\u5185\u5c42 conftest \u5148\u4e8e\u7c7b\u5916\u9762\u7684\uff0c\u7c7b\u5916\u9762\u7684\u5148\u4e8e\u7c7b\u91cc\u9762\u7684\u3002</p> <p>\u6240\u4ee5\u6211\u4eec\u5728\u5199fixture\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u7279\u522b\u6ce8\u610f\uff0cPytest \u7ed9\u6211\u4eec\u63d0\u4f9b\u7684\u5f88\u7075\u6d3b\u5f88\u65b9\u4fbf\u7684fixture\u7684\u5404\u79cd\u5199\u6cd5\uff0c\u7279\u522b\u662f\u52a0\u4e86 <code>autouse=True</code> \u4e4b\u540e\uff0c\u5982\u679c\u4f60\u641e\u4e0d\u6e05\u695afixture\u54ea\u4e2a\u5148\u6267\u884c\u54ea\u4e2a\u540e\u6267\u884c\uff0c\u90a3\u4f60\u6700\u597d\u5c31\u522b\u7528\u8fd9\u4e9b\u5199\u6cd5\uff0c\u8001\u8001\u5b9e\u5b9e\u7528 Xunit \u7684\u5199\u6cd5\uff0c\u5df2\u7ecf\u80fd\u6ee1\u8db3\u591a\u5927\u90e8\u5206\u9879\u76ee\u9700\u6c42\u4e86\u3002</p> <p>\u6ce8\u610f\uff0c\u4ee5\u4e0a\u6211\u4eec\u5199\u7684\u8fd9\u4e9bfixture\u7684\u51fd\u6570\u540d\u90fd\u662f\u4e0d\u540c\u7684\uff0c\u5982\u679c\u662f\u76f8\u540c\u7684\u51fd\u6570\u540d\u4f1a\u51fa\u73b0\u4ec0\u4e48\u60c5\u51b5\u5462\uff1f</p> <p>\u54b1\u4eec\u628a <code>do_something_out</code> \u6539\u6210 <code>do_something_in</code> \uff0c\u4e24\u4e2a fixture \u51fd\u6570\u540d\u90fd\u662f <code>do_something_in</code>\uff0c\u6211\u4eec\u770b\u770b\u4f1a\u53d1\u751f\u4ec0\u4e48\u3002</p> <pre><code>\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:56:03.138015\n\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:56:04.138356\n\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u524d\u7f6e 2022-02-08 15:56:05.139590\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u524d\u7f6e 2022-02-08 15:56:06.140796\n\u6211\u662f\u6d4b\u8bd5\u7528\u4f8b 1_1\n\u6211\u662f\u7528\u4f8b\u7c7b\u91cc\u9762\u540e\u7f6e 2022-02-08 15:56:07.142623\n\u6211\u662f cases_1_1 \u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:56:07.142667\n\u6211\u662f cases_1 \u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:56:07.142694\n\u6211\u662f\u6700\u5916\u5c42\u7528\u4f8b\u540e\u7f6e 2022-02-08 15:56:07.142715\n</code></pre> <p>\u4f60\u770b\uff0c\u7c7b\u5916\u9762\u7684 <code>do_something_in</code> \u6ca1\u6709\u6267\u884c\uff0c\u8bf4\u660e\u76f8\u540c\u51fd\u6570\u540d\u7684 fixture\uff0c\u53ea\u4f1a\u6267\u884c\u5185\u5c42\u7684\u3002</p> <p>\u8fd9\u70b9\u77e5\u8bc6\u4e5f\u975e\u5e38\u91cd\u8981\u54c8\uff0c\u56e0\u4e3a\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u4f1a\u9047\u5230\u6709\u4e9b\u7528\u4f8b\u6211\u4e0d\u60f3\u7528\u67d0\u4e9b\u5916\u5c42\u7684 fixture\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5728\u5185\u5c42\u5b9a\u4e49\u4e00\u4e2a\u540c\u540d\u7684 fixture\uff0c\u91cc\u9762\u5199pass\uff0c\u76f8\u5f53\u4e8e\u62b5\u6d88\u6389\u4e86\u5916\u5c42 fixture \u7684\u4f5c\u7528\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_4","title":"\u4e94\u3001\u65ad\u8a00","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1_2","title":"1\u3001\u5e38\u89c4\u65ad\u8a00","text":"<p>Pytest \u672c\u8eab\u5e76\u6ca1\u6709\u63d0\u4f9b\u65ad\u8a00\u7684\u65b9\u6cd5\uff0c\u800c\u662f\u76f4\u63a5\u4f7f\u7528Python\u81ea\u5e26\u7684 assert \u8bed\u53e5\u8fdb\u884c\u65ad\u8a00\u3002</p> <pre><code>def test_case_001():\nassert 1 == 1\n</code></pre> <p>assert \u540e\u9762\u76f4\u63a5\u5199\u8868\u8fbe\u5f0f\u5c31\u597d\u4e86\uff0cso easy!</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2_2","title":"2\u3001\u81ea\u5b9a\u4e49\u65ad\u8a00","text":"<p>\u4f7f\u7528 assert \u65ad\u8a00\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u629b\u7684\u5f02\u5e38\u65e5\u5fd7\u57fa\u672c\u6ca1\u4ec0\u4e48\u53c2\u8003\u610f\u4e49\uff0c\u56e0\u4e3a\u5728\u65ad\u8a00\u5931\u8d25\u7684\u65f6\u5019\uff0c\u53ea\u4f1a\u63d0\u793a\u4f60 assert \u540e\u9762\u7684\u8868\u8fbe\u5f0f\u4e0d\u6210\u7acb\uff0c\u8fd9\u4e0d\u662f\u5e9f\u8bdd\u5417\uff0c\u80af\u5b9a\u4e0d\u6210\u7acb\u624d\u65ad\u8a00\u5931\u8d25\u567b\uff0c\u95ee\u9898\u662f\u6211\u7684\u8868\u8fbe\u5f0f\u53ef\u80fd\u662f\u4e00\u4e9b\u6bd4\u8f83\u590d\u6742\u7684\u5c01\u88c5\uff0c\u8fd9\u91cc\u9762\u5177\u4f53\u4ec0\u4e48\u95ee\u9898\u5c31\u4e0d\u77e5\u9053\u4e86\u3002\u56e0\u6b64\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49\u65ad\u8a00\u4f1a\u6bd4\u8f83\u597d\u3002</p> <p>\u4ece\u672c\u8d28\u4e0a\u8bb2\uff0c\u65ad\u8a00\u5931\u8d25\u5b9e\u9645\u4e0a\u90fd\u662f\u6355\u83b7\u7684 <code>AssertionError\uff08\u65ad\u8a00\u5f02\u5e38\uff09</code>\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u81ea\u5b9a\u4e49\u5f02\u5e38\u7c7b\uff0c\u7136\u540e\u629b\u4e00\u4e2a <code>AssertionError</code> \u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>class AssertCommon:\n@staticmethod\ndef assert_true(expect):\n\"\"\"\u65ad\u8a00\u4e3a\u771f\"\"\"\nif not expect:\nraise AssertionError(f\"&lt;{expect}&gt;\u4e0d\u4e3a\u771f\")\n</code></pre> <p>\u901a\u8fc7\u7ed9 AssertionError \u4f20\u5165\u81ea\u5b9a\u4e49\u7684\u5b57\u7b26\u4e32\uff0c\u7528\u4f8b\u5931\u8d25\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u770b\u5230\u660e\u786e\u7684\u5931\u8d25\u4fe1\u606f\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_5","title":"\u516d\u3001\u547d\u4ee4\u884c\u53c2\u6570","text":"<p>\u4f7f\u7528 Pytest \u6267\u884c\u7528\u4f8b\u65f6\uff0c\u6211\u4eec\u7ecf\u5e38\u90fd\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u6765\u6267\u884c\u7684\uff0c\u6709\u540c\u5b66\u8981\u8bf4\u4e86\uff0c\u6211\u4e00\u822c\u662f\u901a\u8fc7\u7f16\u8f91\u5668\u91cc\u9762\u76f4\u63a5\u5c31\u6267\u884c\u4e86\uff1b\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u7f16\u5199\u7528\u4f8b\u8c03\u8bd5\u7528\u4f8b\uff0c\u4f7f\u7528\u7f16\u8f91\u5668\u6267\u884c\u7528\u4f8b\u6ca1\u95ee\u9898\uff0c\u4f46\u5728 CI \u96c6\u6210\u73af\u5883\u4e0b\uff0c\u4e00\u822c\u662f\u9700\u8981\u7528\u547d\u4ee4\u884c\u7684\u3002</p> <p>Pytest \u8981\u60f3\u73a9\u5f97\u6e9c\uff0c\u547d\u4ee4\u884c\u53c2\u6570\u5fc5\u987b\u8981\u719f\u6089\uff0cPytest \u652f\u6301\u7684\u53c2\u6570\u5f88\u591a\uff0c\u6709\u81ea\u5e26\u7684\u53c2\u6570\uff0c\u63d2\u4ef6\u63d0\u4f9b\u7684\u53c2\u6570\uff0c\u8fd8\u6709\u6211\u4eec\u81ea\u5df1\u5b9a\u4e49\u7684\u4e00\u4e9b\u53c2\u6570\uff0c\u4e0b\u9762\u5c31\u4ecb\u7ecd\u5728\u9879\u76ee\u4e2d\u5e38\u7528\u7684\u53c2\u6570\uff1a</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1-s","title":"1\u3001-s","text":"<p>\u6709\u65f6\u5019\u4f60\u53d1\u73b0\u5728\u7528\u4f8b\u91cc\u9762\u4f7f\u7528 print \u8bed\u53e5\uff0c\u4f46\u662f\u6267\u884c\u7684\u65f6\u5019\u5374\u6ca1\u6709\u6253\u5370\uff0c\u90a3\u591a\u534a\u662f\u56e0\u4e3a\u4f60\u6ca1\u6709\u52a0\u8fd9\u4e2a\u53c2\u6570\u3002\u7b49\u4ef7\u4e8e <code>--capture=no</code>\uff0c\u7528\u9014\u5c31\u662f\u6355\u83b7 print \u8f93\u51fa\u3002\u5982\u679c\u4f60\u4e0d\u77e5\u9053 <code>capture</code> \u53c2\u6570\u4e5f\u6ca1\u5173\u7cfb\uff0c\u4e0d\u91cd\u8981\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2-v","title":"2\u3001-v","text":"<p>\u8be6\u7ec6\u5c55\u793a\u7ec8\u7aef\u8f93\u51fa\u3002\u6bd4\u8be6\u7ec6\u66f4\u8be6\u7ec6\u4f7f\u7528 <code>-vv</code> \uff0c\u6211\u4eec\u5f53\u7136\u662f\u5e0c\u671b\u8f93\u51fa\u4fe1\u606f\u8d8a\u8be6\u7ec6\u8d8a\u597d\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#3-k","title":"3\u3001-k","text":"<p>\u6267\u884c\u7528\u4f8b\u7684\u65f6\u5019\u975e\u5e38\u6709\u7528\uff0c\u901a\u8fc7\u5173\u952e\u8bcd\u6765\u5339\u914d\u7528\u4f8b\uff0c\u7528\u4f8b\u7684\u5173\u952e\u8bcd\u6709\u5f88\u591a\uff0c\u6a21\u5757\u540d\u3001\u6587\u4ef6\u540d\u3001\u7c7b\u540d\u3001\u51fd\u6570\u540d\u90fd\u662f\u5173\u952e\u8bcd\uff0c\u6bd4\u5982\uff1a</p> <pre><code>pytest -k \"test_music\"\n</code></pre> <p>\u8868\u793a\u6267\u884c\u6240\u6709\u5305\u542b <code>test_music</code> \u5173\u952e\u8bcd\u7684\u7528\u4f8b\u3002</p> <p>-k \u8fd8\u6709\u4e00\u70b9\u53ef\u80fd\u597d\u591a\u540c\u5b66\u90fd\u4e0d\u77e5\u9053\uff0c\u5b83\u8fd8\u652f\u6301\u903b\u8f91\u8868\u8fbe\u5f0f\uff0c\u6bd4\u5982\uff1a</p> <pre><code>pytest -k \"test_music or test_movie\"\n</code></pre> <pre><code>pytest -k \"not test_music and not test_movie\"\"\n</code></pre> <p>\u903b\u8f91\u8868\u8fbe\u662f\u652f\u6301 <code>and/or/not</code> \u7684\u903b\u8f91\u7ec4\u5408\u3002</p> <p>\u5728\u6279\u91cf\u652f\u6301\u7528\u4f8b\u65f6\uff0c\u6211\u4eec\u901a\u5e38\u662f\u4e0d\u9700\u8981\u6267\u884c\u5168\u91cf\u7528\u4f8b\u7684\uff0c\u5b66\u4f1a\u7cbe\u51c6\u7684\u7ec4\u88c5\u7528\u4f8b\u96c6\u5bf9\u4e8e\u81ea\u52a8\u5316\u6d4b\u8bd5\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#4-m","title":"4\u3001-m","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7ed9\u7528\u4f8b\u6253\u4e0a\u6807\u7b7e\uff08mark\uff09\uff1a</p> <pre><code>import pytest\nclass TestMikigo:\n@pytest.mark.smoke\ndef test_case_001(self):\n...\n</code></pre> <p>\u4f7f\u7528\u88c5\u9970\u5668 <code>@pytest.mark</code> \u70b9\u540e\u9762\u52a0\u6807\u7b7e\u540d\uff0c\u5c31\u53ef\u4ee5\u7ed9\u7528\u4f8b\u6253\u6807\u7b7e\uff0c\u6807\u7b7e\u540d\u968f\u610f\u6307\u5b9a\uff0c\u751a\u81f3\u53ef\u4ee5\u7528\u4e2d\u6587\u3002</p> <p>\u6253\u5b8c\u6807\u7b7e\u4e4b\u540e\uff0c\u6279\u91cf\u6267\u884c\u7528\u4f8b\u65f6\u5c31\u53ef\u4ee5\u901a\u8fc7\u6807\u7b7e\u6765\u52a0\u8f7d\u7528\u4f8b\uff0c\u7528\u6cd5\u548c -k \u662f\u4e00\u6837\u7684\u3002</p> <pre><code>pytest -m \"smoke or core\"\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#5-co","title":"5\u3001--co","text":"<p>\u8fd9\u4e2a\u53c2\u6570\u5168\u79f0\u662f <code>--collect-only</code>\uff0c\u8868\u793a\u53ea\u6536\u96c6\u7528\u4f8b\uff0c\u4e0d\u6267\u884c\u3002</p> <p>\u6bcf\u5468\u6211\u9700\u8981\u7ed9\u8001\u677f\u6c47\u62a5\u76ee\u524d\u6240\u6709\u7528\u4f8b\u591a\u5c11\u6761\uff0c\u54b1\u603b\u4e0d\u53ef\u80fd\u5728\u4ee3\u7801\u91cc\u9762\u4e00\u6761\u6761\u53bb\u6570\u5427\uff0c\u6211\u901a\u5e38\u4f1a\u4f7f\u7528\uff1a</p> <pre><code>pytest --co\n</code></pre> <p>\u76f4\u63a5\u5c31\u53ef\u4ee5\u770b\u5230\u52a0\u8f7d\u4e86\u591a\u5c11\u6761\u7528\u4f8b\u3002</p> <p>\u53e6\u5916\uff0c\u6709\u65f6\u5019\u6279\u91cf\u4fee\u6539\u4e86\u4e00\u4e9b\u4ee3\u7801\uff0c\u53ef\u80fd\u5f15\u8d77\u4e00\u4e9b\u9519\u8bef\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6267\u884c <code>pytest --co</code>  \u6765\u5feb\u901f\u68c0\u6d4b\u4e00\u4e0b\u662f\u5426\u5b58\u5728\u9519\u8bef\uff0c\u56e0\u4e3a Pytest \u5728\u52a0\u8f7d\u7528\u4f8b\u7684\u65f6\u5019\u540c\u65f6\u4e5f\u4f1a\u68c0\u6d4b\u4ee3\u7801\u4e2d\u5b58\u5728\u7684\u4e00\u4e9b\u95ee\u9898\u3002\u8fd9\u4e2a\u4e5f\u975e\u5e38\u597d\u7528\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#6maxfail","title":"6\u3001maxfail","text":"<p>\u914d\u7f6e\u6700\u5927\u5931\u8d25\u6b21\u6570\uff0c\u5982\u679c\u4e00\u6b21\u6267\u884c\u51fa\u73b0\u4e86\u5927\u91cf\u7684\u5931\u8d25\uff0c\u591a\u534a\u8fd9\u6b21\u6d4b\u8bd5\u662f\u65e0\u6548\u7684\uff0c\u901a\u8fc7\u914d\u7f6e\u8fd9\u4e2a\u53c2\u6570\uff0c\u6211\u4eec\u4e0d\u7528\u7b49\u5230\u6240\u6709\u7528\u4f8b\u6267\u884c\u5b8c\u624d\u7ed3\u675f\uff0c\u5c3d\u65e9\u7ed3\u675f\u8282\u7ea6\u65f6\u95f4\u3002</p> <pre><code>pytest --maxfail=int_number\n</code></pre> <p>\u8fd9\u91cc\u7684 int_number \u5c31\u662f\u6700\u5927\u7684\u5931\u8d25\u6b21\u6570\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u7ecf\u9a8c\u6765\u6307\u5b9a\u4e00\u4e2a\u6570\u5b57\u3002</p> <p>\u6211\u7684\u65b9\u6848\u662f\u5148\u83b7\u53d6\u5230\u672c\u6b21\u8981\u6267\u884c\u7684\u603b\u7528\u4f8b\u6570 <code>collected_cases_num</code>\uff0c\u7136\u540e\u914d\u7f6e\u4e00\u4e2a\u603b\u6570\u7684\u6bd4\u4f8b\uff0c\u5982 0.5\uff0c\u8868\u793a\u53ea\u8981\u5931\u8d25\u6b21\u6570\u8fbe\u5230\u4e86\u603b\u6570\u7684\u4e00\u534a\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u7ed3\u675f\u6d4b\u8bd5\u3002</p> <pre><code>pytest --maxfail=int(collected_cases_num * 0.5)\n</code></pre> <p>\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\uff0c\u968f\u7740\u9879\u76ee\u4e2d\u7528\u4f8b\u6570\u91cf\u7684\u589e\u52a0\uff0c\u6211\u4e0d\u9700\u8981\u53bb\u4fee\u6539\u8fd9\u4e2a\u6700\u5927\u5931\u8d25\u7684\u6570\u636e\uff0c\u800c\u662f\u901a\u8fc7\u914d\u7f6e\u6574\u4f53\u7684\u5931\u8d25\u6bd4\u4f8b\uff0c\u8fd9\u6837\u505a\u66f4\u52a0\u5408\u7406\uff0c\u4e5f\u66f4\u6613\u4e8e\u7ef4\u62a4\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#7reruns","title":"7\u3001reruns","text":"<p>\u5931\u8d25\u91cd\u8dd1\u6b21\u6570\uff0c\u5728\u81ea\u52a8\u5316\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u7ecf\u5e38\u4f1a\u6709\u4e00\u4e9b\u4e0d\u786e\u5b9a\u6027\uff0c\u7f51\u7edc\u95ee\u9898\u3001\u73af\u5883\u95ee\u9898\u3001\u91cf\u5b50\u529b\u5b66\u3001\u5730\u7403\u5f15\u529b\u7b49\u7b49\u90fd\u6709\u53ef\u80fd\u9020\u6210\u7528\u4f8b\u5931\u8d25\uff0c\u7279\u522b\u662f UI \u81ea\u52a8\u5316\u6d4b\u8bd5\uff0c\u8fd9\u4e9b\u60c5\u51b5\u7ecf\u5e38\u53d1\u751f\uff0c\u4e3a\u4e86\u5c3d\u91cf\u6392\u9664\u73af\u5883\u95ee\u9898\u9020\u6210\u7684\u7528\u4f8b\u5931\u8d25\uff0c\u91c7\u7528\u5931\u8d25\u540e\u81ea\u52a8\u91cd\u8dd1\u662f\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u65b9\u6848\u3002</p> <pre><code>pytest --reruns=2\n</code></pre> <p>\u8868\u793a\u5931\u8d25\u540e\u91cd\u8dd12\u6b21\uff0c\u5982\u679c\u540e\u9762\u91cd\u8dd1\u7528\u4f8b\u6210\u529f\u4e86\uff0c\u6700\u7ec8\u7684\u7528\u4f8b\u72b6\u6001\u4e3a PASSED\u3002</p> <p>\u8fd9\u4e2a\u53c2\u6570\u9700\u8981\u5b89\u88c5\u4e09\u65b9\u63d2\u4ef6\uff1a</p> <pre><code>sudo pip3 install pytest-rerunfailures\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#8timeout","title":"8\u3001timeout","text":"<p>\u7528\u4f8b\u8d85\u65f6\u5728 CI \u6d41\u7a0b\u4e2d\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u6240\u6709\u7684\u6bcf\u65e5\u6784\u5efa\u90fd\u5e94\u8be5\u662f\u6709\u65f6\u957f\u9650\u5236\u7684\uff0c\u4e00\u8dd1\u5c31\u662f\u4e24\u4e09\u5929\u4e0d\u505c\u5c31\u4e0d\u53eb\u6bcf\u65e5\u6784\u5efa\u4e86\uff0c\u7528\u4f8b\u6267\u884c\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u5b58\u5728\u4e00\u4e9b\u5f02\u5e38\u60c5\u51b5\uff0c\u5bfc\u81f4\u7528\u4f8b\u5361\u4f4f\u4e0d\u52a8\uff0c\u6216\u8005\u6267\u884c\u901f\u5ea6\u53d8\u6162\uff0c\u6211\u4eec\u4f7f\u7528 <code>--timeout</code> \u53ef\u4ee5\u7ed9\u6bcf\u6761\u7528\u4f8b\u8bbe\u7f6e\u4e00\u4e2a\u6700\u5927\u7684\u65f6\u957f\uff0c\u5982\u679c\u8d85\u65f6\u6ca1\u6709\u6267\u884c\u5b8c\uff0c\u5c31\u662f\u5f3a\u5236\u505c\u6b62\u7528\u4f8b\u3002</p> <pre><code>pytest --timeout=200\n</code></pre> <p>\u8868\u793a\u6bcf\u6761\u7528\u4f8b\u7684\u8d85\u65f6\u65f6\u95f4\u4e3a 200 \u79d2\uff0c\u6ce8\u610f\u5355\u4f4d\u662f\u79d2\u54e6\u3002</p> <p>\u8fd9\u4e2a\u53c2\u6570\u9700\u8981\u5b89\u88c5\u4e09\u65b9\u63d2\u4ef6\uff1a</p> <pre><code>sudo pip3 install pytest-timeout\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#9","title":"9\u3001\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570","text":"<p>\u4ee5\u4e0a\u53c2\u6570\u90fd\u662f Pytest \u81ea\u5e26\u7684\u6216\u8005\u4e09\u65b9\u63d2\u4ef6\u7ed9\u6211\u4eec\u63d0\u4f9b\u7684\u53c2\u6570\uff0c\u5f53\u8fd9\u4e9b\u53c2\u6570\u4e0d\u80fd\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u7684\u65f6\u5019\u6211\u4eec\u5c31\u9700\u8981\u81ea\u5b9a\u4e49\u4e00\u4e9b\u547d\u4ee4\u884c\u53c2\u6570\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u6ce8\u518c\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u524d\u9762\u8bb2\u8d85\u7ea7\u5171\u4eab\u7684\u65f6\u5019\u8bb2\u4e86 conftest.py\uff0c\u4f46\u662f conftest.py \u80fd\u505a\u7684\u4e8b\u60c5\u53ef\u4e0d\u4ec5\u4ec5\u662f\u5199\u70b9 fixture\uff0c\u5b83\u53ef\u662f Pytest \u7684\u672c\u5730\u63d2\u4ef6\uff0c\u5728\u91cc\u9762\u6211\u4eec\u53ef\u4ee5\u5199 hook\uff08\u94a9\u5b50\uff09\u51fd\u6570\uff0c\u8fd9\u91cc\u6211\u4eec\u4ecb\u7ecd\u5176\u4e2d\u4e00\u4e2a hook \u51fd\u6570\uff0c\u5373\u5b9e\u73b0\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u7684 hook \u51fd\u6570\uff0c\u5176\u4ed6\u7684 hook \u51fd\u6570\u6211\u4eec\u540e\u9762\u4f1a\u4ecb\u7ecd\u5230\u3002</p> <p>\u5b98\u65b9\u8bf4\u6cd5\u662f\uff1a\u6ce8\u518c\u547d\u4ee4\u884c\u9009\u9879\u3002\u5b9e\u9645\u5c31\u662f\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>def pytest_addoption(parser):\nparser.addoption()\n</code></pre> <p><code>parser.addoption()</code> \u91cc\u9762\u53ef\u4ee5\u4f20\u5165\u633a\u591a\u53c2\u6570\u7684\uff0c\u4f46\u662f\u4e0d\u662f\u6240\u6709\u7684\u90fd\u9700\u8981\uff1a</p> <pre><code>1\u3001name\uff1a\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u7684\u540d\u5b57\uff0c\u53ef\u4ee5\u662f\uff1a\"foo\"\uff0c \"-foo\" \u6216 \"--foo\"\uff1b\n2\u3001action\uff1a\u5728\u547d\u4ee4\u884c\u4e2d\u9047\u5230\u6b64\u53c2\u6570\u65f6\u8981\u91c7\u53d6\u7684\u57fa\u672c\u64cd\u4f5c\u7c7b\u578b\uff1b\n3\u3001nargs\uff1a\u5e94\u8be5\u4f7f\u7528\u7684\u547d\u4ee4\u884c\u53c2\u6570\u7684\u6570\u91cf\uff1b\n4\u3001const\uff1a\u67d0\u4e9b\u64cd\u4f5c\u548cnargs\u9009\u62e9\u6240\u9700\u7684\u5e38\u91cf\u503c\uff1b\n5\u3001default\uff1a\u5982\u679c\u53c2\u6570\u4e0d\u5728\u547d\u4ee4\u884c\u4e2d\uff0c\u5219\u751f\u6210\u7684\u9ed8\u8ba4\u503c\u3002\n6\u3001type\uff1a\u547d\u4ee4\u884c\u53c2\u6570\u5e94\u8be5\u8f6c\u6362\u4e3a\u7684\u7c7b\u578b\uff1b\n7\u3001choices\uff1a\u53c2\u6570\u5141\u8bb8\u503c\u7684\u5bb9\u5668\uff1b\n8\u3001required\uff1a\u547d\u4ee4\u884c\u9009\u9879\u662f\u5426\u53ef\u4ee5\u7701\u7565\uff08\u4ec5\u53ef\u9009\uff09\uff1b\n9\u3001help\uff1a\u5bf9\u53c2\u6570\u4f5c\u7528\u7684\u7b80\u8981\u8bf4\u660e\uff1b\n10\u3001metavar\uff1a\u7528\u6cd5\u6d88\u606f\u4e2d\u53c2\u6570\u7684\u540d\u79f0\uff1b\n11\u3001dest\uff1a\u8981\u6dfb\u52a0\u5230 parse_args() \u8fd4\u56de\u7684\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u7684\u540d\u79f0\uff1b\n</code></pre> <p>\u5e38\u7528\u7684\u51e0\u4e2a\u53c2\u6570\u5c31\u8fd9\u51e0\u4e2a\uff0c\u4ee5\u4e0b\u662f\u9879\u76ee\u5b9e\u4f8b\uff1a</p> <pre><code>def pytest_addoption(parser):\nparser.addoption(\n\"--logLevel\",\naction=\"store\",\ndefault=\"DEBUG\",\nhelp=\"DEBUG, INFO\uff0cWARNING\uff0cERROR, CRITICAL, \u7ec8\u7aef\u65e5\u5fd7\u8f93\u51fa\u7ea7\u522b\",\n)\n</code></pre> <p>\u7528\u4e8e\u63a7\u5236\u65e5\u5fd7\u8f93\u51fa\u7684\u7ea7\u522b\uff0cCI \u96c6\u6210\u73af\u5883\u4e0b\u6211\u4eec\u4e0d\u9700\u8981\u8f93\u51fa DEBUG \u7ea7\u522b\u7684\u65e5\u5fd7\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u7528\uff1a</p> <pre><code>pytest --logLevel=INFO\n</code></pre> <p>\u8fd9\u6837\u5728\u6267\u884c\u7528\u4f8b\u7684\u65f6\u5019\uff0c\u53c2\u6570\u5c31\u53ef\u4ee5\u4f20\u9012\u8fdb\u6765\uff0c\u90a3\u4e48\u4f20\u9012\u8fdb\u6765\u4e4b\u540e\uff0c\u6211\u4eec\u5728\u54ea\u91cc\u7528\uff1f</p> <p>\u540c\u6837\u662f\u5728 conftest.py \u91cc\u9762\uff1a</p> <p>\uff081\uff09\u901a\u8fc7 fixture \u91cc\u9762\u7684 request \u5bf9\u8c61\uff1a</p> <pre><code>@pytest.fixture(scope=\"session\")\ndef do_something(request):\nlogLevel = request.config.getoption(\"--logLevel\")\n</code></pre> <p>\u8fd9\u6837\u53ef\u4ee5\u83b7\u53d6\u5230\uff0c<code>request.config.getoption</code> \u662f\u56fa\u5b9a\u5199\u6cd5\uff0c\u7ecf\u5e38\u6709\u540c\u5b66\u95ee\u4f60\u548b\u77e5\u9053\u53ef\u4ee5\u8fd9\u4e48\u7528\u5462\uff0c\u5728\u54ea\u91cc\u53ef\u4ee5\u770b\u5230\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u901a\u8fc7\u7ed9 <code>request</code> \u6253\u65ad\u70b9\uff0c\u4f60\u4f1a\u770b\u5230\u8fd9\u4e2a\u5bf9\u8c61\u5185\u6709\u54ea\u4e9b\u65b9\u6cd5\u3002</p> <p>\uff082\uff09\u901a\u8fc7 hook \u51fd\u6570\u91cc\u9762\u7684 seesion \u5bf9\u8c61\uff1a</p> <pre><code>def pytest_sessionstart(session):\nlogLevel = session.config.option.logLevel\n</code></pre> <p>\u8fd9\u91cc\u7684 hook \u51fd\u6570\u4e0d\u4e00\u5b9a\u662f <code>pytest_sessionstart</code>\uff0c\u597d\u591a hook \u51fd\u6570\u90fd\u53ef\u4ee5\u3002</p> <p>\uff083\uff09\u901a\u8fc7 hook \u51fd\u6570\u91cc\u9762\u7684 item \u5bf9\u8c61\uff1a</p> <pre><code>def pytest_runtest_teardown(item):\nlogLevel = item.session.config.option.logLevel\n</code></pre> <p>\uff084\uff09\u5728\u7528\u4f8b\u4e2d\u4f7f\u7528\uff1a</p> <pre><code>def test_xxx(pytestconfig):\nlog_level = pytestconfig.option.logLevel\n</code></pre> <p><code>pytestconfig</code> \u662f <code>pytest</code> \u63d0\u4f9b\u7684\u4e00\u4e2a\u5185\u5bb9 <code>fixture</code> \uff0c\u53ef\u4ee5\u83b7\u53d6\u5230\u6240\u6709\u7684\u53c2\u6570\uff1b\u83b7\u53d6\u53c2\u6570\u503c\u7684\u65b9\u6cd5\u9664\u4e86 <code>pytestconfig.option.logLevel</code> \u8fd9\u79cd\u5199\u6cd5\uff0c<code>pytestconfig.getoption(\"logLevel\")</code> \u8fd9\u79cd\u5199\u6cd5\u4e5f\u662f ok \u7684\u3002</p> <p>\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u83b7\u53d6\u547d\u4ee4\u884c\u53c2\u6570\u90fd\u5728 config \u8fd9\u4e2a\u5bf9\u8c61\u91cc\u9762\uff0c\u4ee5\u4e0a\u4e3e\u4f8b\u7684\u4e0d\u540c\u7684 hook \u51fd\u6570\u9ed8\u8ba4\u7684\u53c2\u6570\u662f\u4e0d\u540c\u7684\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_6","title":"\u4e03\u3001\u53c2\u6570\u5316","text":"<p>\u53c2\u6570\u5316\u662f\u81ea\u52a8\u5316\u6d4b\u8bd5\u91cc\u9762\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u7279\u6027\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u63a5\u53e3\u81ea\u52a8\u5316\u6d4b\u8bd5\uff0c\u90a3\u662f\u80af\u5b9a\u8981\u7528\u5230\u7684\u3002\u6211\u770b\u5230\u5f88\u591a\u7f51\u4e0a\u7684\u6559\u7a0b\u5c06\u53c2\u6570\u5316\u79f0\u4e3a\u9ad8\u7ea7\u6280\u80fd\uff0c\u901a\u8fc7\u8fd9\u70b9\u80fd\u770b\u51fa\u6765\uff0c\u9ad8\u7ea7\u4e5f\u4e0d\u548b\u7684\u54c8\u3002</p> <p>Pytest \u7684\u53c2\u6570\u5316\u4f7f\u7528\u65b9\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u4f7f\u7528\u88c5\u9970\u5668\uff1a</p> <pre><code>@pytest.mark.parametrize(\"par_1\", [1, 2])\ndef test_case_001(par_1):\n...\n</code></pre> <ul> <li> <p>\u88c5\u9970\u5668\u662f\u56fa\u5b9a\u7528\u6cd5 <code>@pytest.mark.parametrize</code>\uff0c\u8bb0\u4f4f\u5c31\u884c\u4e86\uff0c\u8bb0\u4e0d\u4f4f\u5c31\u8bb0\u4f4f\u4e24\u4e2a\u4e1c\u897f\uff0c\u9996\u5148\u662f\u5728 mark \u91cc\u9762\uff0c\u7136\u540e p \u5f00\u5934\uff0c\u6700\u540e\u7528\u7f16\u8f91\u5668\u8865\u5168\u5c31\u597d\u4e86\u3002</p> </li> <li> <p>\u53c2\u6570\u6709 3 \u4e2a\uff1a</p> </li> <li> <p>\u7b2c 1 \u4e2a\u53c2\u6570\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u91cc\u9762\u662f\u53c2\u6570\u7684\u53d8\u91cf\u540d\u79f0\uff0c\u591a\u4e2a\u53d8\u91cf\u9700\u8981\u7528\u9017\u53f7\u5206\u9694\uff1b</p> <p>\u8fd9\u4e5f\u662f\u6700\u5e38\u89c1\u7684\u7528\u6cd5\uff0c\u7f51\u4e0a\u6559\u7a0b\u57fa\u672c\u90fd\u662f\u8fd9\u6837\u8bb2\u7684\uff0c\u4f46\u5982\u679c\u4f60\u770b\u8fc7 Pytest \u6e90\u4ee3\u7801\u8fd9\u4e2a\u53c2\u6570\u7c7b\u578b\u662f\u8fd9\u6837\u5b9a\u4e49\u7684\uff1a <code>argnames: Union[str, List[str], Tuple[str, ...]]</code> \u8bf4\u660e\u5217\u8868\u548c\u5143\u7ec4\u4e5f\u53ef\u4ee5\uff0c\u53ea\u8981\u91cc\u9762\u662f\u5b57\u7b26\u4e32\u5c31\u884c\u3002</p> </li> <li> <p>\u7b2c 2 \u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u51c6\u786e\u7684\u8bb2\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u4e00\u822c\u54b1\u4eec\u5c31\u7528\u5217\u8868\u597d\u4e86\uff0c\u5982\u679c\u662f\u591a\u4e2a\u53c2\u6570\u5c31\u662f 2 \u7ef4\u5217\u8868\uff0c\u5217\u8868\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u4e2a\u6570\u5bf9\u5e94\u53d8\u91cf\u7684\u4e2a\u6570\u3002</p> <pre><code>@pytest.mark.parametrize(\"par_1, par_2\", [[1, 2], [3, 4]])\ndef test_case_001(par_1\uff0c par_2):\n...\n</code></pre> <p>\u8fd9\u4e2a\u53c2\u6570\u867d\u7136\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u4f46\u4f60\u6700\u597d\u522b\u4f7f\u7528\u968f\u673a\u5de5\u5177\u751f\u6210\uff08\u6bcf\u6b21\u90fd\u662f\u968f\u673a\u6570\uff09\uff0c\u8fd9\u53ef\u80fd\u5f71\u54cd\u91cd\u8dd1\u5931\u8d25\u7528\u4f8b\u7b49\u4e00\u4e9b\u529f\u80fd\uff0c\u4e5f\u6700\u597d\u522b\u4f7f\u7528\u751f\u6210\u5668\u653e\u91cc\u9762\u3002</p> </li> <li> <p>\u7b2c 3 \u4e2a\u53c2\u6570\u662f ids\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f\u6807\u8bb0 ID \u7684\uff0c\u4e0d\u4f20\u4e5f\u53ef\u4ee5\uff0c\u533a\u522b\u5c31\u662f\u4e0d\u4f20\u7684\u8bdd\u7ec8\u7aef\u8f93\u51fa\u7684\u7528\u4f8b\u6807\u9898\u4f1a\u81ea\u52a8\u52a0\u4e0a\u53c2\u6570\uff0c\u53ef\u80fd\u597d\u591a\u540c\u5b66\u6ca1\u7528\u8fc7\uff0c\u4e0d\u7406\u89e3\u4e5f\u6ca1\u5173\u7cfb\u54c8\uff0c\u672c\u8eab\u7528\u7684\u4e0d\u591a\u3002</p> </li> </ul> <p>\u7528\u4f8b\u7684\u53c2\u6570\u5316\u7528\u6cd5\u5c31\u662f\u8fd9\u4e48\u7b80\u5355\u3002</p> <p>Pytest \u5176\u5b9e\u8fd8\u652f\u6301 fixture \u7684\u53c2\u6570\u5316\uff0c\u8fd9\u4e5f\u662f fixture \u76f8\u5bf9\u4e8e Xunit \u5199\u6cd5\u7684\u5176\u4e2d\u4e00\u70b9\u4f18\u52bf\uff0c\u4f46\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u5f88\u5c11\u7528\uff0c\u6ca1\u6709\u592a\u591a\u8fd9\u6837\u7684\u9700\u6c42\uff0c\u8fd9\u91cc\u5c31\u4e0d\u8bb2\u4e86\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#hook","title":"\u516b\u3001Hook\uff08\u94a9\u5b50\uff09\u51fd\u6570","text":"<p>hook \u51fd\u6570\u76f8\u5f53\u4e8e\u662f Pytest \u7684\u4e00\u4e9b\u672c\u5730\u63d2\u4ef6\uff0cPytest \u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u8bb8\u591a\u7684 hook \u51fd\u6570\uff0c\u7528\u4e8e\u5904\u7406\u4e0d\u540c\u9636\u6bb5\u7684\u81ea\u5b9a\u4e49\u884c\u4e3a\u3002</p> <p>\u6709\u51e0\u4e2a\u6ce8\u610f\u70b9\uff1a</p> <ul> <li>hook \u51fd\u6570\u4e00\u822c\u4e0d\u5efa\u8bae\u5199\u5728\u975e\u6839\u76ee\u5f55\u4e0b\u7684 conftest \u63d2\u4ef6\u6587\u4ef6\u91cc\u9762\uff0c\u6211\u4eec\u4e00\u822c\u662f\u5199\u5728\u6700\u5916\u5c42\u7684\u90a3\u4e2a conftest \u91cc\u9762\u3002</li> <li>hook \u51fd\u6570\u90fd\u662f\u4ee5 <code>pytest_</code> \u5f00\u5934\u7684\u51fd\u6570\u3002</li> <li>\u4e0d\u540c\u7684 hook \u51fd\u6570\u6709\u5b83\u81ea\u5df1\u7684\u529f\u80fd\u548c\u6240\u5c5e\u7684\u9636\u6bb5\u3002</li> </ul>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1hook","title":"1\u3001hook \u51fd\u6570\u7565\u89c8","text":"<p>Pytest \u5185\u7f6e\u4e86\u8bb8\u591a\u7684 hook \u51fd\u6570\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u4e0b\u9762\u6211\u4eec\u5c31\u6309\u7167\u9636\u6bb5\u5212\u5206\uff0c\u7f57\u5217\u4e00\u4e0b\u6709\u54ea\u4e9b hook \u51fd\u6570\uff0c\u53ef\u4ee5\u5927\u81f4\u611f\u53d7\u4e00\u4e0b\uff1a</p> <p>\u5f15\u5bfc\u94a9\u5b50\uff1a</p> <pre><code>pytest_load_initial_conftests\npytest_cmdline_preparse\npytest_cmdline_parse\npytest_cmdline_main\n</code></pre> <p>\u521d\u59cb\u5316\u94a9\u5b50\uff1a</p> <pre><code>pytest_addoption\npytest_addhooks\npytest_configure\npytest_unconfigure\npytest_sessionstart\npytest_sessionfinish\npytest_plugin_registered\n</code></pre> <p>\u6536\u96c6\u94a9\u5b50\uff1a</p> <pre><code>pytest_collection\npytest_collect_directory\npytest_collect_file\npytest_pycollect_makemodule\npytest_pycollect_makeitem\npytest_generate_tests\npytest_make_parametrize_id\npytest_collection_modifyitems\npytest_collection_finish\n</code></pre> <p>\u6d4b\u8bd5\u8fd0\u884c\uff08runtest\uff09\u94a9\u5b50\uff1a</p> <pre><code>pytest_runtestloop\npytest_runtest_protocol\npytest_runtest_logstart\npytest_runtest_logfinish\npytest_runtest_setup\npytest_runtest_call\npytest_runtest_teardown\npytest_runtest_makereport\npytest_pyfunc_call\n</code></pre> <p>\u62a5\u544a\u94a9\u5b50\uff1a</p> <pre><code>pytest_collectstart\npytest_make_collect_report\npytest_itemcollected\npytest_collectreport\npytest_deselected\npytest_report_header\npytest_report_collectionfinish\npytest_report_teststatus \npytest_terminal_summary\npytest_fixture_setup\npytest_fixture_post_finalizer\npytest_warning_recordedLiteral \npytest_runtest_logreport\npytest_assertrepr_compare\npytest_assertion_pass\n</code></pre> <p>\u8c03\u8bd5\u94a9\u5b50\uff1a</p> <pre><code>pytest_internalerror\npytest_keyboard_interrupt\npytest_exception_interact\npytest_enter_pdb\n</code></pre> <p>\u8fd9\u4e9b\u94a9\u5b50\u51fd\u6570\u90fd\u662f Pytest \u7ed9\u6211\u4eec\u63d0\u4f9b\u7684\uff0c\u4f60\u53ef\u4ee5\u5728 conftest \u63d2\u4ef6\u6587\u4ef6\u91cc\u9762\u53bb\u91cd\u5199\u51fd\u6570\u6765\u5b9e\u73b0\u4f60\u7684\u81ea\u5b9a\u4e49\u529f\u80fd\u3002</p> <p>\u770b\u5230\u8fd9\u4e48\u591a\u51fd\u6570\u5148\u522b\u614c\uff0c\u54b1\u4e0d\u9700\u8981\u638c\u63e1\u6240\u6709\u7684\uff0c\u56e0\u4e3a\u5f88\u591a\u662f\u4e0d\u5e38\u7528\u7684\uff0c\u4e5f\u5c31\u662f\u6211\u5f00\u7bc7\u63d0\u5230\u7684 99% \u7684\u4eba\u90fd\u7528\u4e0d\u5230\u7684\uff0c\u5176\u4e2d\u7ecf\u5e38\u4f7f\u7528\u5230\u7684\u4e00\u4e9b\u6bd4\u8f83\u5e38\u7528\u7684 hook \u51fd\u6570\uff0c\u5c06\u4f1a\u5728\u540e\u7eed\u5185\u5bb9\u4ecb\u7ecd\u5230\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2-hook","title":"2\u3001\u5e38\u7528\u7684 hook \u51fd\u6570","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#21pytest_addoption","title":"2.1\u3001pytest_addoption","text":"<p>\u8fd9\u4e2a hook \u51fd\u6570\u5728\u524d\u9762\u5c06\u81ea\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u7684\u65f6\u5019\u5df2\u7ecf\u7528\u8fc7\u4e86\uff0c\u5b83\u7684\u7528\u9014\u5c31\u662f\u6ce8\u518c\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u8fd9\u4e9b\u503c\u5728\u6d4b\u8bd5\u8fd0\u884c\u5f00\u59cb\u65f6\u4f1a\u88ab\u8c03\u7528\u4e00\u6b21\u3002</p> <pre><code># conftest.py\ndef pytest_addoption(parser):\nparser.addoption()\n</code></pre> <p>\u524d\u9762\u6709\u4f8b\u5b50\uff0c\u8fd9\u91cc\u5c31\u4e0d\u591a\u8bb2\u4e86\uff0c\u7528\u6cd5\u5f88\u7b80\u5355\u3002</p> <p>\u5b83\u90fd\u662f\u901a\u8fc7 <code>parser.addoption</code> \u5728\u5b9a\u4e49\u547d\u4ee4\u884c\u53c2\u6570\u7684\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#22pytest_configure","title":"2.2\u3001pytest_configure","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u4e3b\u8981\u662f\u7528\u6765\u83b7\u53d6\u547d\u4ee4\u884c\u53c2\u6570\u7684\uff1a</p> <pre><code># conftest.py\ndef pytest_configure(config):\nmy_option = config.getoption(\"--opt\")\n</code></pre> <p>\u662f\u5728\u6267\u884c\u6d4b\u8bd5\u6267\u884c\u8fd0\u884c\uff0c\u7b80\u5355\u54c8\u3002</p> <p><code>pytest_unconfigure</code> \u5219\u662f\u5728\u6267\u884c\u6d4b\u8bd5\u9000\u51fa\u4e4b\u524d\u8fd0\u884c\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#23pytest_sessionstart","title":"2.3\u3001pytest_sessionstart","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u5728 session \u5bf9\u8c61\u521b\u5efa\u4e4b\u540e\uff0c\u6267\u884c\u6536\u96c6\u4e4b\u524d\u8c03\u7528\uff1a</p> <pre><code>def pytest_sessionstart(session):\n\"\"\"\n    :param pytest.Session session: The pytest session object.\n    \"\"\"\n</code></pre> <p>session \u5bf9\u8c61\u91cc\u9762\u6709\u5f88\u591a\u5c5e\u6027\uff0c\u5e38\u7528\u7684\uff1a</p> <ul> <li>startdir\uff1a\u7528\u4f8b\u6839\u76ee\u5f55\u7684\u7edd\u5bf9\u8def\u5f84\u3002</li> <li>items\uff1a\u7528\u4f8b\u5bf9\u8c61\u7684\u5217\u8868\u3002</li> <li>config\uff1aconfig\u5bf9\u8c61\u3002</li> </ul> <p>\u4f60\u4e5f\u53ef\u4ee5\u5f80\u91cc\u9762\u52a8\u6001\u6dfb\u52a0\u4e00\u4e9b\u5c5e\u6027\u3002</p> <p>\u548c\u5b83\u5bf9\u5e94\u7684 <code>pytest_sessionfinish</code> \u662f\u5728\u6240\u6709\u6d4b\u8bd5\u7ed3\u675f\uff0c\u9000\u51fa\u4e4b\u524d\u6267\u884c\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#24pytest_collection_modifyitems","title":"2.4\u3001pytest_collection_modifyitems","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u4e3b\u8981\u7528\u6765\u8c03\u6574\u7528\u4f8b\uff1a</p> <pre><code># conftest.py\ndef pytest_collection_modifyitems(session, config, items):\n\"\"\"\n    :param pytest.Session session: The pytest session object.\n    :param _pytest.config.Config config: The pytest config object.\n    :param List[pytest.Item] items: List of item objects.\n    \"\"\"\n</code></pre> <ul> <li> <p>session \u4e3a Pytest \u7684 session \u5bf9\u8c61\u3002</p> </li> <li> <p>config \u4e3a Pytest \u7684 config \u5bf9\u8c61\u3002</p> </li> <li> <p>items \u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5176\u4ed6\u6bcf\u4e2a\u5143\u7d20\u5c31\u662f\u4e00\u4e2a\u7528\u4f8b\u5bf9\u8c61\u3002</p> </li> </ul> <p>item \u91cc\u9762\u6709\u5f88\u591a\u5c5e\u6027\uff0c\u5e38\u7528\u7684\uff1a</p> <pre><code>name\uff1a\u7528\u4f8b\u7684\u540d\u79f0\nnodeid\uff1a\u4ece\u7528\u4f8b\u6839\u76ee\u5f55\u5f00\u59cb\u5230\u7528\u4f8b\u6587\u4ef6\u7684\u8def\u5f84\nown_markers\uff1a\u7528\u4f8b\u7684mark\u6807\u7b7e\n</code></pre> <p><code>pytest_collection_finish</code> \u5219\u662f\u5728\u6536\u96c6\u5b8c\u5e76\u4e14\u4fee\u6539\u5b8c\u4e4b\u540e\u8fd0\u884c\uff0c\u5b83\u662f\u5728 <code>pytest_collection_modifyitems</code> \u4e4b\u540e\u7684\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#25pytest_runtest_setup","title":"2.5\u3001pytest_runtest_setup","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u662f\u5728\u8c03\u7528 setup \u7684\u65f6\u5019\u8fd0\u884c\uff1a</p> <pre><code>def pytest_runtest_setup(item):\n...\n</code></pre> <p>\u6ce8\u610f\u662f item\uff0c\u4e0d\u662f items\uff0citem \u662f\u7528\u4f8b\u5bf9\u8c61\u3002</p> <p>\u6bd4\u5982\uff0c\u4f60\u53ef\u4ee5\u5728\u6bcf\u6b21\u7528\u4f8b\u6267\u884c\u4e4b\u524d\u8f93\u51fa\u7528\u4f8b\u7684\u6807\u9898\uff1a</p> <pre><code>def pytest_runtest_setup(item):\nlogger.info(item.function.__name__)\n</code></pre> <p><code>pytest_runtest_call</code> \u548c <code>pytest_runtest_teardown</code> \u5206\u522b\u662f\u5728\u7528\u4f8b\u6267\u884c\u8fc7\u7a0b\u4e2d\u548c\u7528\u4f8b teardown \u9636\u6bb5\u8fd0\u884c\uff0c\u7528\u6cd5\u662f\u4e00\u6837\u7684\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#26pytest_runtest_makereport","title":"2.6\u3001pytest_runtest_makereport","text":"<p>\u8fd9\u4e2a\u51fd\u6570\u662f\u7528\u4e8e\u521b\u5efa\u6d4b\u8bd5\u62a5\u544a\u7684\uff0c\u6bcf\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u7684\u6d4b\u8bd5\u62a5\u544a\u90fd\u5206\u4e3a setup\u3001call \u548c teardown \u4e09\u4e2a\u6d4b\u8bd5\u9636\u6bb5\u3002\u5982\u679c\u4f60\u719f\u6089 allure \u62a5\u544a\u7684\u8bdd\uff0c\u5e94\u8be5\u80fd\u8f7b\u6613 get \u5230\u6211\u8bf4\u7684\u3002</p> <pre><code>def pytest_runtest_makereport(item):\nout = yield\nreport = out.get_result()\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#_7","title":"\u4e5d\u3001\u6d4b\u8bd5\u62a5\u544a","text":""},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#1allure","title":"1\u3001allure","text":"<p>Pytest \u6700\u5e38\u7528\u7684\u6d4b\u8bd5\u62a5\u544a\u662f allure\uff0c\u5b83\u662f\u4e00\u4e2a\u4e09\u65b9\u63d2\u4ef6\uff0c\u5b89\u88c5\u5b83\uff1a</p> <pre><code>sudo pip3 install allure-pytest\n</code></pre> <p>\u4f7f\u7528\u4e5f\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u6267\u884c\u65f6\u52a0\u53c2\u6570 <code>--alluredir=xxx</code> \u5373\u53ef\uff1a</p> <pre><code>pytest --alluredir=report\n</code></pre> <p>\u8fd9\u6837\u5c31\u80fd\u5728 report \u76ee\u5f55\u4e0b\u751f\u6210\u62a5\u544a\uff0c\u6253\u5f00\u5b83\u4f60\u4f1a\u53d1\u73b0 report \u76ee\u5f55\u4e0b\u662f\u4e00\u5806\u6587\u672c\u6587\u4ef6\uff0c\u8fd9\u548b\u770b\u5462\uff1f</p> <p>\u8fd8\u6ca1\u5b8c~</p> <p>\u4f60\u8fd8\u9700\u8981\u5b89\u88c5 allure \u7684\u67e5\u770b\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4ece github\u4e0a\u53bb\u4e0b\u8f7d\u6700\u65b0\u7684\u7248\u672c\uff0c\u7136\u540e\u5b89\u88c5\u5b83\u5373\u53ef\uff0c\u6bd4\u5982\u6211\u73b0\u5728\u4e0b\u6765\u5b89\u88c5\u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>sudo dpkg -i allure_2.19.0-1_all.deb\n</code></pre> <p>\u67e5\u770b\u62a5\u544a\uff1a</p> <ul> <li>\u5728\u7ebf\u67e5\u770b\uff1a</li> </ul> <pre><code>allure serve report\n</code></pre> <ul> <li>\u751f\u6210\u672c\u5730 html</li> </ul> <pre><code>allure generate report -o allure-report\n</code></pre> <p>\u8fd9\u6837\u5728 <code>allure-report</code> \u76ee\u5f55\u4e0b\u4f1a\u4e00\u5806\u6587\u4ef6\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a <code>index.html</code> \u662f\u62a5\u544a\u7684\u4e3b\u6587\u4ef6\u3002</p> <p>\u4f7f\u7528\u6d4f\u89c8\u5668\u76f4\u63a5\u6253\u5f00\u5b83\uff0c\u4f60\u4f1a\u53d1\u73b0\u6ca1\u6709\u6570\u636e\uff01</p> <p>\u8fd8\u6ca1\u5b8c~~</p> <p>\u4f7f\u7528\u547d\u4ee4\u6253\u5f00\uff1a</p> <pre><code>allure open allure-report\n</code></pre> <p>\u4e0d\u51fa\u610f\u5916\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u6253\u5f00\u62a5\u544a\u3002</p> <p>\u9700\u8981\u8bf4\u660e\u7684\u662f\uff0callure \u53ef\u4e0d\u662f\u4e13\u95e8\u4e3a Pytest \u5f00\u53d1\u7684\uff0c\u7ecf\u8fc7\u5f88\u957f\u65f6\u95f4\u7684\u53d1\u5c55\uff0c\u5b83\u5df2\u7ecf\u8fdb\u5316\u4e3a\u4e00\u4e2a\u62a5\u544a\u6846\u67b6\u4e86\uff0c\u80fd\u652f\u6301\u975e\u5e38\u591a\u7684\u8bed\u8a00\u53ca\u5de5\u5177\u751f\u6210\u6d4b\u8bd5\u62a5\u544a\uff0c\u603b\u4e4b\u8fd9\u73a9\u610f\u513f\u8001\u72e0\u4e86\u3002\u60f3\u6df1\u5165\u7814\u7a76\u7684\u540c\u5b66\u770b\u8fd9\u91cc allure \u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#2pytest-html","title":"2\u3001pytest-html","text":"<p>\u4e0a\u53e4\u65f6\u671f Pytest \u7684\u201c\u7cdf\u7ce0\u4e4b\u59bb\u201d\uff0c\u5c3d\u7ba1\u8be5\u9879\u76ee\u662f\u7531 Pytest \u5b98\u65b9\u5728\u7ef4\u62a4\uff0c\u4f46\u662f\u793e\u533a\u70ed\u5ea6\u4e0d\u884c\u4e86\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u989c\u503c\u4e0d\u884c\uff0c\u5f88\u5c11\u6709\u4eba\u7528\uff0c\u4e5f\u4e0d\u60f3\u8fc7\u591a\u7684\u4ecb\u7ecd\u5b83\uff0c\u8d70\u4e2a\u8fc7\u573a\u5427\u3002</p> <p>\u5b89\u88c5\uff1a</p> <pre><code>sudo pip3 install pytest-html\n</code></pre> <p>\u4f7f\u7528\uff1a</p> <pre><code>pytest --html=report.html\n</code></pre>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#3xml","title":"3\u3001xml","text":"<p>\u8fd9\u662f\u4e2a Pytest \u81ea\u5e26\u7684\u62a5\u544a\uff0c\u4e0d\u9700\u8981\u5b89\u88c5\u63d2\u4ef6\uff1a</p> <pre><code>pytest --junit-xml=report.xml\n</code></pre> <p>\u6211\u4e2a\u4eba\u8fd8\u662f\u975e\u5e38\u559c\u6b22\u8fd9\u79cd\u62a5\u544a\u5f62\u5f0f\u7684\uff0c\u56e0\u4e3a\u5b83\u4e0d\u9700\u8981\u5b89\u88c5\u5176\u4ed6\u63d2\u4ef6\uff0c\u800c\u4e14\u5904\u7406\u62a5\u544a\u4e2d\u7684\u6570\u636e\u4e5f\u975e\u5e38\u7b80\u5355\u3002</p>"},{"location":"%E8%87%AA%E5%8A%A8%E5%8C%96/Pytest%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%B5%B7%E9%A3%9E/#pytest_1","title":"\u5341\u3001Pytest \u6846\u67b6\u6838\u5fc3","text":"<p>\u6211\u4eec\u901a\u5e38\u57fa\u4e8e Pytest \u6765\u7f16\u5199\u642d\u5efa\u6211\u4eec\u81ea\u5df1\u7684\u6d4b\u8bd5\u6846\u67b6\uff0cPytest \u81ea\u7136\u5c31\u6210\u4e86\u6211\u4eec\u81ea\u5df1\u6d4b\u8bd5\u6846\u67b6\u7684\u6838\u5fc3\uff0c\u90a3\u4e48\u540c\u5b66\u4eec\u6709\u6ca1\u6709\u60f3\u8fc7\uff0cPytest \u7684\u6838\u5fc3\u662f\u4ec0\u4e48\uff1f</p> <p>\u76f8\u4fe1 90% \u7684\u540c\u5b66\u6ca1\u53bb\u8003\u8651\u8fc7\u6216\u8005\u6ca1\u4e86\u89e3\u8fc7~</p> <p>Pluggy \u5c31\u662f Pytest \u7684\u6838\u5fc3\u6846\u67b6\uff0c\u51e0\u4e4e Pytest \u6240\u6709\u7684\u529f\u80fd\u90fd\u662f\u57fa\u4e8e Pluggy \u5b9e\u73b0\u7684\uff0c\u8fd9\u662f\u4e00\u4e2a\u88ab\u6781\u5c11\u4eba\u77e5\u9053\u4e14\u4e25\u91cd\u4f4e\u4f30\u7684\u6846\u67b6\uff0c\u5b83\u5230\u5e95\u662f\u4ec0\u4e48\u73a9\u610f\u513f\uff0c\u54b1\u4eec\u8fd9\u91cc\u7b80\u5355\u804a\u4e00\u804a\u3002</p> <p>Pluggy \u662f\u4ece Pytest \u6846\u67b6\u4e2d\u88ab\u5f00\u53d1\u8005\u62bd\u53d6\u51fa\u6765\u7684\uff0c\u56e0\u4e3a\u5f00\u53d1\u8005\u53d1\u73b0\u4ed6\u4eec\u8bbe\u8ba1\u7684\u8fd9\u79cd\u63d2\u4ef6\u5316\u65b9\u6848\uff0c\u5b8c\u5168\u53ef\u7528\u5728\u5176\u4ed6\u7684\u9879\u76ee\u4e2d\uff0c\u56e0\u6b64\u4ed6\u4eec\u603b\u7ed3\u63d0\u70bc\u51fa\u4e86 Pluggy \u9879\u76ee\uff1b</p> <p>\u4ee4\u4eba\u76f4\u547c\u201c\u539a\u793c\u8c22\u201d\u7684\u662f\u6574\u4e2a Pluggy \u9879\u76ee\u52a0\u8d77\u6765\u4e5f\u5c31 1100 \u6765\u884c\u4ee3\u7801\uff08\u5305\u542b\u6ce8\u91ca \uff09\uff0c\u8fd9\u5c31\u662f Pytest \u7684\u6838\u5fc3\u57fa\u77f3\uff0c\u5c31\u50cf\u662f Linux \u7cfb\u7edf\u4e2d\u7684 Linux \u5185\u6838\u7684\u4f5c\u7528\u3002\u7406\u89e3\u5b83\u4f60\u624d\u80fd\u771f\u6b63\u7406\u89e3 Pytest \u63d2\u4ef6\u5316\u8bbe\u8ba1\u54f2\u5b66\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8bf4\u5b83\u88ab\u4f4e\u4f30\u4e86\uff0cgithub \u4e0a\u624d\u4e0d\u5230 900 \u7684 star\uff0c\u771f\u7684\u662f\u6df1\u85cf\u529f\u4e0e\u540d\uff01</p> <p>\u54b1\u4eec\u5148\u968f\u4fbf\u5199\u4e2a\u51fd\u6570\uff1a</p> <pre><code>class Mikigo:\ndef miki(self, arg1, arg2):\n\"\"\"\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u5b9a\u5236\u7684\u94a9\u5b50\"\"\"\n</code></pre> <p>\u901a\u5e38\uff0c\u7c7b\u91cc\u9762\u7684\u51fd\u6570\u54b1\u4eec\u60f3\u8981\u91cd\u5199\uff0c\u53ea\u9700\u8981\u7ee7\u627f\u8fd9\u4e2a\u7c7b\uff0c\u7136\u540e\u91cd\u5199\u8986\u76d6\u51fd\u6570\u5c31\u597d\u4e86\uff0c\u8fd9\u5c31\u662f\u7c7b\u7684\u591a\u6001\uff0c\u4e0d\u591a\u8bb2\u4e86\uff1b</p> <p>\u90a3\u54b1\u4eec\u4f7f\u7528 Pluggy \u600e\u4e48\u53bb\u8986\u76d6\u7c7b\u91cc\u9762\u7684\u51fd\u6570\u5462\uff1f</p> <pre><code>import pluggy\n# hook \u89c4\u8303\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u4fee\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\nhookspec = pluggy.HookspecMarker(\"mikigo\") \n# hook \u5b9e\u73b0\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u4fee\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\nhookimpl = pluggy.HookimplMarker(\"mikigo\")\nclass Mikigo:\n@hookspec\ndef miki(self, arg1, arg2):\n\"\"\"\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u5b9a\u5236\u7684\u94a9\u5b50\"\"\"\nclass Plugin_1:\n@hookimpl\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_1.miki()\")\nreturn arg1 + arg2\n# \u5b9e\u4f8b\u5316\u4e00\u4e2a\u63d2\u4ef6\u7ba1\u7406\u5668\u5bf9\u8c61    \npm = pluggy.PluginManager(\"mikigo\")\n# \u5c06 Mikigo \u7c7b\u6dfb\u52a0\u8fdb\u53bb\npm.add_hookspecs(Mikigo)\n# \u6ce8\u518c\u63d2\u4ef6\u7c7b\npm.register(Plugin_1())\n# \u901a\u8fc7 hook \u5c5e\u6027\u8bbf\u95ee\u51fd\u6570\nresults = pm.hook.miki(arg1=1, arg2=2)\nprint(results)\n</code></pre> <pre><code>\u6211\u662f Plugin_1.miki()\n[3]\n</code></pre> <p>\u4f60\u770b\uff0c\u539f\u6765\u7684 <code>Mikigo</code> \u7c7b\u91cc\u9762\u7684\u51fd\u6570\u662f\u6ca1\u6709\u6267\u884c\u7684\uff0c\u800c\u662f\u6267\u884c\u4e86 <code>Plugin_1</code> \u7c7b\u91cc\u9762\u7684\u51fd\u6570\uff0c\u5e76\u4e14\u83b7\u53d6\u5230\u4e86\u8fd4\u56de\u503c\u3002</p> <ul> <li> <p><code>PluginManager</code> \u662f\u6574\u4e2a\u63d2\u4ef6\u7cfb\u7edf\u7684\u7ba1\u7406\u5668\uff0c\u4f20\u9012\u4e00\u4e2a\u5de5\u7a0b\u540d\u79f0\u5373\u53ef\u8fdb\u884c\u5b9e\u4f8b\u5316\uff1b</p> </li> <li> <p><code>add_hookspecs</code> \u6dfb\u52a0\u4e00\u4e2a\u94a9\u5b50\u5230\u7ba1\u7406\u5668\u4e2d\uff0c\u53c2\u6570\u662f module \u6216 class \u5bf9\u8c61\uff0c\u5e95\u5c42\u5b9e\u9645\u662f\u901a\u8fc7 <code>dir()</code> \u81ea\u7701\u51fd\u6570\u8fdb\u884c\u904d\u5386\u6dfb\u52a0\u5230\u4e00\u4e2a names \u7684\u5bb9\u5668\u4e2d\u3002</p> </li> <li><code>register</code>  \u6ce8\u518c\u63d2\u4ef6</li> </ul> <p>\u5982\u679c\u54b1\u4eec\u8fd8\u60f3\u589e\u52a0\u4e00\u4e2a\u63d2\u4ef6\u5462?</p> <pre><code>import pluggy\n# hook \u89c4\u8303\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u88c5\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\nhookspec = pluggy.HookspecMarker(\"mikigo\") \n# hook \u5b9e\u73b0\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u88c5\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\nhookimpl = pluggy.HookimplMarker(\"mikigo\")\nclass Mikigo:\n@hookspec\ndef miki(self, arg1, arg2):\n\"\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u5b9a\u5236\u7684\u94a9\u5b50\"\nclass Plugin_1:\n@hookimpl\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_1.miki()\")\nreturn arg1 + arg2\nclass Plugin_2:\n@hookimpl\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_2.miki()\")\nreturn arg1 - arg2\n# \u5b9e\u4f8b\u5316\u4e00\u4e2a\u63d2\u4ef6\u7ba1\u7406\u5668\u5bf9\u8c61    \npm = pluggy.PluginManager(\"mikigo\")\n# \u5c06 Mikigo \u7c7b\u6dfb\u52a0\u8fdb\u53bb\npm.add_hookspecs(Mikigo)\n# \u6ce8\u518c\u63d2\u4ef6\u7c7b\npm.register(Plugin_1())\npm.register(Plugin_2())\n# \u901a\u8fc7 hook \u5c5e\u6027\u8bbf\u95ee\u51fd\u6570\nresults = pm.hook.miki(arg1=1, arg2=2)\nprint(results)\n</code></pre> <pre><code>\u6211\u662f Plugin_2.miki()\n\u6211\u662f Plugin_1.miki()\n[-1, 3]\n</code></pre> <p><code>Plugin_2</code> \u5148\u6267\u884c\uff0c\u7136\u540e <code>Plugin_1</code> \u4e5f\u6267\u884c\u4e86\uff0c\u4e24\u4e2a\u63d2\u4ef6\u7684\u8fd4\u56de\u503c\u4e5f\u90fd\u653e\u5230\u4e00\u4e2a\u5217\u8868\u91cc\u9762\u4e86\uff0c\u662f\u4e0d\u662f\u5f88\u795e\u5947\u3002</p> <p>\u90a3\u5982\u679c\u60f3 <code>Plugin_1</code> \u5148\u6267\u884c\uff0c<code>Plugin_2</code> \u540e\u6267\u884c\u5462\uff1f</p> <pre><code>import pluggy\n# hook \u89c4\u8303\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u4fee\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\nhookspec = pluggy.HookspecMarker(\"mikigo\")\n# hook \u5b9e\u73b0\uff0c\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u4fee\u9970\u5668\u53bb\u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u94a9\u5b50\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\nhookimpl = pluggy.HookimplMarker(\"mikigo\")\nclass Mikigo:\n@hookspec\ndef miki(self, arg1, arg2):\n\"\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u5b9a\u5236\u7684\u94a9\u5b50\"\nclass Plugin_1:\n@hookimpl(tryfirst=True)\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_1.miki()\")\nreturn arg1 + arg2\nclass Plugin_2:\n@hookimpl(trylast=True)\ndef miki(self, arg1, arg2):\nprint(\"\u6211\u662f Plugin_2.miki()\")\nreturn arg1 - arg2\n# \u5b9e\u4f8b\u5316\u4e00\u4e2a\u63d2\u4ef6\u7ba1\u7406\u5668\u5bf9\u8c61\npm = pluggy.PluginManager(\"mikigo\")\n# \u5c06 Mikigo \u7c7b\u6dfb\u52a0\u8fdb\u53bb\npm.add_hookspecs(Mikigo)\n# \u6ce8\u518c\u63d2\u4ef6\u7c7b\npm.register(Plugin_1())\npm.register(Plugin_2())\n# \u901a\u8fc7 hook \u5c5e\u6027\u8bbf\u95ee\u51fd\u6570\nresults = pm.hook.miki(arg1=1, arg2=2)\nprint(results)\n</code></pre> <pre><code>\u6211\u662f Plugin_1.miki()\n\u6211\u662f Plugin_2.miki()\n[3, -1]\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7 <code>tryfirst</code> \u548c <code>trylast</code> \u6765\u63a7\u5236\uff0c\u6709\u540c\u5b66\u5e94\u8be5\u6709\u5370\u8c61\uff0c Pytest hook \u91cc\u9762\u4e5f\u662f\u7528 <code>tryfirst</code> \u548c <code>trylast</code> \u63a7\u5236\u5176 hook \u51fd\u6570\u6267\u884c\u7684\u5148\u540e\u987a\u5e8f\u7684\uff0c\u5176\u5e95\u5c42\u5b9e\u73b0\u662f\u4ece\u8fd9\u91cc\u6765\u7684\u3002</p> <p>\u6b63\u662f\u56e0\u4e3a\u53ef\u4ee5\u968f\u610f\u6dfb\u52a0\u63d2\u4ef6\u4ee5\u53ca\u4fee\u6539\u63d2\u4ef6\u7684\u6267\u884c\u987a\u5e8f\uff0c\u624d\u4f7f\u5f97\u5728 Pytest \u4e2d\u6211\u4eec\u80fd\u7075\u6d3b\u7684\u5b9a\u4e49\u4e00\u4e9b hook \u51fd\u6570\u6765\u5b9e\u73b0\u6211\u4eec\u60f3\u8981\u7684\u529f\u80fd\uff0cPytest \u4ee5\u53ca\u5176\u4e09\u65b9\u63d2\u4ef6\uff0c\u90fd\u662f\u57fa\u4e8e\u6b64\u57fa\u672c\u903b\u8f91\u6784\u5efa\u8d77\u6765\u7684\u3002</p> <p>\u8fd9\u91cc\u5c31\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u57fa\u672c\u539f\u7406\uff0c\u60f3\u8981\u6df1\u5165\u4e86\u89e3\u7684\u540c\u5b66\u70b9\u8fd9\u91cc Pluggy\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/","title":"OpenCV(Python)\u57fa\u7840\u20149\u5c0f\u65f6\u5165\u95e8\u7248","text":"<pre><code># =============================================\n# Author : Mikigo\n# Time   : 2021/12/1\n# =============================================\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_1","title":"\u4e00\u3001\u4e00\u53e5\u8bdd\u7b80\u4ecb","text":"<p><code>OpenCV (Open Source Computer Vision Library)</code> \u662f\u7528 <code>C++</code> \u8bed\u8a00\u7f16\u5199\uff0c\u63d0\u4f9b <code>Python</code>\u3001<code>Java</code> \u7b49\u8bed\u8a00 <code>API</code>\u7684\u4e00\u4e2a\u5f00\u6e90\u8ba1\u7b97\u673a\u89c6\u89c9\u5e93\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_2","title":"\u4e8c\u3001\u5b89\u88c5","text":"<p>1\u3001<code>Debian</code> \u7cfb\u4f7f\u7528 <code>apt</code> \u5b89\u88c5 <code>OpencCV</code>\uff1a</p> <pre><code>sudo apt install python-opencv\n</code></pre> <p>\u5728 <code>UOS</code> \u7cfb\u7edf\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\uff1a</p> <pre><code>sudo apt install python3-opencv\n</code></pre> <p>\u652f\u6301 <code>AMD</code>\u3001<code>ARM</code>\u3001<code>MIPS</code> \u67b6\u6784\u5b89\u88c5\u3002</p> <p>2\u3001\u5b89\u88c5 <code>NumPy</code>\uff1a</p> <p><code>NumPy</code> \u662f Python\u4e2d\u7684\u4e00\u4e2a\u8fd0\u7b97\u901f\u5ea6\u975e\u5e38\u5feb\u7684\u6570\u5b66\u5e93\uff0c\u6570\u7ec4\u73a9\u5230\u8d77\u98de\uff0c\u5982\u679c\u4f60\u73a9\u6570\u636e\u79d1\u5b66\u3001\u673a\u5668\u5b66\u4e60\uff0c\u8fd9\u662f\u5fc5\u5b66\u5e93\u3002\u6240\u6709 <code>OpenCV</code> \u6570\u7ec4\u7ed3\u6784\u90fd\u8f6c\u6362\u4e3a <code>NumPy</code> \u6570\u7ec4\uff0c\u8981\u60f3 <code>OpenCV</code> \u5b66\u5f97\u597d\uff0c\u5fc5\u987b\u719f\u6089\u5b83\uff0c\u5b66\u4e60 <code>OpenCV</code> \u57fa\u7840\u591a\u5c11\u9700\u8981\u4e86\u89e3\u4e00\u70b9\u3002</p> <pre><code>sudo apt -y install python3-numpy\n</code></pre> <p>\u597d\u591a\u540c\u5b66\u5b89\u88c5 <code>Python</code> \u5e93\u90fd\u4e60\u60ef\u4f7f\u7528 <code>pip</code> \u5b89\u88c5\uff0c\u5b9e\u9645\u4e0a <code>OpenCV</code> \u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u76ee\u524d\u53ea\u652f\u6301\u5728 <code>AMD</code>\uff0c\u6240\u4ee5\u8003\u8651\u5230\u517c\u5bb9\u6027\u8fd8\u662f\u5efa\u8bae\u4f7f\u7528 <code>apt</code> \u8fdb\u884c\u5b89\u88c5\uff0c\u5e76\u4e14\u5b98\u65b9\u6587\u6863\u4e5f\u662f\u5efa\u8bae\u4f7f\u7528 <code>apt</code> \u5b89\u88c5\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_3","title":"\u4e09\u3001\u5165\u95e8\u57fa\u7840","text":"<p>\u6240\u6709 <code>OpenCV</code> \u7c7b\u548c\u51fd\u6570\u90fd\u653e\u5728 <code>cv</code> \u540d\u79f0\u7a7a\u95f4\u4e2d\uff0c\u5728 <code>py</code> \u6587\u4ef6\u4e2d\u5bfc\u5165\uff1a</p> <pre><code>import cv2 as cv\n</code></pre> <p>\u540e\u7eed\u5185\u5bb9\u9ed8\u8ba4\u90fd\u4f7f\u7528\u4e86\u5bfc\u5165\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1","title":"1\u3001\u56fe\u50cf","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#11","title":"1.1\u3001\u8bfb\u56fe\u50cf","text":"<pre><code>img = cv.imread()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u6587\u4ef6\u8def\u5f84\u3002(str)</li> <li>\u53c2\u65702\uff1a\u8bfb\u53d6\u56fe\u50cf\u7684\u65b9\u5f0f\u3002</li> <li>cv.IMREAD_COLOR \u52a0\u8f7d\u4e00\u4e2a\u5f69\u8272\u56fe\u50cf\uff0c\u5ffd\u7565 alpha \u901a\u9053\u3002\uff08\u9ed8\u8ba4\u503c\uff09</li> <li>cv.IMREAD_GRAYSCALE \u52a0\u8f7d\u56fe\u50cf\u4e3a\u7070\u5ea6\u6a21\u5f0f\u3002</li> <li>cv.IMREAD_UNCHANGED \u52a0\u8f7d\u56fe\u50cf\uff0c\u5305\u62ec alpha \u901a\u9053\u3002</li> <li>\u8fd8\u53ef\u4ee5\u7b80\u5355\u5730\u5206\u522b\u4f20\u9012\u6574\u65701\u30010\u6216 -1\u3002</li> </ul>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#12","title":"1.2\u3001\u663e\u793a\u56fe\u50cf","text":"<pre><code>cv.show()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u7a97\u53e3\u540d\u79f0\u3002\uff08str\uff09</li> <li>\u53c2\u65702\uff1a\u56fe\u50cf\u3002\uff08obj\uff09</li> </ul> <p>\u5728\u7a97\u53e3\u4e2d\u663e\u793a\u56fe\u50cf\uff0c\u7a97\u53e3\u81ea\u52a8\u9002\u5408\u56fe\u50cf\u5927\u5c0f\u3002</p> <p>\u9500\u6bc1\u7a97\u53e3</p> <pre><code>cv.destroyAllWindows() # \u9500\u6bc1\u6240\u6709\u7a97\u53e3\ncv.destroyWindow(\"window_name\") # \u9500\u6bc1\u67d0\u4e2a\u7a97\u53e3\uff0c\u53c2\u6570\u4f20\u5165\u7a97\u53e3\u540d\u79f0\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#13","title":"1.3\u3001\u5199\u56fe\u50cf","text":"<pre><code>cv.imwrite()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u6587\u4ef6\u540d\u3002</li> <li>\u53c2\u65702\uff1a\u56fe\u50cf\u3002\uff08obj\uff09</li> </ul>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2","title":"2\u3001\u89c6\u9891","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#21","title":"2.1\u3001\u4ece\u6444\u50cf\u5934\u6355\u83b7\u89c6\u9891","text":"<pre><code>cap = cv.VideoCapture(0)\n</code></pre> <p>\u5b83\u7684\u53c2\u6570\u53ef\u4ee5\u662f\u8bbe\u5907\u7d22\u5f15\u6216\u89c6\u9891\u6587\u4ef6\u7684\u540d\u79f0\u3002\u8bbe\u5907\u7d22\u5f15\u5c31\u662f\u6307\u5b9a\u54ea\u4e2a\u6444\u50cf\u5934\u7684\u6570\u5b57\u3002\u4e00\u822c\u6211\u4eec\u8fde\u63a5\u4e00\u4e2a\u6444\u50cf\u5934\uff0c\u6240\u4ee5\u4f200(\u6216-1)\u3002\u5f53\u7136\u53ef\u4ee5\u901a\u8fc7\u4f20\u90121\u6765\u9009\u62e9\u7b2c\u4e8c\u4e2a\u76f8\u673a\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <pre><code>import cv2 as cv\ncap = cv.VideoCapture(0)\n# \u5224\u65ad\u662f\u5426\u6253\u5f00\nif not cap.isOpened(): \nexit()\nwhile True:  \n# \u9010\u5e27\u6355\u83b7\nret, frame = cap.read()  \n# \u5224\u65ad\u662f\u5426\u8bfb\u53d6\u5230\nif not ret:  \nbreak\n# \u8f6c\u7070\u5ea6\ngray = cv.cvtColor(frame, cv.COLOR_BGR2GRAY)\n# \u663e\u793a\u56fe\u50cf\ncv.imshow('frame', gray)\n# \u76d1\u63a7\u952e\u76d8\u4fe1\u53f7\nif cv.waitKey(1) == ord('q'):\nbreak\n# \u91ca\u653e\ncap.release()\ncv.destroyAllWindows()\n</code></pre> <p>\u4e00\u5207\u90fd\u770b\u8d77\u6765\u5f88\u548c\u8c10\u54c8\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u5176\u4ed6\u7684\u4e24\u4e2a\u5224\u65ad\uff1a</p> <ul> <li>\u6709\u65f6\u5019\u6444\u50cf\u5934\u53ef\u80fd\u6ca1\u6709\u521d\u59cb\u5316\u6210\u529f\uff0c\u6240\u4ee5\u7528<code>cap.isOpened()</code> \u6765\u5224\u65ad\uff0c\u5e76\u9000\u51fa\u3002</li> <li>\u53ef\u80fd\u6ca1\u6709\u63a5\u6536\u5230\u5e27\uff0c\u505c\u6b62\u5faa\u73af\u3002</li> </ul> <p>\u83b7\u53d6\u89c6\u9891\u7684\u4e00\u4e9b\u5c5e\u6027\uff1a</p> <pre><code>cap.get(id)\n</code></pre> <p><code>id</code> \u662f\u4e00\u4e2a\u4ece0\u523018\u7684\u6570\u5b57\uff0c\u6bcf\u4e2a\u6570\u5b57\u8868\u793a\u89c6\u9891\u7684\u4e00\u4e2a\u5c5e\u6027\u3002\u6bcf\u4e2a\u5c5e\u6027\u4ee3\u8868\u4ec0\u4e48\u2192\uff08https://docs.opencv.org/4.1.2/d4/d15/group__videoio__flags__base.html#gaeb8dd9c89c10a5c63c139bf7c4f5704d\uff09</p> <p><code>cap.set()</code> \u5c5e\u4e8e\u8fdb\u9636\u7528\u6cd5\uff0c\u8fd9\u91cc\u6309\u4e0b\u4e0d\u8868\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#22","title":"2.2\u3001\u4ece\u6587\u4ef6\u4e2d\u64ad\u653e\u89c6\u9891","text":"<p>\u539f\u7406\u548c\u4ece\u6444\u50cf\u5934\u4e2d\u6355\u83b7\u662f\u4e00\u6837\u7684\uff0c\u533a\u522b\u5728\u4e8e\uff1a</p> <pre><code>cap = cv.VideoCapture('vtest.avi')\n</code></pre> <p>\u53c2\u6570\u662f\u6587\u4ef6\u540d\u79f0\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#23","title":"2.3\u3001\u4fdd\u5b58\u89c6\u9891","text":"<pre><code>out = VideoWriter()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u6587\u4ef6\u540d</li> <li>\u53c2\u65702\uff1afourcc = cv.VideoWriter_fourcc(*'XVID')</li> <li>FourCC \u662f\u4e00\u4e2a4\u5b57\u8282\u7684\u4ee3\u7801\uff0c\u7528\u4e8e\u6307\u5b9a\u89c6\u9891\u7f16\u89e3\u7801\u5668\u3002</li> <li>DIVX, XVID, MJPG, X264, WMV1, WMV2</li> <li>\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u6709\u5dee\u5f02 https://www.fourcc.org/codecs.php</li> <li>\u53c2\u65703\uff1a\u5e27\u7387</li> <li>\u53c2\u65703\uff1a\u5206\u8fa8\u7387</li> </ul> <pre><code>import cv2 as cv\ncap = cv.VideoCapture(0)\nfourcc = cv.VideoWriter_fourcc(*'XVID')\nout = cv.VideoWriter('output.avi', fourcc, 20.0, (640,  480))\nwhile cap.isOpened():\nret, frame = cap.read()\nif not ret:\nbreak\n# \u65cb\u8f6c\u540e\u5199\u5165\nframe = cv.flip(frame, 0)\nout.write(frame)\ncv.imshow('frame', frame)\nif cv.waitKey(1) == ord('q'):\nbreak\n# \u91ca\u653e\ncap.release()\nout.release()\ncv.destroyAllWindows()\n</code></pre> <p>\u7ed3\u5408\u524d\u9762\u6444\u50cf\u5934\u6355\u83b7\u89c6\u9891\u7684\u4ee3\u7801\uff0c\u770b\u8d77\u6765\u5f88\u7b80\u5355\uff5e</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3","title":"3\u3001\u7ed8\u56fe","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#31","title":"3.1\u3001\u753b\u7ebf","text":"<pre><code>cv.line()\n</code></pre> <p>\u4e3e\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u9ed1\u8272\u56fe\u50cf\uff0c\u5e76\u4ece\u5de6\u4e0a\u89d2\u5230\u53f3\u4e0b\u89d2\u5728\u4e0a\u9762\u753b\u4e00\u6761\u84dd\u7ebf</p> <pre><code>import numpy as np\nimport cv2 as cv\n# \u5199\u4e00\u4e2a\u9ed1\u8272\u7684\u56fe\u50cf\nimg = np.zeros((512,512,3), np.uint8)\n# \u753b\u4e00\u68395\u50cf\u7d20\u6b3e\u7684\u84dd\u7ebf\ncv.line(img,(0,0),(511,511),(255,0,0),5)\n</code></pre> <p>(255,0,0) \u4ee3\u8868\u84dd\u8272\uff0c\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u662f\u7ebf\u7684\u5bbd\u5ea6\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#32","title":"3.2\u3001\u753b\u5706","text":"<pre><code>cv.circle(img,(447,63), 63, (0,0,255), -1)\n</code></pre> <p>\u53c2\u6570\uff1a\u4e2d\u5fc3\u5750\u6807\u548c\u534a\u5f84</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#33","title":"3.3\u3001\u753b\u77e9\u5f62","text":"<pre><code>cv.rectangle(img,(384,0),(510,128),(0,255,0),3)\n</code></pre> <p>\u53c2\u6570\uff1a\u77e9\u5f62\u7684\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2</p> <p>\u652f\u6301\u5176\u4ed6\u56fe\u5f62\u3002\u3002\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_4","title":"\u56db\u3001\u6838\u5fc3\u529f\u80fd","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_1","title":"1\u3001\u56fe\u50cf\u7684\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#11_1","title":"1.1\u3001\u8bbf\u95ee\u548c\u4fee\u6539\u50cf\u7d20\u503c","text":"<pre><code>import numpy as np  # \u5b98\u65b9\u5efa\u8bae\u56fa\u5b9a\u5199\u6cd5\nimport cv2 as cv\nimg = cv.imread('messi5.jpg')\npx = img[100,100]  \n# (100, 100)\u7684\u50cf\u7d20\u503c[157 166 200]\uff08B\u3001G\u548cR\u503c\uff09\nblue = img[100,100,0] \n</code></pre> <p>\u4fee\u6539</p> <pre><code>img[100,100] = [255,255,255]\n</code></pre> <p>\u76f4\u63a5\u8d4b\u503c\u5373\u53ef\u4fee\u6539\uff0c\u4f46\u662f\u76f4\u63a5\u8bbf\u95ee\u975e\u5e38\u7f13\u6162\uff0c\u66f4\u597d\u7684\u50cf\u7d20\u8bbf\u95ee\u548c\u7f16\u8f91\u65b9\u6cd5:</p> <pre><code>img.item(10,10,2)  # \u8bbf\u95eeR\u503c\nimg.itemset((10,10,2),100)  # \u4fee\u6539R\u503c\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#12_1","title":"1.2\u3001\u8bbf\u95ee\u56fe\u50cf\u5c5e\u6027","text":"<p>\u56fe\u50cf\u5c5e\u6027\u5305\u62ec\u884c\u6570\u3001\u5217\u6570\u548c\u901a\u9053\u6570\u3001\u56fe\u50cf\u6570\u636e\u7c7b\u578b\u3001\u50cf\u7d20\u6570\u7b49\u3002</p> <pre><code>img.shape\n# (342,548,3)\n</code></pre> <p>\u8fd4\u56de\u4e00\u4e2a\u884c\u3001\u5217\u548c\u901a\u9053\u6570\u7684\u5143\u7ec4\u3002</p> <pre><code>img.size  # \u8bbf\u95ee\u50cf\u7d20\u603b\u6570\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#13_1","title":"1.3\u3001\u7279\u5b9a\u533a\u57df","text":"<p>\u673a\u5668\u5b66\u4e60\u4e2d\u7ecf\u5e38\u9700\u8981\u62a0\u56fe\uff0c\u6bd4\u5982\u4eba\u8138\u8bc6\u522b\u65f6\uff0c\u4e00\u822c\u4f1a\u5148\u9009\u62e9\u4eba\u8138\u533a\u57df\uff0c\u641c\u7d22\u5176\u4e2d\u7684\u773c\u775b\uff0c\u800c\u4e0d\u662f\u641c\u7d22\u6574\u4e2a\u56fe\u50cf\uff0c\u4ee5\u63d0\u4f9b\u7cbe\u786e\u5ea6\u3002</p> <pre><code>ball = img[280:340, 330:390] # \u62a0\u4e00\u4e2a\u533a\u57df\nimg[273:333, 100:160] = ball # \u590d\u5236\u5230\u53e6\u4e00\u4e2a\u533a\u57df\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#14","title":"1.4\u3001\u56fe\u50cf\u4fe1\u9053\u7684\u5206\u88c2\u4e0e\u5408\u5e76","text":"<pre><code>b,g,r = cv.split(img)  # \u5206\u88c2\nimg = cv.merge((b,g,r))  # \u5408\u5e76\n</code></pre> <p>\u6216\u8005</p> <pre><code>b = img[:,:,0]\n</code></pre> <p>\u6bd4\u5982\u5c06\u6240\u6709\u7ea2\u8272\u50cf\u7d20\u8bbe\u7f6e\u4e3a\u96f6</p> <pre><code>img[:,:,2] = 0\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_1","title":"2\u3001\u56fe\u50cf\u7684\u7b97\u672f\u8fd0\u7b97","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#21_1","title":"2.1\u3001\u56fe\u7247\u6dfb\u52a0","text":"<pre><code>cv.add()\n</code></pre> <p>\u53ef\u4ee5\u6dfb\u52a0\u4e24\u4e2a\u56fe\u50cf</p> <pre><code>x = np.uint8([250])\ny = np.uint8([10])\ncv.add(x + y)  # 250+10 = 260 =&gt; 255\n</code></pre> <p>OpenCV \u7684\u52a0\u6cd5\u548c Numpy \u7684\u52a0\u6cd5\u662f\u6709\u533a\u522b\u7684\u3002OpenCV \u52a0\u6cd5\u662f\u4e00\u4e2a\u9971\u548c\u64cd\u4f5c\uff0c\u800c Numpy \u52a0\u6cd5\u662f\u4e00\u4e2a\u9664\u4f59\u64cd\u4f5c\u3002</p> <pre><code>x + y  # 250+10 = 260 % 256 = 4\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#22_1","title":"2.2\u3001\u56fe\u50cf\u6df7\u5408","text":"<pre><code>cv.addWeighted()\n</code></pre> <p>\u4e5f\u662f\u56fe\u50cf\u6dfb\u52a0\uff0c\u4f46\u4e0d\u540c\u7684\u6743\u91cd\u7ed9\u4e88\u56fe\u50cf\uff0c\u4f7f\u5b83\u7ed9\u4eba\u4e00\u79cd\u6df7\u5408\u6216\u900f\u660e\u7684\u611f\u89c9\u3002</p> <ul> <li>\u53c2\u65701\u30012\uff1a\u56fe\u50cf1\u53ca\u5176\u6743\u91cd\u3002</li> <li>\u53c2\u65703\u30014\uff1a\u56fe\u50cf2\u53ca\u5176\u6743\u91cd\u3002</li> <li>\u53c2\u65705\uff1a\u56fe\u50cf\u6df7\u5408\u7684\u03b1 \u503c\uff0c\u901a\u8fc7\u6539\u53d8 \u03b1 \u4ece0\u21921\uff0c\u4f60\u53ef\u4ee5\u5728\u4e00\u5f20\u56fe\u7247\u5230\u53e6\u4e00\u5f20\u56fe\u7247\u4e4b\u95f4\u8fdb\u884c\u4e00\u4e2a\u5f88\u9b54\u5e7b\u7684\u8f6c\u6362\u3002</li> </ul> <pre><code>img1 = cv.imread('ml.png')\nimg2 = cv.imread('opencv-logo.png')\n# \u7b2c\u4e00\u5e45\u56fe\u50cf\u7684\u6743\u91cd\u4e3a0.7\uff0c\u7b2c\u4e8c\u5e45\u56fe\u50cf\u7684\u6743\u91cd\u4e3a0.3\ndst = cv.addWeighted(img1,0.7,img2,0.3,0)\ncv.imshow('dst',dst)\ncv.waitKey(0)\ncv.destroyAllWindows()\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#23_1","title":"2.3\u3001\u6309\u4f4d\u64cd\u4f5c","text":"<p>\u6309\u4f4d AND\u3001 OR\u3001 NOT \u548c XOR \u64cd\u4f5c\u3002</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u56fe\u50cf\u7684\u903b\u8f91\u8fd0\u7b97\uff1a</p> <pre><code>img1 = cv.imread('messi5.jpg')\nimg2 = cv.imread('opencv-logo-white.png')\n# \u628a\u6807\u5fd7\u653e\u5728\u5de6\u4e0a\u89d2\uff0c\u6240\u4ee5\u521b\u5efa\u4e86\u4e00\u4e2aroi\nrows,cols,channels = img2.shape\nroi = img1[0:rows, 0:cols ]\n# \u521b\u5efa\u4e00\u4e2a\u6807\u5fd7\u56fe\u6848\uff0c\u4ee5\u53ca\u5b83\u7684\u53cd\u9762\nimg2gray = cv.cvtColor(img2,cv.COLOR_BGR2GRAY) # \u7070\u5ea6\u5904\u7406\nret, mask = cv.threshold(img2gray, 10, 255, cv.THRESH_BINARY)\nmask_inv = cv.bitwise_not(mask)\n# \u9ed1\u6389 ROI \u4e2d\u7684 logo \u533a\u57df\nimg1_bg = cv.bitwise_and(roi,roi,mask = mask_inv)\n# \u53ea\u53d6\u6807\u5fd7\u56fe\u50cf\u4e2d\u7684\u6807\u5fd7\u533a\u57df\nimg2_fg = cv.bitwise_and(img2,img2,mask = mask)\n# \u5c06 logo \u653e\u5165 ROI \u4e2d\uff0c\u5e76\u4fee\u6539\u4e3b\u56fe\u50cf\ndst = cv.add(img1_bg,img2_fg)\nimg1[0:rows, 0:cols ] = dst\ncv.imshow('res',img1)\ncv.waitKey(0)\ncv.destroyAllWindows()\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#_5","title":"\u4e94\u3001\u56fe\u50cf\u5904\u7406","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#1_2","title":"1\u3001\u6539\u53d8\u8272\u5f69\u7a7a\u95f4","text":"<p>OpenCV \u76ee\u524d\u6709150\u591a\u79cd\u989c\u8272\u7a7a\u95f4\u8f6c\u6362\u65b9\u6cd5\u3002\u4f46\u5176\u4e2d\u4e24\u4e2a\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\uff1a</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#11gray","title":"1.1\u3001Gray","text":"<p><code>cv.COLOR_BGR2GRAY</code></p> <p>\u987e\u540d\u601d\u4e49\uff1aBGR \u2192 Gray </p> <p>\u8fd9\u4e2a\u56fe\u50cf\u8bc6\u522b\u4e2d\u7ecf\u5e38\u4f7f\u7528\uff0c\u53ef\u4ee5\u63d0\u4f9b\u8bc6\u522b\u901f\u5ea6\u548c\u51c6\u786e\u5ea6\u3002</p>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#12hsv","title":"1.2\u3001HSV","text":"<p><code>cv.COLOR_BGR2HSV</code></p> <p>\u987e\u540d\u601d\u4e49\uff1aBGR \u2192 HSV</p> <p>HSV \u56fe\u50cf\u53ef\u4ee5\u7528\u5b83\u6765\u63d0\u53d6\u6709\u8272\u7269\u4f53\u5728 HSV \u4e2d\uff0c\u6bd4\u5728 BGR \u989c\u8272\u7a7a\u95f4\u4e2d\u66f4\u5bb9\u6613\u8868\u793a\u989c\u8272\u3002</p> <pre><code>import cv2 as cv\nimport numpy as np\ncap = cv.VideoCapture(0)\nwhile True:\n# \u53d6\u51fa\u89c6\u9891\u7684\u6bcf\u4e00\u5e27\n_, frame = cap.read()\n# \u4ece BGR \u5230 HSV \u989c\u8272\u7a7a\u95f4\u7684\u8f6c\u6362\nhsv = cv.cvtColor(frame, cv.COLOR_BGR2HSV)\n# \u5b9a\u4e49 HSV \u4e2d\u84dd\u8272\u7684\u8303\u56f4\nlower_blue = np.array([110,50,50])\nupper_blue = np.array([130,255,255])\n# \u5f97\u5230\u84dd\u8272\nmask = cv.inRange(hsv, lower_blue, upper_blue)\n# \u6309\u4f4d-and \u8499\u7248\u548c\u539f\u59cb\u56fe\u50cf\nres = cv.bitwise_and(frame,frame, mask= mask)\ncv.imshow('frame',frame)\ncv.imshow('mask',mask)\ncv.imshow('res',res)\nk = cv.waitKey(5) &amp; 0xFF\nif k == 27:\nbreak\ncv.destroyAllWindows()\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#2_2","title":"2\u3001\u51e0\u4f55\u53d8\u6362","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#21_2","title":"2.1\u3001\u7f29\u653e","text":"<pre><code>res = cv.resize(InputArray, OutputArray, Size, fx, fy, interpolation)\n</code></pre> \u53c2\u6570 \u89e3\u91ca nputArray src \u8f93\u5165\u56fe\u7247 OutputArray dst \u8f93\u51fa\u56fe\u7247 Size \u8f93\u51fa\u56fe\u7247\u5c3a\u5bf8 fx, fy \u6cbfx\u8f74\uff0cy\u8f74\u7684\u7f29\u653e\u7cfb\u6570 interpolation \u63d2\u5165\u65b9\u5f0f <p><code>interpolation</code> \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u7684\u63d2\u503c\u65b9\u6cd5\u662f  <code>cv.INTER_LINEAR</code>\uff0c\u7528\u4e8e\u6240\u6709\u8c03\u6574\u5927\u5c0f\u3002</p> <p>\u4e3e\u4f8b\uff1a</p> <pre><code>import numpy as np\nimport cv2 as cv\nimg = cv.imread('messi5.jpg')\nres = cv.resize(img,None,fx=2, fy=2, interpolation = cv.INTER_CUBIC)\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#22_2","title":"2.2\u3001\u65cb\u8f6c","text":"<pre><code>cv.getRotationMatrix2D()\n</code></pre> <p>\u65cb\u8f6c90\u5ea6\uff1a</p> <pre><code>img = cv.imread('messi5.jpg',0)\nrows,cols = img.shape\n# cols-1 and rows-1 are the coordinate limits.\nM = cv.getRotationMatrix2D(((cols-1)/2.0,(rows-1)/2.0),90,1)\ndst = cv.warpAffine(img,M,(cols,rows))\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#3_1","title":"3\u3001\u56fe\u50cf\u9608\u503c\u5316","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#31_1","title":"3.1\u3001\u81ea\u9002\u5e94\u9608\u503c\u5206\u5272","text":"<p>\u5982\u679c\u50cf\u7d20\u503c\u5c0f\u4e8e\u9608\u503c\uff0c\u5219\u5c06\u5176\u8bbe\u7f6e\u4e3a0\uff0c\u5426\u5219\u5c06\u5176\u8bbe\u7f6e\u4e3a\u6700\u5927\u503c\u3002</p> <pre><code>ret,thresh1 = cv.threshold(img,127,255,cv.THRESH_BINARY)\n</code></pre> <ul> <li>cv.THRESH_BINARY </li> <li>cv.THRESH_BINARY_INV</li> <li>cv.THRESH_TRUNC</li> <li>cv.THRESH_TOZERO</li> <li>cv.THRESH_TOZERO_INV</li> </ul> <p>\u5982\u679c\u4e00\u4e2a\u56fe\u50cf\u5728\u4e0d\u540c\u7684\u533a\u57df\u6709\u4e0d\u540c\u7684\u7167\u660e\u6761\u4ef6\uff0c\u5168\u5c40\u4f7f\u7528\u4e00\u4e2a\u9608\u503c\u4e00\u822c\u662f\u4e0d\u53ef\u7528\u7684\uff0c\u5bf9\u540c\u4e00\u5e45\u56fe\u50cf\u7684\u4e0d\u540c\u533a\u57df\u91c7\u7528\u4e0d\u540c\u7684\u9608\u503c\uff0c\u5bf9\u4e0d\u540c\u5149\u7167\u6761\u4ef6\u4e0b\u7684\u56fe\u50cf\u53d6\u5f97\u4e86\u8f83\u597d\u7684\u6548\u679c\u3002</p> <ul> <li>cv.ADAPTIVE_THRESH_MEAN_C \u9608\u503c\u662f\u90bb\u8fd1\u533a\u57df\u7684\u5e73\u5747\u503c\u51cf\u53bb\u5e38\u6570 c</li> <li>cv.ADAPTIVE_THRESH_GAUSSIAN_C  \u9608\u503c\u662f\u90bb\u57df\u503c\u51cf\u53bb\u5e38\u6570 c \u7684\u9ad8\u65af\u52a0\u6743\u548c</li> </ul> <pre><code>import cv2 as cv\nimport numpy as np\nfrom matplotlib import pyplot as plt\nimg = cv.imread('sudoku.png',0)\nimg = cv.medianBlur(img,5)\nret,th1 = cv.threshold(img,127,255,cv.THRESH_BINARY)\nth2 = cv.adaptiveThreshold(img,255,cv.ADAPTIVE_THRESH_MEAN_C,cv.THRESH_BINARY,11,2)\nth3 = cv.adaptiveThreshold(img,255,cv.ADAPTIVE_THRESH_GAUSSIAN_C,cv.THRESH_BINARY,11,2)\ntitles = ['Original Image', 'Global Thresholding (v = 127)',\n'Adaptive Mean Thresholding', 'Adaptive Gaussian Thresholding']\nimages = [img, th1, th2, th3]\nfor i in xrange(4):\nplt.subplot(2,2,i+1),plt.imshow(images[i],'gray')\nplt.title(titles[i])\nplt.xticks([]),plt.yticks([])\nplt.show()\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#4","title":"4\u3001\u6a21\u677f\u5339\u914d","text":""},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#41","title":"4.1\u3001\u5355\u76ee\u6807\u5339\u914d","text":"<p>\u6a21\u677f\u5339\u914d\u662f\u4e00\u79cd\u5728\u8f83\u5927\u56fe\u50cf\u4e2d\u641c\u7d22\u548c\u67e5\u627e\u6a21\u677f\u56fe\u50cf\u4f4d\u7f6e\u7684\u65b9\u6cd5\u3002</p> <pre><code>cv.matchTemplate()\n</code></pre> <ul> <li>\u53c2\u65701\uff1a\u5927\u56fe</li> <li>\u53c2\u65702\uff1a\u5c0f\u56fe</li> <li>\u53c2\u65703\uff1a\u5339\u914d\u65b9\u6cd5</li> <li>cv.TM_CCOEFF</li> <li>cv.TM_CCOEFF_NORMED</li> <li>cv.TM_CCORR</li> <li>cv.TM_CCORR_NORMED</li> <li>cv.TM_SQDIFF</li> <li>cv.TM_SQDIFF_NORMED</li> </ul> <p>\u67e5\u627e\u6700\u5927/\u6700\u5c0f\u503c</p> <pre><code> cv.minMaxLoc()\n</code></pre> <pre><code>res = cv.matchTemplate(source, template, cv.TM_CCOEFF_NORMED)\ncv.minMaxLoc(res)\n</code></pre>"},{"location":"%E8%A7%86%E8%A7%89/OpenCV%28Python%29%E5%9F%BA%E7%A1%80%E2%80%949%E5%B0%8F%E6%97%B6%E5%85%A5%E9%97%A8%E7%89%88/#42","title":"4.2\u3001\u591a\u76ee\u6807\u5339\u914d","text":"<p><code>cv.minMaxLoc()</code>\u4e0d\u4f1a\u7ed9\u51fa\u6240\u6709\u4f4d\u7f6e\u3002</p> <p>\u901a\u8fc7\u9608\u503c\u5904\u7406\u591a\u4e2a\u6a21\u677f\u5339\u914d\u3002</p> <pre><code>import cv2 as cv\nimport numpy as np\nfrom matplotlib import pyplot as plt\nimg_rgb = cv.imread('mario.png')\nimg_gray = cv.cvtColor(img_rgb, cv.COLOR_BGR2GRAY)\ntemplate = cv.imread('mario_coin.png',0)\nw, h = template.shape[::-1]\nres = cv.matchTemplate(img_gray,template,cv.TM_CCOEFF_NORMED)\nloc = np.where( res &gt;= 0.8)\nfor pt in zip(*loc[::-1]):\ncv.rectangle(img_rgb, pt, (pt[0] + w, pt[1] + h), (0,0,255), 2)\ncv.imwrite('res.png',img_rgb)\n</code></pre>"}]}