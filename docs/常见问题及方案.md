# 常见问题及方案

## 1、Linux 上安装 Python 3.9.9

```shell
#!/bin/bash
set -e
# 装依赖
sudo apt install -y zlib1g-dev libbz2-dev libssl-dev libncurses5-dev libsqlite3-dev libreadline-dev tk-dev libgdbm-dev libdb-dev libpcap-dev xz-utils libexpat1-dev liblzma-dev libffi-dev libc6-dev
# 下载源码
wget https://cdn.npm.taobao.org/dist/python/3.9.9/Python-3.9.9.tgz
# 解压
tar -xzf Python-3.9.9.tgz
# 放在/usr/local/share/下
sudo mv  Python-3.9.9 /usr/local/share/
# 编译
cd  /usr/local/share/Python-3.9.9/
./configure --prefix=/usr/local/python3.9
# 设置优化选项--enable-optimizations
# ./configure --prefix=/usr/local/python3.9 --enable-optimizations
make -j4
sudo make install
# 设置软连接
sudo ln -s /usr/local/python3.9/bin/python3.9 /usr/bin/python3.9
sudo ln -s /usr/local/python3.9/bin/python3.9-config /usr/bin/python3.9-config
```

## 2、Linux 上安装 Node.js

【方法一】

在官网下载：https://nodejs.cn/download/current/

建议选择最新的 `LTS` 版本；

下载下来加压到 `/opt` 目录下：

```shell
ln -s /opt/nodejs/bin/npm   /usr/bin/npm
ln -s /opt/nodejs/bin/node   /usr/bin/node
```

【方法二】

`Node.js LTS (v18.x)`:

```
curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash - &&\
sudo apt-get install -y nodejs
```

安装完之后查看版本，没报错就说明安装好了；

```shell
mikigo@mikigo-PC:~$ node -v
v16.18.1
mikigo@mikigo-PC:~$ npm -v
8.19.2
```

## 3、配置开机自启服务

写开机自启服务文件：

```shell
sudo vim /lib/systemd/system/test.service
```

写入以下内容：

```shell
[Unit]
Description=Test Service
After=multi-user.target

[Service]
User=uos
Group=uos
Type=idle
WorkingDirectory=/home/uos/ocr_env
ExecStart=$do you shell scripts$

[Install]
WantedBy=multi-user.target
```

修改配置文件的权限：

```shell
sudo chmod 644 /lib/systemd/system/test.service
```

自启服务生效：

```shell
sudo systemctl daemon-reload
sudo systemctl enable test.service
```

查看服务状态：

```shell
sudo systemctl status test.service
```

## 4、配置Python源的几种方法

### （1）临时添加三方源

```shell
pip3 install funnylog -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### （2）requirements.txt 添加三方源

```shell
# requirements.txt
-i https://pypi.tuna.tsinghua.edu.cn/simple

funnylog
...
```

### （3）命令行永久配置

- 适用于 `pip3 install` 的安装方式：

```shell
pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

- 适用于 `sudo pip3 install` 的安装方式：

```shell
sudo pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

可以多次执行添加多个。

### （4）修改配置文件永久配置

- 适用于 `pip3 install` 的安装方式：

```shell
vi ~/.config/pip/pip.conf
```

配置如下：

```config
[global]
index-url = http://pypi.douban.com/simple/
```

- 适用于 `sudo pip3 install` 的安装方式：

```shell
sudo vi /root/.config/pip/pip.conf
```

配置如下：

```shell
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
```

### （5）常用的几个三方源

```shell
# 清华
https://pypi.tuna.tsinghua.edu.cn/simple/
# 阿里云
http://mirrors.aliyun.com/pypi/simple/
# 中国科技大学
https://pypi.mirrors.ustc.edu.cn/simple/
# 华中科技大学
http://pypi.hustunique.com/simple/
# 上海交通大学
https://mirror.sjtu.edu.cn/pypi/web/simple/
# 豆瓣
http://pypi.douban.com/simple/
# 统信代理的阿里云地址
https://it.uniontech.com/nexus/repository/pypi-public/simple
```

